Module {modName = "TlsExample", modExports = [ExposeValue "main"], modImports = [Import {impName = "Lune.IO", impAs = Just "IO", impExposing = Nothing},Import {impName = "Lune.Prelude", impAs = Nothing, impExposing = Just [ExposeType "IO" ExposeOpaque,ExposeType "Result" ExposeAll,ExposeType "Unit" ExposeOpaque,ExposeType "List" ExposeAll,ExposeType "Int" ExposeOpaque,ExposeType "String" ExposeOpaque]},Import {impName = "Lune.Bytes", impAs = Just "Bytes", impExposing = Just [ExposeType "Bytes" ExposeOpaque]},Import {impName = "Lune.Net.Tls", impAs = Just "Tls", impExposing = Just [ExposeType "TlsConn" ExposeOpaque]},Import {impName = "Lune.String", impAs = Just "Str", impExposing = Nothing}], modDecls = [DeclTypeSig "main" (QualType {qualConstraints = [], qualType = TypeApp (TypeCon "IO") (TypeCon "Unit")}),DeclValue "main" [] (DoBlock [ExprStmt (App (FieldAccess (Var "IO") "println") (StringLit "=== TLS Connection Example ===")),ExprStmt (App (FieldAccess (Var "IO") "println") (StringLit "")),ExprStmt (App (FieldAccess (Var "IO") "println") (StringLit "TLS provides encrypted network connections.")),ExprStmt (App (FieldAccess (Var "IO") "println") (StringLit "")),ExprStmt (App (FieldAccess (Var "IO") "println") (StringLit "1. Connect to a TLS server:")),ExprStmt (App (FieldAccess (Var "IO") "println") (StringLit "   result <- Tls.connect hostname port")),ExprStmt (App (FieldAccess (Var "IO") "println") (StringLit "")),ExprStmt (App (FieldAccess (Var "IO") "println") (StringLit "2. Send bytes:")),ExprStmt (App (FieldAccess (Var "IO") "println") (StringLit "   _ <- Tls.sendBytes conn (Bytes.fromList [...])")),ExprStmt (App (FieldAccess (Var "IO") "println") (StringLit "")),ExprStmt (App (FieldAccess (Var "IO") "println") (StringLit "3. Receive bytes (up to N):")),ExprStmt (App (FieldAccess (Var "IO") "println") (StringLit "   response <- Tls.recvBytes conn 1024")),ExprStmt (App (FieldAccess (Var "IO") "println") (StringLit "")),ExprStmt (App (FieldAccess (Var "IO") "println") (StringLit "4. Close connection:")),ExprStmt (App (FieldAccess (Var "IO") "println") (StringLit "   Tls.close conn")),ExprStmt (App (FieldAccess (Var "IO") "println") (StringLit "")),ExprStmt (App (FieldAccess (Var "IO") "println") (StringLit "=== Type Signatures ===")),ExprStmt (App (FieldAccess (Var "IO") "println") (StringLit "connect : String -> Int -> IO (Result Error TlsConn)")),ExprStmt (App (FieldAccess (Var "IO") "println") (StringLit "sendBytes : TlsConn -> Bytes -> IO (Result Error Unit)")),ExprStmt (App (FieldAccess (Var "IO") "println") (StringLit "recvBytes : TlsConn -> Int -> IO (Result Error Bytes)")),ExprStmt (App (FieldAccess (Var "IO") "println") (StringLit "close : TlsConn -> IO (Result Error Unit)")),ExprStmt (App (FieldAccess (Var "IO") "println") (StringLit "")),ExprStmt (App (FieldAccess (Var "IO") "println") (StringLit "=== Example: Simple HTTPS Request ===")),ExprStmt (App (FieldAccess (Var "IO") "println") (StringLit "-- Connect to example.com over TLS")),ExprStmt (App (FieldAccess (Var "IO") "println") (StringLit "result <- Tls.connect \"example.com\" 443")),ExprStmt (App (FieldAccess (Var "IO") "println") (StringLit "case result of")),ExprStmt (App (FieldAccess (Var "IO") "println") (StringLit "  Err e -> IO.println \"Connection failed\"")),ExprStmt (App (FieldAccess (Var "IO") "println") (StringLit "  Ok conn ->")),ExprStmt (App (FieldAccess (Var "IO") "println") (StringLit "    do")),ExprStmt (App (FieldAccess (Var "IO") "println") (StringLit "      -- Send HTTP GET request")),ExprStmt (App (FieldAccess (Var "IO") "println") (StringLit "      let request = \"GET / HTTP/1.1\\r\\nHost: example.com\\r\\n\\r\\n\"")),ExprStmt (App (FieldAccess (Var "IO") "println") (StringLit "      _ <- Tls.sendBytes conn (stringToBytes request)")),ExprStmt (App (FieldAccess (Var "IO") "println") (StringLit "      -- Read response")),ExprStmt (App (FieldAccess (Var "IO") "println") (StringLit "      response <- Tls.recvBytes conn 4096")),ExprStmt (App (FieldAccess (Var "IO") "println") (StringLit "      -- Close")),ExprStmt (App (FieldAccess (Var "IO") "println") (StringLit "      Tls.close conn")),ExprStmt (App (FieldAccess (Var "IO") "println") (StringLit "")),ExprStmt (App (FieldAccess (Var "IO") "println") (StringLit "=== Use Case: PostgreSQL Protocol ===")),ExprStmt (App (FieldAccess (Var "IO") "println") (StringLit "The PostgreSQL wire protocol can be implemented using:")),ExprStmt (App (FieldAccess (Var "IO") "println") (StringLit "- Tls.connect for SSL connections")),ExprStmt (App (FieldAccess (Var "IO") "println") (StringLit "- Bytes.packInt32BE for message lengths")),ExprStmt (App (FieldAccess (Var "IO") "println") (StringLit "- Bytes.packInt16BE for field counts")),ExprStmt (App (FieldAccess (Var "IO") "println") (StringLit "- Pure Lune functions for protocol encoding/decoding")),ExprStmt (App (FieldAccess (Var "IO") "println") (StringLit "")),ExprStmt (App (FieldAccess (Var "IO") "println") (StringLit "Done!"))])]}
