Module {modName = "HelloPostgres", modExports = [ExposeValue "main"], modImports = [Import {impName = "Lune.IO", impAs = Just "IO", impExposing = Nothing},Import {impName = "Lune.Prelude", impAs = Nothing, impExposing = Just [ExposeType "IO" ExposeOpaque,ExposeType "Result" ExposeAll,ExposeType "Unit" ExposeOpaque,ExposeType "Int" ExposeOpaque]},Import {impName = "Lune.Database", impAs = Nothing, impExposing = Just [ExposeType "DbConn" ExposeOpaque,ExposeType "DbError" ExposeOpaque,ExposeValue "errorToString"]},Import {impName = "Lune.Database.Postgres", impAs = Just "Postgres", impExposing = Nothing},Import {impName = "Lune.String", impAs = Just "Str", impExposing = Nothing}], modDecls = [DeclTypeSig "main" (QualType {qualConstraints = [], qualType = TypeApp (TypeCon "IO") (TypeCon "Unit")}),DeclValue "main" [] (DoBlock [ExprStmt (App (FieldAccess (Var "IO") "println") (StringLit "Connecting to PostgreSQL...")),BindStmt (PVar "result") (App (FieldAccess (Var "Postgres") "connect") (StringLit "postgresql://localhost/testdb")),ExprStmt (Case (Var "result") [Alt (PCon "Err" [PVar "e"]) (App (FieldAccess (Var "IO") "println") (App (App (FieldAccess (Var "Str") "append") (StringLit "Connection error: ")) (App (Var "errorToString") (Var "e")))),Alt (PCon "Ok" [PVar "conn"]) (DoBlock [ExprStmt (App (FieldAccess (Var "IO") "println") (StringLit "Connected!")),BindStmt (PVar "execResult") (App (App (FieldAccess (Var "Postgres") "execute") (Var "conn")) (StringLit "SELECT 1")),ExprStmt (Case (Var "execResult") [Alt (PCon "Err" [PVar "e"]) (App (FieldAccess (Var "IO") "println") (App (App (FieldAccess (Var "Str") "append") (StringLit "Query error: ")) (App (Var "errorToString") (Var "e")))),Alt (PCon "Ok" [PVar "rowCount"]) (App (FieldAccess (Var "IO") "println") (App (App (FieldAccess (Var "Str") "append") (StringLit "Query executed! Rows affected: ")) (App (FieldAccess (Var "Str") "fromInt") (Var "rowCount"))))]),BindStmt (PVar "closeResult") (App (FieldAccess (Var "Postgres") "close") (Var "conn")),ExprStmt (Case (Var "closeResult") [Alt (PCon "Err" [PVar "e"]) (App (FieldAccess (Var "IO") "println") (App (App (FieldAccess (Var "Str") "append") (StringLit "Close error: ")) (App (Var "errorToString") (Var "e")))),Alt (PCon "Ok" [PWildcard]) (App (FieldAccess (Var "IO") "println") (StringLit "Connection closed."))])])])])]}
