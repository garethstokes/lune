Module {modName = "FileWrite", modExports = [ExposeValue "main"], modImports = [Import {impName = "Lune.IO", impAs = Just "IO", impExposing = Nothing},Import {impName = "Lune.Task", impAs = Just "Task", impExposing = Nothing},Import {impName = "Lune.String", impAs = Just "Str", impExposing = Nothing}], modDecls = [DeclTypeSig "main" (QualType {qualConstraints = [], qualType = TypeApp (TypeApp (TypeCon "Task") (TypeCon "Unit")) (TypeCon "Unit")}),DeclValue "main" [] (App (App (FieldAccess (Var "Task") "onError") (DoBlock [DiscardBindStmt (App (App (FieldAccess (Var "IO") "writeFile") (StringLit "/tmp/lune-test.txt")) (StringLit "Hello from Lune!")),ExprStmt (App (App (FieldAccess (Var "Task") "onError") (DoBlock [BindStmt (PVar "contents") (App (FieldAccess (Var "IO") "readFile") (StringLit "/tmp/lune-test.txt")),ExprStmt (App (FieldAccess (Var "IO") "println") (App (App (FieldAccess (Var "Str") "append") (StringLit "Wrote and read: ")) (Var "contents")))])) (Lam [PWildcard] (App (FieldAccess (Var "IO") "println") (StringLit "Read error"))))])) (Lam [PWildcard] (App (FieldAccess (Var "IO") "println") (StringLit "Write error"))))]}
