Module {modName = "DatabaseHelpers", modExports = [ExposeValue "main"], modImports = [Import {impName = "Lune.IO", impAs = Just "IO", impExposing = Nothing},Import {impName = "Lune.Prelude", impAs = Nothing, impExposing = Just [ExposeType "IO" ExposeOpaque,ExposeType "Result" ExposeAll,ExposeType "Unit" ExposeOpaque,ExposeType "List" ExposeAll,ExposeType "Maybe" ExposeAll,ExposeType "Int" ExposeOpaque,ExposeType "String" ExposeOpaque,ExposeType "Bool" ExposeAll]},Import {impName = "Lune.Database", impAs = Just "Database", impExposing = Just [ExposeType "DbValue" ExposeAll]},Import {impName = "Lune.Database.Decode", impAs = Just "Decode", impExposing = Just [ExposeType "Decoder" ExposeOpaque]},Import {impName = "Lune.Database.Query", impAs = Just "Query", impExposing = Just [ExposeType "Table" ExposeOpaque,ExposeType "Column" ExposeOpaque,ExposeType "Query" ExposeOpaque,ExposeType "Order" ExposeAll]},Import {impName = "Lune.String", impAs = Just "Str", impExposing = Nothing}], modDecls = [DeclTypeSig "products" (QualType {qualConstraints = [], qualType = TypeCon "Table"}),DeclValue "products" [] (App (FieldAccess (Var "Query") "table") (StringLit "products")),DeclTypeSig "products_id" (QualType {qualConstraints = [], qualType = TypeApp (TypeCon "Column") (TypeCon "Int")}),DeclValue "products_id" [] (App (App (FieldAccess (Var "Query") "column") (Var "products")) (StringLit "id")),DeclTypeSig "products_name" (QualType {qualConstraints = [], qualType = TypeApp (TypeCon "Column") (TypeCon "String")}),DeclValue "products_name" [] (App (App (FieldAccess (Var "Query") "column") (Var "products")) (StringLit "name")),DeclTypeSig "products_price" (QualType {qualConstraints = [], qualType = TypeApp (TypeCon "Column") (TypeCon "Int")}),DeclValue "products_price" [] (App (App (FieldAccess (Var "Query") "column") (Var "products")) (StringLit "price")),DeclTypeSig "products_category" (QualType {qualConstraints = [], qualType = TypeApp (TypeCon "Column") (TypeCon "String")}),DeclValue "products_category" [] (App (App (FieldAccess (Var "Query") "column") (Var "products")) (StringLit "category")),DeclTypeAlias "Product" [] (TypeRecord [("id",TypeCon "Int"),("name",TypeCon "String"),("price",TypeCon "Int")]),DeclTypeSig "productDecoder" (QualType {qualConstraints = [], qualType = TypeApp (TypeCon "Decoder") (TypeCon "Product")}),DeclValue "productDecoder" [] (App (App (App (App (FieldAccess (Var "Decode") "map3") (Lam [PVar "id",PVar "name",PVar "price"] (RecordLiteral [("id",Var "id"),("name",Var "name"),("price",Var "price")]))) (App (App (FieldAccess (Var "Decode") "index") (IntLit 0)) (FieldAccess (Var "Decode") "int"))) (App (App (FieldAccess (Var "Decode") "index") (IntLit 1)) (FieldAccess (Var "Decode") "string"))) (App (App (FieldAccess (Var "Decode") "index") (IntLit 2)) (FieldAccess (Var "Decode") "int"))),DeclTypeSig "gtQuery" (QualType {qualConstraints = [], qualType = TypeApp (TypeCon "Query") (TypeCon "Product")}),DeclValue "gtQuery" [] (App (App (FieldAccess (Var "Query") "where_") (App (App (FieldAccess (Var "Query") "gt") (Var "products_price")) (App (FieldAccess (Var "Database") "int") (IntLit 100)))) (App (App (FieldAccess (Var "Query") "select") (Var "products")) (Var "productDecoder"))),DeclTypeSig "ltQuery" (QualType {qualConstraints = [], qualType = TypeApp (TypeCon "Query") (TypeCon "Product")}),DeclValue "ltQuery" [] (App (App (FieldAccess (Var "Query") "where_") (App (App (FieldAccess (Var "Query") "lt") (Var "products_price")) (App (FieldAccess (Var "Database") "int") (IntLit 50)))) (App (App (FieldAccess (Var "Query") "select") (Var "products")) (Var "productDecoder"))),DeclTypeSig "rangeQuery" (QualType {qualConstraints = [], qualType = TypeApp (TypeCon "Query") (TypeCon "Product")}),DeclValue "rangeQuery" [] (App (App (FieldAccess (Var "Query") "where_") (App (App (FieldAccess (Var "Query") "lt") (Var "products_price")) (App (FieldAccess (Var "Database") "int") (IntLit 200)))) (App (App (FieldAccess (Var "Query") "where_") (App (App (FieldAccess (Var "Query") "gte") (Var "products_price")) (App (FieldAccess (Var "Database") "int") (IntLit 50)))) (App (App (FieldAccess (Var "Query") "select") (Var "products")) (Var "productDecoder")))),DeclTypeSig "likeQuery" (QualType {qualConstraints = [], qualType = TypeApp (TypeCon "Query") (TypeCon "Product")}),DeclValue "likeQuery" [] (App (App (FieldAccess (Var "Query") "where_") (App (App (FieldAccess (Var "Query") "like") (Var "products_name")) (App (FieldAccess (Var "Database") "string") (StringLit "%Widget%")))) (App (App (FieldAccess (Var "Query") "select") (Var "products")) (Var "productDecoder"))),DeclTypeSig "nullQuery" (QualType {qualConstraints = [], qualType = TypeApp (TypeCon "Query") (TypeCon "Product")}),DeclValue "nullQuery" [] (App (App (FieldAccess (Var "Query") "where_") (App (FieldAccess (Var "Query") "isNull") (Var "products_category"))) (App (App (FieldAccess (Var "Query") "select") (Var "products")) (Var "productDecoder"))),DeclTypeSig "inQuery" (QualType {qualConstraints = [], qualType = TypeApp (TypeCon "Query") (TypeCon "Product")}),DeclValue "inQuery" [] (App (App (FieldAccess (Var "Query") "where_") (App (App (FieldAccess (Var "Query") "in_") (Var "products_id")) (App (App (Var "Cons") (App (FieldAccess (Var "Database") "int") (IntLit 1))) (App (App (Var "Cons") (App (FieldAccess (Var "Database") "int") (IntLit 2))) (App (App (Var "Cons") (App (FieldAccess (Var "Database") "int") (IntLit 3))) (Var "Nil")))))) (App (App (FieldAccess (Var "Query") "select") (Var "products")) (Var "productDecoder"))),DeclTypeSig "paginationQuery" (QualType {qualConstraints = [], qualType = TypeApp (TypeCon "Query") (TypeCon "Product")}),DeclValue "paginationQuery" [] (App (App (FieldAccess (Var "Query") "offset") (IntLit 20)) (App (App (FieldAccess (Var "Query") "limit") (IntLit 10)) (App (App (App (FieldAccess (Var "Query") "orderBy") (Var "products_id")) (Var "Asc")) (App (App (FieldAccess (Var "Query") "select") (Var "products")) (Var "productDecoder"))))),DeclTypeSig "main" (QualType {qualConstraints = [], qualType = TypeApp (TypeCon "IO") (TypeCon "Unit")}),DeclValue "main" [] (DoBlock [ExprStmt (App (FieldAccess (Var "IO") "println") (StringLit "=== Query Helpers Examples ===")),ExprStmt (App (FieldAccess (Var "IO") "println") (StringLit "")),ExprStmt (Var "gtExample"),ExprStmt (App (FieldAccess (Var "IO") "println") (StringLit "")),ExprStmt (Var "ltExample"),ExprStmt (App (FieldAccess (Var "IO") "println") (StringLit "")),ExprStmt (Var "rangeExample"),ExprStmt (App (FieldAccess (Var "IO") "println") (StringLit "")),ExprStmt (Var "likeExample"),ExprStmt (App (FieldAccess (Var "IO") "println") (StringLit "")),ExprStmt (Var "nullExample"),ExprStmt (App (FieldAccess (Var "IO") "println") (StringLit "")),ExprStmt (Var "inExample"),ExprStmt (App (FieldAccess (Var "IO") "println") (StringLit "")),ExprStmt (Var "paginationExample"),ExprStmt (App (FieldAccess (Var "IO") "println") (StringLit "")),ExprStmt (App (FieldAccess (Var "IO") "println") (StringLit "Done!"))]),DeclTypeSig "gtExample" (QualType {qualConstraints = [], qualType = TypeApp (TypeCon "IO") (TypeCon "Unit")}),DeclValue "gtExample" [] (DoBlock [ExprStmt (App (FieldAccess (Var "IO") "println") (StringLit "1. Greater than:")),ExprStmt (App (FieldAccess (Var "IO") "println") (StringLit "   Query.where_ (Query.gt products_price 100)")),ExprStmt (App (Var "printSql") (Var "gtQuery"))]),DeclTypeSig "ltExample" (QualType {qualConstraints = [], qualType = TypeApp (TypeCon "IO") (TypeCon "Unit")}),DeclValue "ltExample" [] (DoBlock [ExprStmt (App (FieldAccess (Var "IO") "println") (StringLit "2. Less than:")),ExprStmt (App (FieldAccess (Var "IO") "println") (StringLit "   Query.where_ (Query.lt products_price 50)")),ExprStmt (App (Var "printSql") (Var "ltQuery"))]),DeclTypeSig "rangeExample" (QualType {qualConstraints = [], qualType = TypeApp (TypeCon "IO") (TypeCon "Unit")}),DeclValue "rangeExample" [] (DoBlock [ExprStmt (App (FieldAccess (Var "IO") "println") (StringLit "3. Range (50 <= price < 200):")),ExprStmt (App (FieldAccess (Var "IO") "println") (StringLit "   Query.where_ (Query.gte products_price 50)")),ExprStmt (App (FieldAccess (Var "IO") "println") (StringLit "   Query.where_ (Query.lt products_price 200)")),ExprStmt (App (Var "printSql") (Var "rangeQuery"))]),DeclTypeSig "likeExample" (QualType {qualConstraints = [], qualType = TypeApp (TypeCon "IO") (TypeCon "Unit")}),DeclValue "likeExample" [] (DoBlock [ExprStmt (App (FieldAccess (Var "IO") "println") (StringLit "4. LIKE pattern:")),ExprStmt (App (FieldAccess (Var "IO") "println") (StringLit "   Query.where_ (Query.like products_name \"%Widget%\")")),ExprStmt (App (Var "printSql") (Var "likeQuery"))]),DeclTypeSig "nullExample" (QualType {qualConstraints = [], qualType = TypeApp (TypeCon "IO") (TypeCon "Unit")}),DeclValue "nullExample" [] (DoBlock [ExprStmt (App (FieldAccess (Var "IO") "println") (StringLit "5. IS NULL:")),ExprStmt (App (FieldAccess (Var "IO") "println") (StringLit "   Query.where_ (Query.isNull products_category)")),ExprStmt (App (Var "printSql") (Var "nullQuery"))]),DeclTypeSig "inExample" (QualType {qualConstraints = [], qualType = TypeApp (TypeCon "IO") (TypeCon "Unit")}),DeclValue "inExample" [] (DoBlock [ExprStmt (App (FieldAccess (Var "IO") "println") (StringLit "6. IN list:")),ExprStmt (App (FieldAccess (Var "IO") "println") (StringLit "   Query.where_ (Query.in_ products_id [1, 2, 3])")),ExprStmt (App (Var "printSql") (Var "inQuery"))]),DeclTypeSig "paginationExample" (QualType {qualConstraints = [], qualType = TypeApp (TypeCon "IO") (TypeCon "Unit")}),DeclValue "paginationExample" [] (DoBlock [ExprStmt (App (FieldAccess (Var "IO") "println") (StringLit "7. Pagination (page 3, 10 per page):")),ExprStmt (App (FieldAccess (Var "IO") "println") (StringLit "   Query.offset 20 (Query.limit 10 ...)")),ExprStmt (App (Var "printSql") (Var "paginationQuery"))]),DeclTypeSig "printSql" (QualType {qualConstraints = [], qualType = TypeArrow (TypeApp (TypeCon "Query") (TypeVar "a")) (TypeApp (TypeCon "IO") (TypeCon "Unit"))}),DeclValue "printSql" [PVar "q"] (App (FieldAccess (Var "IO") "println") (App (App (FieldAccess (Var "Str") "append") (StringLit "   SQL: ")) (App (FieldAccess (Var "Query") "getSql") (Var "q"))))]}
