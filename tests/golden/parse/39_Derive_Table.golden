Module {modName = "DeriveTable", modExports = [ExposeValue "demo",ExposeValue "demo2",ExposeValue "demo3"], modImports = [Import {impName = "Lune.Prelude", impAs = Nothing, impExposing = Just [ExposeType "Bool" ExposeOpaque,ExposeType "Int" ExposeOpaque,ExposeType "String" ExposeOpaque,ExposeType "Maybe" ExposeAll,ExposeType "List" ExposeAll]},Import {impName = "Lune.Database.Query", impAs = Nothing, impExposing = Just [ExposeValue "getSql",ExposeValue "getParams",ExposeValue "eq",ExposeValue "where_"]},Import {impName = "Lune.Database", impAs = Nothing, impExposing = Just [ExposeType "DbValue" ExposeAll]},Import {impName = "Lune.Database.Decode", impAs = Nothing, impExposing = Just [ExposeValue "timestamp"]},Import {impName = "Lune.Time", impAs = Nothing, impExposing = Just [ExposeType "Timestamp" ExposeAll]}], modDecls = [DeclTypeAlias [Annotation {annName = "derive", annArgs = Just (App (Located {locSpan = Span {spanStartLine = 0, spanStartCol = 0, spanEndLine = 0, spanEndCol = 0}, locComments = Comments {commentsLeading = [], commentsTrailing = [], commentsInner = []}, locValue = Var "Table"}) (Located {locSpan = Span {spanStartLine = 0, spanStartCol = 0, spanEndLine = 0, spanEndCol = 0}, locComments = Comments {commentsLeading = [], commentsTrailing = [], commentsInner = []}, locValue = StringLit "users"}))}] "User" [] (TypeRecord [("id",TypeCon "Int",[Annotation {annName = "primaryKey", annArgs = Nothing},Annotation {annName = "serial", annArgs = Nothing}]),("name",TypeCon "String",[]),("email",TypeApp (TypeCon "Maybe") (TypeCon "String"),[]),("createdAt",TypeCon "Timestamp",[Annotation {annName = "serial", annArgs = Nothing}])]),DeclTypeAlias [Annotation {annName = "derive", annArgs = Just (App (Located {locSpan = Span {spanStartLine = 0, spanStartCol = 0, spanEndLine = 0, spanEndCol = 0}, locComments = Comments {commentsLeading = [], commentsTrailing = [], commentsInner = []}, locValue = Var "Table"}) (Located {locSpan = Span {spanStartLine = 0, spanStartCol = 0, spanEndLine = 0, spanEndCol = 0}, locComments = Comments {commentsLeading = [], commentsTrailing = [], commentsInner = []}, locValue = StringLit "posts"}))}] "Post" [] (TypeRecord [("id",TypeCon "Int",[Annotation {annName = "primaryKey", annArgs = Nothing},Annotation {annName = "serial", annArgs = Nothing}]),("title",TypeCon "String",[]),("authorId",TypeCon "Int",[]),("createdAt",TypeCon "Timestamp",[Annotation {annName = "serial", annArgs = Nothing}]),("updatedAt",TypeCon "Timestamp",[])]),DeclTypeAlias [Annotation {annName = "derive", annArgs = Just (App (Located {locSpan = Span {spanStartLine = 0, spanStartCol = 0, spanEndLine = 0, spanEndCol = 0}, locComments = Comments {commentsLeading = [], commentsTrailing = [], commentsInner = []}, locValue = Var "Table"}) (Located {locSpan = Span {spanStartLine = 0, spanStartCol = 0, spanEndLine = 0, spanEndCol = 0}, locComments = Comments {commentsLeading = [], commentsTrailing = [], commentsInner = []}, locValue = StringLit "products"}))}] "Product" [] (TypeRecord [("id",TypeCon "Int",[Annotation {annName = "primaryKey", annArgs = Nothing},Annotation {annName = "serial", annArgs = Nothing}]),("name",TypeCon "String",[]),("priceInCents",TypeCon "Int",[]),("createdAt",TypeCon "Timestamp",[Annotation {annName = "serial", annArgs = Nothing}]),("updatedAt",TypeCon "Timestamp",[])]),DeclTypeAlias [Annotation {annName = "derive", annArgs = Just (App (Located {locSpan = Span {spanStartLine = 0, spanStartCol = 0, spanEndLine = 0, spanEndCol = 0}, locComments = Comments {commentsLeading = [], commentsTrailing = [], commentsInner = []}, locValue = Var "Table"}) (Located {locSpan = Span {spanStartLine = 0, spanStartCol = 0, spanEndLine = 0, spanEndCol = 0}, locComments = Comments {commentsLeading = [], commentsTrailing = [], commentsInner = []}, locValue = StringLit "categories"}))}] "Category" [] (TypeRecord [("id",TypeCon "Int",[Annotation {annName = "primaryKey", annArgs = Nothing},Annotation {annName = "serial", annArgs = Nothing}]),("name",TypeCon "String",[]),("parentId",TypeApp (TypeCon "Maybe") (TypeCon "Int"),[])]),DeclTypeSig "demo" (QualType {qualConstraints = [], qualType = TypeCon "String"}),DeclValue "demo" [] (Located {locSpan = Span {spanStartLine = 72, spanStartCol = 15, spanEndLine = 72, spanEndCol = 27}, locComments = Comments {commentsLeading = [], commentsTrailing = [], commentsInner = []}, locValue = App (Located {locSpan = Span {spanStartLine = 72, spanStartCol = 8, spanEndLine = 72, spanEndCol = 15}, locComments = Comments {commentsLeading = [Comment {commentKind = DocComment, commentPosition = Leading, commentText = " Example demonstrating @derive(Table) for automatic CRUD generation.\n\nThis example shows how to use the derive macro to automatically generate:\n- Table and field references\n- Row decoder\n- CRUD helper functions (findById, findAll, insert, update, delete)\n", commentLine = 3, commentCol = 1, commentEndLine = 9, commentEndCol = 3},Comment {commentKind = LineComment, commentPosition = Leading, commentText = " =============================================================================", commentLine = 17, commentCol = 1, commentEndLine = 17, commentEndCol = 81},Comment {commentKind = LineComment, commentPosition = Leading, commentText = " User Table - Basic example with timestamps", commentLine = 18, commentCol = 1, commentEndLine = 18, commentEndCol = 46},Comment {commentKind = LineComment, commentPosition = Leading, commentText = " =============================================================================", commentLine = 19, commentCol = 1, commentEndLine = 19, commentEndCol = 81},Comment {commentKind = LineComment, commentPosition = Leading, commentText = " =============================================================================", commentLine = 29, commentCol = 1, commentEndLine = 29, commentEndCol = 81},Comment {commentKind = LineComment, commentPosition = Leading, commentText = " Post Table - Foreign key with timestamps", commentLine = 30, commentCol = 1, commentEndLine = 30, commentEndCol = 44},Comment {commentKind = LineComment, commentPosition = Leading, commentText = " =============================================================================", commentLine = 31, commentCol = 1, commentEndLine = 31, commentEndCol = 81},Comment {commentKind = LineComment, commentPosition = Leading, commentText = " =============================================================================", commentLine = 42, commentCol = 1, commentEndLine = 42, commentEndCol = 81},Comment {commentKind = LineComment, commentPosition = Leading, commentText = " Product Table - E-commerce example with timestamps", commentLine = 43, commentCol = 1, commentEndLine = 43, commentEndCol = 54},Comment {commentKind = LineComment, commentPosition = Leading, commentText = " =============================================================================", commentLine = 44, commentCol = 1, commentEndLine = 44, commentEndCol = 81},Comment {commentKind = LineComment, commentPosition = Leading, commentText = " =============================================================================", commentLine = 55, commentCol = 1, commentEndLine = 55, commentEndCol = 81},Comment {commentKind = LineComment, commentPosition = Leading, commentText = " Category Table - Simple lookup table", commentLine = 56, commentCol = 1, commentEndLine = 56, commentEndCol = 40},Comment {commentKind = LineComment, commentPosition = Leading, commentText = " =============================================================================", commentLine = 57, commentCol = 1, commentEndLine = 57, commentEndCol = 81},Comment {commentKind = LineComment, commentPosition = Leading, commentText = " =============================================================================", commentLine = 66, commentCol = 1, commentEndLine = 66, commentEndCol = 81},Comment {commentKind = LineComment, commentPosition = Leading, commentText = " Demo: Show generated SQL queries", commentLine = 67, commentCol = 1, commentEndLine = 67, commentEndCol = 36},Comment {commentKind = LineComment, commentPosition = Leading, commentText = " =============================================================================", commentLine = 68, commentCol = 1, commentEndLine = 68, commentEndCol = 81},Comment {commentKind = LineComment, commentPosition = Leading, commentText = " Basic SELECT query", commentLine = 70, commentCol = 1, commentEndLine = 70, commentEndCol = 22}], commentsTrailing = [], commentsInner = []}, locValue = Var "getSql"}) (Located {locSpan = Span {spanStartLine = 72, spanStartCol = 15, spanEndLine = 72, spanEndCol = 27}, locComments = Comments {commentsLeading = [], commentsTrailing = [], commentsInner = []}, locValue = Var "findAllUsers"})}),DeclTypeSig "demo2" (QualType {qualConstraints = [], qualType = TypeCon "String"}),DeclValue "demo2" [] (Located {locSpan = Span {spanStartLine = 76, spanStartCol = 76, spanEndLine = 76, spanEndCol = 88}, locComments = Comments {commentsLeading = [], commentsTrailing = [], commentsInner = []}, locValue = App (Located {locSpan = Span {spanStartLine = 76, spanStartCol = 9, spanEndLine = 76, spanEndCol = 16}, locComments = Comments {commentsLeading = [Comment {commentKind = LineComment, commentPosition = Leading, commentText = " SELECT with WHERE clause using field reference", commentLine = 74, commentCol = 1, commentEndLine = 74, commentEndCol = 50}], commentsTrailing = [], commentsInner = []}, locValue = Var "getSql"}) (Located {locSpan = Span {spanStartLine = 76, spanStartCol = 76, spanEndLine = 76, spanEndCol = 88}, locComments = Comments {commentsLeading = [], commentsTrailing = [], commentsInner = []}, locValue = App (Located {locSpan = Span {spanStartLine = 76, spanStartCol = 57, spanEndLine = 76, spanEndCol = 73}, locComments = Comments {commentsLeading = [], commentsTrailing = [], commentsInner = []}, locValue = App (Located {locSpan = Span {spanStartLine = 76, spanStartCol = 17, spanEndLine = 76, spanEndCol = 24}, locComments = Comments {commentsLeading = [], commentsTrailing = [], commentsInner = []}, locValue = Var "where_"}) (Located {locSpan = Span {spanStartLine = 76, spanStartCol = 57, spanEndLine = 76, spanEndCol = 73}, locComments = Comments {commentsLeading = [], commentsTrailing = [], commentsInner = []}, locValue = App (Located {locSpan = Span {spanStartLine = 76, spanStartCol = 28, spanEndLine = 76, spanEndCol = 44}, locComments = Comments {commentsLeading = [], commentsTrailing = [], commentsInner = []}, locValue = App (Located {locSpan = Span {spanStartLine = 76, spanStartCol = 25, spanEndLine = 76, spanEndCol = 28}, locComments = Comments {commentsLeading = [], commentsTrailing = [], commentsInner = []}, locValue = Var "eq"}) (Located {locSpan = Span {spanStartLine = 76, spanStartCol = 28, spanEndLine = 76, spanEndCol = 44}, locComments = Comments {commentsLeading = [], commentsTrailing = [], commentsInner = []}, locValue = Var "users_createdAt"})}) (Located {locSpan = Span {spanStartLine = 76, spanStartCol = 57, spanEndLine = 76, spanEndCol = 73}, locComments = Comments {commentsLeading = [], commentsTrailing = [], commentsInner = []}, locValue = App (Located {locSpan = Span {spanStartLine = 76, spanStartCol = 45, spanEndLine = 76, spanEndCol = 57}, locComments = Comments {commentsLeading = [], commentsTrailing = [], commentsInner = []}, locValue = Var "DbTimestamp"}) (Located {locSpan = Span {spanStartLine = 76, spanStartCol = 57, spanEndLine = 76, spanEndCol = 73}, locComments = Comments {commentsLeading = [], commentsTrailing = [], commentsInner = []}, locValue = IntLit 1700000000000000})})})}) (Located {locSpan = Span {spanStartLine = 76, spanStartCol = 76, spanEndLine = 76, spanEndCol = 88}, locComments = Comments {commentsLeading = [], commentsTrailing = [], commentsInner = []}, locValue = Var "findAllUsers"})})}),DeclTypeSig "demo3" (QualType {qualConstraints = [], qualType = TypeCon "String"}),DeclValue "demo3" [] (Located {locSpan = Span {spanStartLine = 80, spanStartCol = 28, spanEndLine = 80, spanEndCol = 80}, locComments = Comments {commentsLeading = [], commentsTrailing = [], commentsInner = []}, locValue = App (Located {locSpan = Span {spanStartLine = 80, spanStartCol = 9, spanEndLine = 80, spanEndCol = 16}, locComments = Comments {commentsLeading = [Comment {commentKind = LineComment, commentPosition = Leading, commentText = " INSERT query (note: serial fields like id and createdAt are omitted)", commentLine = 78, commentCol = 1, commentEndLine = 78, commentEndCol = 72}], commentsTrailing = [], commentsInner = []}, locValue = Var "getSql"}) (Located {locSpan = Span {spanStartLine = 80, spanStartCol = 28, spanEndLine = 80, spanEndCol = 80}, locComments = Comments {commentsLeading = [], commentsTrailing = [], commentsInner = []}, locValue = App (Located {locSpan = Span {spanStartLine = 80, spanStartCol = 17, spanEndLine = 80, spanEndCol = 28}, locComments = Comments {commentsLeading = [], commentsTrailing = [], commentsInner = []}, locValue = Var "insertUser"}) (Located {locSpan = Span {spanStartLine = 80, spanStartCol = 28, spanEndLine = 80, spanEndCol = 80}, locComments = Comments {commentsLeading = [], commentsTrailing = [], commentsInner = []}, locValue = RecordLiteral [("name",Located {locSpan = Span {spanStartLine = 80, spanStartCol = 37, spanEndLine = 80, spanEndCol = 44}, locComments = Comments {commentsLeading = [], commentsTrailing = [], commentsInner = []}, locValue = StringLit "Alice"}),("email",Located {locSpan = Span {spanStartLine = 80, spanStartCol = 59, spanEndLine = 80, spanEndCol = 79}, locComments = Comments {commentsLeading = [], commentsTrailing = [], commentsInner = []}, locValue = App (Located {locSpan = Span {spanStartLine = 80, spanStartCol = 54, spanEndLine = 80, spanEndCol = 59}, locComments = Comments {commentsLeading = [], commentsTrailing = [], commentsInner = []}, locValue = Var "Just"}) (Located {locSpan = Span {spanStartLine = 80, spanStartCol = 59, spanEndLine = 80, spanEndCol = 79}, locComments = Comments {commentsLeading = [], commentsTrailing = [], commentsInner = []}, locValue = StringLit "alice@example.com"})})]})})})]}
