Module {modName = "SqlitePoolExample", modExports = [ExposeValue "main"], modImports = [Import {impName = "Lune.IO", impAs = Just "IO", impExposing = Nothing},Import {impName = "Lune.Prelude", impAs = Nothing, impExposing = Just [ExposeType "IO" ExposeOpaque,ExposeType "Result" ExposeAll,ExposeType "Unit" ExposeOpaque,ExposeType "String" ExposeOpaque]}], modDecls = [DeclTypeAlias "SqliteConn" [] (TypeRecord [("filepath",TypeCon "String")]),DeclTypeAlias "SqliteError" [] (TypeRecord [("message",TypeCon "String")]),DeclTypeSig "sqliteOpen" (QualType {qualConstraints = [], qualType = TypeArrow (TypeCon "String") (TypeApp (TypeCon "IO") (TypeApp (TypeApp (TypeCon "Result") (TypeCon "SqliteError")) (TypeCon "SqliteConn")))}),DeclValue "sqliteOpen" [PVar "path"] (App (Var "prim_sqliteOpen") (Var "path")),DeclTypeSig "sqliteClose" (QualType {qualConstraints = [], qualType = TypeArrow (TypeCon "SqliteConn") (TypeApp (TypeCon "IO") (TypeApp (TypeApp (TypeCon "Result") (TypeCon "SqliteError")) (TypeCon "Unit")))}),DeclValue "sqliteClose" [PVar "conn"] (App (Var "prim_sqliteClose") (Var "conn")),DeclTypeSig "main" (QualType {qualConstraints = [], qualType = TypeApp (TypeCon "IO") (TypeCon "Unit")}),DeclValue "main" [] (DoBlock [ExprStmt (App (FieldAccess (Var "IO") "println") (StringLit "=== Hypothetical SQLite Pool Example ===")),ExprStmt (App (FieldAccess (Var "IO") "println") (StringLit "")),ExprStmt (App (FieldAccess (Var "IO") "println") (StringLit "This example shows how the generic pool enables easy")),ExprStmt (App (FieldAccess (Var "IO") "println") (StringLit "database backend support without code duplication.")),ExprStmt (App (FieldAccess (Var "IO") "println") (StringLit "")),ExprStmt (App (FieldAccess (Var "IO") "println") (StringLit "The SAME pool logic works for:")),ExprStmt (App (FieldAccess (Var "IO") "println") (StringLit "  - PostgreSQL (already implemented)")),ExprStmt (App (FieldAccess (Var "IO") "println") (StringLit "  - SQLite (just add connection ops)")),ExprStmt (App (FieldAccess (Var "IO") "println") (StringLit "  - MySQL (just add connection ops)")),ExprStmt (App (FieldAccess (Var "IO") "println") (StringLit "  - Redis (just add connection ops)")),ExprStmt (App (FieldAccess (Var "IO") "println") (StringLit "  - Any other database!")),ExprStmt (App (FieldAccess (Var "IO") "println") (StringLit "")),ExprStmt (App (FieldAccess (Var "IO") "println") (StringLit "Each database keeps its own error types:")),ExprStmt (App (FieldAccess (Var "IO") "println") (StringLit "  - PostgreSQL: Result PgError a")),ExprStmt (App (FieldAccess (Var "IO") "println") (StringLit "  - SQLite:     Result SqliteError a")),ExprStmt (App (FieldAccess (Var "IO") "println") (StringLit "  - MySQL:      Result MySqlError a")),ExprStmt (App (FieldAccess (Var "IO") "println") (StringLit "")),ExprStmt (App (FieldAccess (Var "IO") "println") (StringLit "No type class complexity needed - just records of functions!"))])]}
