Module {modName = "AtomicBasic", modExports = [ExposeValue "main"], modImports = [Import {impName = "Lune.IO", impAs = Just "IO", impExposing = Nothing},Import {impName = "Lune.Atomic", impAs = Just "Atomic", impExposing = Nothing},Import {impName = "Lune.String", impAs = Just "Str", impExposing = Nothing},Import {impName = "Lune.Int", impAs = Just "Int", impExposing = Nothing}], modDecls = [DeclTypeSig "main" (QualType {qualConstraints = [], qualType = TypeApp (TypeApp (TypeCon "Task") (TypeCon "Unit")) (TypeCon "Unit")}),DeclValue "main" [] (DoBlock [BindStmt (PVar "counter") (App (FieldAccess (Var "Atomic") "commit") (App (FieldAccess (Var "Atomic") "new") (IntLit 0))),DiscardBindStmt (App (FieldAccess (Var "Atomic") "commit") (DoBlock [BindStmt (PVar "n") (App (FieldAccess (Var "Atomic") "read") (Var "counter")),ExprStmt (App (App (FieldAccess (Var "Atomic") "write") (Var "counter")) (App (App (FieldAccess (Var "Int") "add") (Var "n")) (IntLit 1)))])),BindStmt (PVar "result") (App (FieldAccess (Var "Atomic") "commit") (App (FieldAccess (Var "Atomic") "read") (Var "counter"))),ExprStmt (App (FieldAccess (Var "IO") "println") (App (App (FieldAccess (Var "Str") "append") (StringLit "Counter: ")) (App (FieldAccess (Var "Str") "fromInt") (Var "result"))))])]}
