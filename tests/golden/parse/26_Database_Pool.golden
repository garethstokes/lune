Module {modName = "DatabasePool", modExports = [ExposeValue "main"], modImports = [Import {impName = "Lune.IO", impAs = Just "IO", impExposing = Nothing},Import {impName = "Lune.Prelude", impAs = Nothing, impExposing = Just [ExposeType "IO" ExposeOpaque,ExposeType "Result" ExposeAll,ExposeType "Unit" ExposeOpaque,ExposeType "List" ExposeAll,ExposeType "Maybe" ExposeAll,ExposeType "Int" ExposeOpaque,ExposeType "String" ExposeOpaque,ExposeType "Bool" ExposeAll]},Import {impName = "Lune.Database", impAs = Just "Database", impExposing = Just [ExposeType "DbConn" ExposeOpaque,ExposeType "DbPool" ExposeOpaque,ExposeType "DbError" ExposeAll,ExposeType "DbValue" ExposeAll]},Import {impName = "Lune.Database.Postgres", impAs = Just "Postgres", impExposing = Nothing},Import {impName = "Lune.String", impAs = Just "Str", impExposing = Nothing}], modDecls = [DeclTypeSig "main" (QualType {qualConstraints = [], qualType = TypeApp (TypeCon "IO") (TypeCon "Unit")}),DeclValue "main" [] (DoBlock [ExprStmt (App (FieldAccess (Var "IO") "println") (StringLit "=== Connection Pool Examples ===")),ExprStmt (App (FieldAccess (Var "IO") "println") (StringLit "")),ExprStmt (App (FieldAccess (Var "IO") "println") (StringLit "Connection pooling provides efficient connection reuse.")),ExprStmt (App (FieldAccess (Var "IO") "println") (StringLit "")),ExprStmt (App (FieldAccess (Var "IO") "println") (StringLit "1. Create a pool:")),ExprStmt (App (FieldAccess (Var "IO") "println") (StringLit "   pool <- Postgres.createPool connString maxConns idleTimeout")),ExprStmt (App (FieldAccess (Var "IO") "println") (StringLit "")),ExprStmt (App (FieldAccess (Var "IO") "println") (StringLit "   Parameters:")),ExprStmt (App (FieldAccess (Var "IO") "println") (StringLit "   - connString: PostgreSQL connection string")),ExprStmt (App (FieldAccess (Var "IO") "println") (StringLit "   - maxConns: Maximum number of connections")),ExprStmt (App (FieldAccess (Var "IO") "println") (StringLit "   - idleTimeout: Seconds before idle connections are closed")),ExprStmt (App (FieldAccess (Var "IO") "println") (StringLit "")),ExprStmt (App (FieldAccess (Var "IO") "println") (StringLit "2. Example:")),ExprStmt (App (FieldAccess (Var "IO") "println") (StringLit "   poolResult <- Postgres.createPool")),ExprStmt (App (FieldAccess (Var "IO") "println") (StringLit "     \"postgresql://localhost/mydb\"")),ExprStmt (App (FieldAccess (Var "IO") "println") (StringLit "     10    -- max 10 connections")),ExprStmt (App (FieldAccess (Var "IO") "println") (StringLit "     300   -- 5 minute idle timeout")),ExprStmt (App (FieldAccess (Var "IO") "println") (StringLit "")),ExprStmt (App (FieldAccess (Var "IO") "println") (StringLit "3. Destroy pool when done:")),ExprStmt (App (FieldAccess (Var "IO") "println") (StringLit "   Postgres.destroyPool pool")),ExprStmt (App (FieldAccess (Var "IO") "println") (StringLit "")),ExprStmt (App (FieldAccess (Var "IO") "println") (StringLit "4. Type signatures:")),ExprStmt (App (FieldAccess (Var "IO") "println") (StringLit "   createPool : String -> Int -> Int -> IO (Result DbError DbPool)")),ExprStmt (App (FieldAccess (Var "IO") "println") (StringLit "   destroyPool : DbPool -> IO (Result DbError Unit)")),ExprStmt (App (FieldAccess (Var "IO") "println") (StringLit "")),ExprStmt (App (FieldAccess (Var "IO") "println") (StringLit "5. Usage pattern (until withConnection is available):")),ExprStmt (App (FieldAccess (Var "IO") "println") (StringLit "   -- Create pool at application startup")),ExprStmt (App (FieldAccess (Var "IO") "println") (StringLit "   poolResult <- Postgres.createPool connStr 10 300")),ExprStmt (App (FieldAccess (Var "IO") "println") (StringLit "   case poolResult of")),ExprStmt (App (FieldAccess (Var "IO") "println") (StringLit "     Err e -> handleError e")),ExprStmt (App (FieldAccess (Var "IO") "println") (StringLit "     Ok pool ->")),ExprStmt (App (FieldAccess (Var "IO") "println") (StringLit "       do")),ExprStmt (App (FieldAccess (Var "IO") "println") (StringLit "         -- Use individual connections for operations")),ExprStmt (App (FieldAccess (Var "IO") "println") (StringLit "         connResult <- Postgres.connect connStr")),ExprStmt (App (FieldAccess (Var "IO") "println") (StringLit "         -- ... run queries ...")),ExprStmt (App (FieldAccess (Var "IO") "println") (StringLit "         Postgres.close conn")),ExprStmt (App (FieldAccess (Var "IO") "println") (StringLit "         -- Destroy pool at shutdown")),ExprStmt (App (FieldAccess (Var "IO") "println") (StringLit "         Postgres.destroyPool pool")),ExprStmt (App (FieldAccess (Var "IO") "println") (StringLit "")),ExprStmt (App (FieldAccess (Var "IO") "println") (StringLit "Done!"))])]}
