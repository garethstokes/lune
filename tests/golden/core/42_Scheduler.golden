CoreModule {coreName = "Scheduler", coreDecls = [CoreDecl "$dictFunctor_IO" (CRecord [("map",CLam [PVar "f",PVar "ma"] (CApp (CApp (CVar "$primIOBind") (CVar "ma")) (CLam [PVar "a"] (CApp (CVar "$primIOPure") (CApp (CVar "f") (CVar "a"))))))]),CoreDecl "$dictApplicative_IO" (CRecord [("$superFunctor",CVar "$dictFunctor_IO"),("pure",CVar "$primIOPure"),("apply",CLam [PVar "mf",PVar "ma"] (CApp (CApp (CVar "$primIOBind") (CVar "mf")) (CLam [PVar "f"] (CApp (CApp (CVar "$primIOBind") (CVar "ma")) (CLam [PVar "a"] (CApp (CVar "$primIOPure") (CApp (CVar "f") (CVar "a"))))))))]),CoreDecl "$dictMonad_IO" (CRecord [("$superApplicative",CVar "$dictApplicative_IO"),("andThen",CVar "$primIOBind"),("then",CVar "$primIOThen")]),CoreDecl "$dictFunctor_Task" (CRecord [("map",CLam [PVar "f",PVar "ta"] (CCase (CVar "ta") [CoreAlt (PCon "Lune.Prelude.Task" [Located {locSpan = Span {spanStartLine = 0, spanStartCol = 0, spanEndLine = 0, spanEndCol = 0}, locComments = Comments {commentsLeading = [], commentsTrailing = [], commentsInner = []}, locValue = PVar "io"}]) (CApp (CVar "Lune.Prelude.Task") (CApp (CApp (CVar "$primIOBind") (CVar "io")) (CLam [PVar "r"] (CCase (CVar "r") [CoreAlt (PCon "Lune.Prelude.Err" [Located {locSpan = Span {spanStartLine = 0, spanStartCol = 0, spanEndLine = 0, spanEndCol = 0}, locComments = Comments {commentsLeading = [], commentsTrailing = [], commentsInner = []}, locValue = PVar "e"}]) (CApp (CVar "$primIOPure") (CApp (CVar "Lune.Prelude.Err") (CVar "e"))),CoreAlt (PCon "Lune.Prelude.Ok" [Located {locSpan = Span {spanStartLine = 0, spanStartCol = 0, spanEndLine = 0, spanEndCol = 0}, locComments = Comments {commentsLeading = [], commentsTrailing = [], commentsInner = []}, locValue = PVar "a"}]) (CApp (CVar "$primIOPure") (CApp (CVar "Lune.Prelude.Ok") (CApp (CVar "f") (CVar "a"))))]))))]))]),CoreDecl "$dictApplicative_Task" (CRecord [("$superFunctor",CVar "$dictFunctor_Task"),("pure",CLam [PVar "a"] (CApp (CVar "Lune.Prelude.Task") (CApp (CVar "$primIOPure") (CApp (CVar "Lune.Prelude.Ok") (CVar "a"))))),("apply",CLam [PVar "tf",PVar "ta"] (CCase (CVar "tf") [CoreAlt (PCon "Lune.Prelude.Task" [Located {locSpan = Span {spanStartLine = 0, spanStartCol = 0, spanEndLine = 0, spanEndCol = 0}, locComments = Comments {commentsLeading = [], commentsTrailing = [], commentsInner = []}, locValue = PVar "ioF"}]) (CCase (CVar "ta") [CoreAlt (PCon "Lune.Prelude.Task" [Located {locSpan = Span {spanStartLine = 0, spanStartCol = 0, spanEndLine = 0, spanEndCol = 0}, locComments = Comments {commentsLeading = [], commentsTrailing = [], commentsInner = []}, locValue = PVar "ioA"}]) (CApp (CVar "Lune.Prelude.Task") (CApp (CApp (CVar "$primIOBind") (CVar "ioF")) (CLam [PVar "rf"] (CCase (CVar "rf") [CoreAlt (PCon "Lune.Prelude.Err" [Located {locSpan = Span {spanStartLine = 0, spanStartCol = 0, spanEndLine = 0, spanEndCol = 0}, locComments = Comments {commentsLeading = [], commentsTrailing = [], commentsInner = []}, locValue = PVar "e"}]) (CApp (CVar "$primIOPure") (CApp (CVar "Lune.Prelude.Err") (CVar "e"))),CoreAlt (PCon "Lune.Prelude.Ok" [Located {locSpan = Span {spanStartLine = 0, spanStartCol = 0, spanEndLine = 0, spanEndCol = 0}, locComments = Comments {commentsLeading = [], commentsTrailing = [], commentsInner = []}, locValue = PVar "f"}]) (CApp (CApp (CVar "$primIOBind") (CVar "ioA")) (CLam [PVar "ra"] (CCase (CVar "ra") [CoreAlt (PCon "Lune.Prelude.Err" [Located {locSpan = Span {spanStartLine = 0, spanStartCol = 0, spanEndLine = 0, spanEndCol = 0}, locComments = Comments {commentsLeading = [], commentsTrailing = [], commentsInner = []}, locValue = PVar "e"}]) (CApp (CVar "$primIOPure") (CApp (CVar "Lune.Prelude.Err") (CVar "e"))),CoreAlt (PCon "Lune.Prelude.Ok" [Located {locSpan = Span {spanStartLine = 0, spanStartCol = 0, spanEndLine = 0, spanEndCol = 0}, locComments = Comments {commentsLeading = [], commentsTrailing = [], commentsInner = []}, locValue = PVar "a"}]) (CApp (CVar "$primIOPure") (CApp (CVar "Lune.Prelude.Ok") (CApp (CVar "f") (CVar "a"))))])))]))))])]))]),CoreDecl "$dictMonad_Task" (CRecord [("$superApplicative",CVar "$dictApplicative_Task"),("andThen",CLam [PVar "ta",PVar "k"] (CCase (CVar "ta") [CoreAlt (PCon "Lune.Prelude.Task" [Located {locSpan = Span {spanStartLine = 0, spanStartCol = 0, spanEndLine = 0, spanEndCol = 0}, locComments = Comments {commentsLeading = [], commentsTrailing = [], commentsInner = []}, locValue = PVar "io"}]) (CApp (CVar "Lune.Prelude.Task") (CApp (CApp (CVar "$primIOBind") (CVar "io")) (CLam [PVar "r"] (CCase (CVar "r") [CoreAlt (PCon "Lune.Prelude.Err" [Located {locSpan = Span {spanStartLine = 0, spanStartCol = 0, spanEndLine = 0, spanEndCol = 0}, locComments = Comments {commentsLeading = [], commentsTrailing = [], commentsInner = []}, locValue = PVar "e"}]) (CApp (CVar "$primIOPure") (CApp (CVar "Lune.Prelude.Err") (CVar "e"))),CoreAlt (PCon "Lune.Prelude.Ok" [Located {locSpan = Span {spanStartLine = 0, spanStartCol = 0, spanEndLine = 0, spanEndCol = 0}, locComments = Comments {commentsLeading = [], commentsTrailing = [], commentsInner = []}, locValue = PVar "a"}]) (CCase (CApp (CVar "k") (CVar "a")) [CoreAlt (PCon "Lune.Prelude.Task" [Located {locSpan = Span {spanStartLine = 0, spanStartCol = 0, spanEndLine = 0, spanEndCol = 0}, locComments = Comments {commentsLeading = [], commentsTrailing = [], commentsInner = []}, locValue = PVar "io2"}]) (CVar "io2")])]))))])),("then",CLam [PVar "ta",PVar "tb"] (CCase (CVar "ta") [CoreAlt (PCon "Lune.Prelude.Task" [Located {locSpan = Span {spanStartLine = 0, spanStartCol = 0, spanEndLine = 0, spanEndCol = 0}, locComments = Comments {commentsLeading = [], commentsTrailing = [], commentsInner = []}, locValue = PVar "ioA"}]) (CApp (CVar "Lune.Prelude.Task") (CApp (CApp (CVar "$primIOBind") (CVar "ioA")) (CLam [PVar "r"] (CCase (CVar "r") [CoreAlt (PCon "Lune.Prelude.Err" [Located {locSpan = Span {spanStartLine = 0, spanStartCol = 0, spanEndLine = 0, spanEndCol = 0}, locComments = Comments {commentsLeading = [], commentsTrailing = [], commentsInner = []}, locValue = PVar "e"}]) (CApp (CVar "$primIOPure") (CApp (CVar "Lune.Prelude.Err") (CVar "e"))),CoreAlt (PCon "Lune.Prelude.Ok" [Located {locSpan = Span {spanStartLine = 0, spanStartCol = 0, spanEndLine = 0, spanEndCol = 0}, locComments = Comments {commentsLeading = [], commentsTrailing = [], commentsInner = []}, locValue = PWildcard}]) (CCase (CVar "tb") [CoreAlt (PCon "Lune.Prelude.Task" [Located {locSpan = Span {spanStartLine = 0, spanStartCol = 0, spanEndLine = 0, spanEndCol = 0}, locComments = Comments {commentsLeading = [], commentsTrailing = [], commentsInner = []}, locValue = PVar "ioB"}]) (CVar "ioB")])]))))]))]),CoreDecl "$dictFunctor_Result" (CRecord [("map",CLam [PVar "f",PVar "r"] (CCase (CVar "r") [CoreAlt (PCon "Lune.Prelude.Err" [Located {locSpan = Span {spanStartLine = 0, spanStartCol = 0, spanEndLine = 0, spanEndCol = 0}, locComments = Comments {commentsLeading = [], commentsTrailing = [], commentsInner = []}, locValue = PVar "e"}]) (CApp (CVar "Lune.Prelude.Err") (CVar "e")),CoreAlt (PCon "Lune.Prelude.Ok" [Located {locSpan = Span {spanStartLine = 0, spanStartCol = 0, spanEndLine = 0, spanEndCol = 0}, locComments = Comments {commentsLeading = [], commentsTrailing = [], commentsInner = []}, locValue = PVar "a"}]) (CApp (CVar "Lune.Prelude.Ok") (CApp (CVar "f") (CVar "a")))]))]),CoreDecl "$dictApplicative_Result" (CRecord [("$superFunctor",CVar "$dictFunctor_Result"),("pure",CLam [PVar "a"] (CApp (CVar "Lune.Prelude.Ok") (CVar "a"))),("apply",CLam [PVar "rf",PVar "ra"] (CCase (CVar "rf") [CoreAlt (PCon "Lune.Prelude.Err" [Located {locSpan = Span {spanStartLine = 0, spanStartCol = 0, spanEndLine = 0, spanEndCol = 0}, locComments = Comments {commentsLeading = [], commentsTrailing = [], commentsInner = []}, locValue = PVar "e"}]) (CApp (CVar "Lune.Prelude.Err") (CVar "e")),CoreAlt (PCon "Lune.Prelude.Ok" [Located {locSpan = Span {spanStartLine = 0, spanStartCol = 0, spanEndLine = 0, spanEndCol = 0}, locComments = Comments {commentsLeading = [], commentsTrailing = [], commentsInner = []}, locValue = PVar "f"}]) (CCase (CVar "ra") [CoreAlt (PCon "Lune.Prelude.Err" [Located {locSpan = Span {spanStartLine = 0, spanStartCol = 0, spanEndLine = 0, spanEndCol = 0}, locComments = Comments {commentsLeading = [], commentsTrailing = [], commentsInner = []}, locValue = PVar "e"}]) (CApp (CVar "Lune.Prelude.Err") (CVar "e")),CoreAlt (PCon "Lune.Prelude.Ok" [Located {locSpan = Span {spanStartLine = 0, spanStartCol = 0, spanEndLine = 0, spanEndCol = 0}, locComments = Comments {commentsLeading = [], commentsTrailing = [], commentsInner = []}, locValue = PVar "a"}]) (CApp (CVar "Lune.Prelude.Ok") (CApp (CVar "f") (CVar "a")))])]))]),CoreDecl "$dictMonad_Result" (CRecord [("$superApplicative",CVar "$dictApplicative_Result"),("andThen",CLam [PVar "m",PVar "k"] (CCase (CVar "m") [CoreAlt (PCon "Lune.Prelude.Ok" [Located {locSpan = Span {spanStartLine = 0, spanStartCol = 0, spanEndLine = 0, spanEndCol = 0}, locComments = Comments {commentsLeading = [], commentsTrailing = [], commentsInner = []}, locValue = PVar "a"}]) (CApp (CVar "k") (CVar "a")),CoreAlt (PCon "Lune.Prelude.Err" [Located {locSpan = Span {spanStartLine = 0, spanStartCol = 0, spanEndLine = 0, spanEndCol = 0}, locComments = Comments {commentsLeading = [], commentsTrailing = [], commentsInner = []}, locValue = PVar "e"}]) (CApp (CVar "Lune.Prelude.Err") (CVar "e"))])),("then",CLam [PVar "ra",PVar "rb"] (CCase (CVar "ra") [CoreAlt (PCon "Lune.Prelude.Ok" [Located {locSpan = Span {spanStartLine = 0, spanStartCol = 0, spanEndLine = 0, spanEndCol = 0}, locComments = Comments {commentsLeading = [], commentsTrailing = [], commentsInner = []}, locValue = PWildcard}]) (CVar "rb"),CoreAlt (PCon "Lune.Prelude.Err" [Located {locSpan = Span {spanStartLine = 0, spanStartCol = 0, spanEndLine = 0, spanEndCol = 0}, locComments = Comments {commentsLeading = [], commentsTrailing = [], commentsInner = []}, locValue = PVar "e"}]) (CApp (CVar "Lune.Prelude.Err") (CVar "e"))]))]),CoreDecl "$dictFunctor_STM" (CRecord [("map",CLam [PVar "f",PVar "ma"] (CApp (CApp (CVar "$primSTMBind") (CVar "ma")) (CLam [PVar "a"] (CApp (CVar "$primSTMPure") (CApp (CVar "f") (CVar "a"))))))]),CoreDecl "$dictApplicative_STM" (CRecord [("$superFunctor",CVar "$dictFunctor_STM"),("pure",CVar "$primSTMPure"),("apply",CLam [PVar "mf",PVar "ma"] (CApp (CApp (CVar "$primSTMBind") (CVar "mf")) (CLam [PVar "f"] (CApp (CApp (CVar "$primSTMBind") (CVar "ma")) (CLam [PVar "a"] (CApp (CVar "$primSTMPure") (CApp (CVar "f") (CVar "a"))))))))]),CoreDecl "$dictMonad_STM" (CRecord [("$superApplicative",CVar "$dictApplicative_STM"),("andThen",CVar "$primSTMBind"),("then",CLam [PVar "ma",PVar "mb"] (CApp (CApp (CVar "$primSTMBind") (CVar "ma")) (CLam [PWildcard] (CVar "mb"))))]),CoreDecl "" (CInt 0),CoreDecl "" (CInt 0),CoreDecl "Lune.Prelude.unit" (CVar "Lune.Prelude.Unit"),CoreDecl "" (CInt 0),CoreDecl "" (CInt 0),CoreDecl "" (CInt 0),CoreDecl "" (CInt 0),CoreDecl "" (CInt 0),CoreDecl "" (CInt 0),CoreDecl "" (CInt 0),CoreDecl "" (CInt 0),CoreDecl "" (CInt 0),CoreDecl "" (CInt 0),CoreDecl "" (CInt 0),CoreDecl "" (CInt 0),CoreDecl "" (CInt 0),CoreDecl "Lune.Prelude.fst" (CLam [PVar "p"] (CCase (CVar "p") [CoreAlt (PCon "Lune.Prelude.Pair" [Located {locSpan = Span {spanStartLine = 76, spanStartCol = 10, spanEndLine = 76, spanEndCol = 12}, locComments = Comments {commentsLeading = [], commentsTrailing = [], commentsInner = []}, locValue = PVar "x"},Located {locSpan = Span {spanStartLine = 76, spanStartCol = 12, spanEndLine = 76, spanEndCol = 14}, locComments = Comments {commentsLeading = [], commentsTrailing = [], commentsInner = []}, locValue = PWildcard}]) (CVar "x")])),CoreDecl "" (CInt 0),CoreDecl "Lune.Prelude.snd" (CLam [PVar "p"] (CCase (CVar "p") [CoreAlt (PCon "Lune.Prelude.Pair" [Located {locSpan = Span {spanStartLine = 81, spanStartCol = 10, spanEndLine = 81, spanEndCol = 12}, locComments = Comments {commentsLeading = [], commentsTrailing = [], commentsInner = []}, locValue = PWildcard},Located {locSpan = Span {spanStartLine = 81, spanStartCol = 12, spanEndLine = 81, spanEndCol = 14}, locComments = Comments {commentsLeading = [], commentsTrailing = [], commentsInner = []}, locValue = PVar "y"}]) (CVar "y")])),CoreDecl "" (CInt 0),CoreDecl "" (CInt 0),CoreDecl "" (CInt 0),CoreDecl "" (CInt 0),CoreDecl "" (CInt 0),CoreDecl "" (CInt 0),CoreDecl "" (CInt 0),CoreDecl "" (CInt 0),CoreDecl "" (CInt 0),CoreDecl "" (CInt 0),CoreDecl "" (CInt 0),CoreDecl "" (CInt 0),CoreDecl "Lune.IO.pure" (CLam [PVar "a"] (CApp (CVar "prim_ioPure") (CVar "a"))),CoreDecl "" (CInt 0),CoreDecl "Lune.IO.andThen" (CLam [PVar "io",PVar "f"] (CApp (CApp (CVar "prim_ioBind") (CVar "io")) (CVar "f"))),CoreDecl "" (CInt 0),CoreDecl "Lune.IO.println" (CLam [PVar "s"] (CApp (CVar "Lune.Prelude.Task") (CApp (CApp (CVar "Lune.IO.andThen") (CApp (CVar "prim_putStrLn") (CVar "s"))) (CLam [PVar "u"] (CApp (CVar "Lune.IO.pure") (CApp (CVar "Lune.Prelude.Ok") (CVar "u"))))))),CoreDecl "" (CInt 0),CoreDecl "Lune.IO.readLine" (CApp (CVar "Lune.Prelude.Task") (CApp (CApp (CVar "Lune.IO.andThen") (CVar "prim_readLine")) (CLam [PVar "s"] (CApp (CVar "Lune.IO.pure") (CApp (CVar "Lune.Prelude.Ok") (CVar "s")))))),CoreDecl "" (CInt 0),CoreDecl "Lune.IO.readInt" (CApp (CVar "Lune.Prelude.Task") (CApp (CApp (CVar "Lune.IO.andThen") (CVar "prim_readInt")) (CLam [PVar "n"] (CApp (CVar "Lune.IO.pure") (CApp (CVar "Lune.Prelude.Ok") (CVar "n")))))),CoreDecl "" (CInt 0),CoreDecl "Lune.IO.sleepMs" (CLam [PVar "ms"] (CApp (CVar "Lune.Prelude.Task") (CApp (CApp (CVar "Lune.IO.andThen") (CApp (CVar "prim_sleepMs") (CVar "ms"))) (CLam [PVar "u"] (CApp (CVar "Lune.IO.pure") (CApp (CVar "Lune.Prelude.Ok") (CVar "u"))))))),CoreDecl "" (CInt 0),CoreDecl "Lune.IO.readFile" (CLam [PVar "path"] (CApp (CVar "Lune.Prelude.Task") (CApp (CVar "prim_readFile") (CVar "path")))),CoreDecl "" (CInt 0),CoreDecl "Lune.IO.writeFile" (CLam [PVar "path",PVar "contents"] (CApp (CVar "Lune.Prelude.Task") (CApp (CApp (CVar "prim_writeFile") (CVar "path")) (CVar "contents")))),CoreDecl "" (CInt 0),CoreDecl "" (CInt 0),CoreDecl "" (CInt 0),CoreDecl "" (CInt 0),CoreDecl "" (CInt 0),CoreDecl "Lune.Atomic.commit" (CLam [PVar "ma"] (CApp (CVar "Lune.Prelude.Task") (CApp (CApp (CVar "Lune.IO.andThen") (CApp (CVar "prim_atomically") (CVar "ma"))) (CLam [PVar "a"] (CApp (CVar "Lune.IO.pure") (CApp (CVar "Lune.Prelude.Ok") (CVar "a"))))))),CoreDecl "" (CInt 0),CoreDecl "Lune.Atomic.new" (CVar "prim_newTVar"),CoreDecl "" (CInt 0),CoreDecl "Lune.Atomic.read" (CVar "prim_readTVar"),CoreDecl "" (CInt 0),CoreDecl "Lune.Atomic.write" (CVar "prim_writeTVar"),CoreDecl "" (CInt 0),CoreDecl "Lune.Atomic.wait" (CVar "prim_retry"),CoreDecl "" (CInt 0),CoreDecl "Lune.Atomic.orElse" (CVar "prim_orElse"),CoreDecl "" (CInt 0),CoreDecl "" (CInt 0),CoreDecl "Lune.Fiber.spawn" (CLam [PVar "task"] (CCase (CVar "task") [CoreAlt (PCon "Lune.Prelude.Task" [Located {locSpan = Span {spanStartLine = 24, spanStartCol = 10, spanEndLine = 24, spanEndCol = 13}, locComments = Comments {commentsLeading = [], commentsTrailing = [], commentsInner = []}, locValue = PVar "io"}]) (CApp (CVar "Lune.Prelude.Task") (CApp (CApp (CVar "Lune.IO.andThen") (CApp (CVar "prim_spawn") (CVar "io"))) (CLam [PVar "fib"] (CApp (CVar "Lune.IO.pure") (CApp (CVar "Lune.Prelude.Ok") (CVar "fib"))))))])),CoreDecl "" (CInt 0),CoreDecl "Lune.Fiber.await" (CLam [PVar "fib"] (CApp (CVar "Lune.Prelude.Task") (CApp (CVar "prim_await") (CVar "fib")))),CoreDecl "" (CInt 0),CoreDecl "Lune.Fiber.awaitAny" (CLam [PVar "a",PVar "b"] (CApp (CVar "Lune.Prelude.Task") (CApp (CApp (CVar "prim_awaitAny") (CVar "a")) (CVar "b")))),CoreDecl "" (CInt 0),CoreDecl "Lune.Fiber.yield" (CApp (CVar "Lune.Prelude.Task") (CApp (CApp (CVar "Lune.IO.andThen") (CVar "prim_yield")) (CLam [PVar "u"] (CApp (CVar "Lune.IO.pure") (CApp (CVar "Lune.Prelude.Ok") (CVar "u")))))),CoreDecl "" (CInt 0),CoreDecl "" (CInt 0),CoreDecl "Lune.Task.succeed" (CLam [PVar "a"] (CApp (CVar "Lune.Prelude.Task") (CApp (CVar "Lune.IO.pure") (CApp (CVar "Lune.Prelude.Ok") (CVar "a"))))),CoreDecl "" (CInt 0),CoreDecl "Lune.Task.fail" (CLam [PVar "e"] (CApp (CVar "Lune.Prelude.Task") (CApp (CVar "Lune.IO.pure") (CApp (CVar "Lune.Prelude.Err") (CVar "e"))))),CoreDecl "" (CInt 0),CoreDecl "Lune.Task.fromIO" (CLam [PVar "io"] (CApp (CVar "Lune.Prelude.Task") (CApp (CApp (CVar "Lune.IO.andThen") (CVar "io")) (CLam [PVar "a"] (CApp (CVar "Lune.IO.pure") (CApp (CVar "Lune.Prelude.Ok") (CVar "a"))))))),CoreDecl "" (CInt 0),CoreDecl "Lune.Task.fromResult" (CLam [PVar "r"] (CCase (CVar "r") [CoreAlt (PCon "Lune.Prelude.Ok" [Located {locSpan = Span {spanStartLine = 45, spanStartCol = 8, spanEndLine = 45, spanEndCol = 10}, locComments = Comments {commentsLeading = [], commentsTrailing = [], commentsInner = []}, locValue = PVar "a"}]) (CApp (CVar "Lune.Task.succeed") (CVar "a")),CoreAlt (PCon "Lune.Prelude.Err" [Located {locSpan = Span {spanStartLine = 46, spanStartCol = 9, spanEndLine = 46, spanEndCol = 11}, locComments = Comments {commentsLeading = [], commentsTrailing = [], commentsInner = []}, locValue = PVar "e"}]) (CApp (CVar "Lune.Task.fail") (CVar "e"))])),CoreDecl "" (CInt 0),CoreDecl "Lune.Task.map" (CLam [PVar "f",PVar "task"] (CCase (CVar "task") [CoreAlt (PCon "Lune.Prelude.Task" [Located {locSpan = Span {spanStartLine = 51, spanStartCol = 10, spanEndLine = 51, spanEndCol = 13}, locComments = Comments {commentsLeading = [], commentsTrailing = [], commentsInner = []}, locValue = PVar "io"}]) (CApp (CVar "Lune.Prelude.Task") (CApp (CApp (CVar "Lune.IO.andThen") (CVar "io")) (CLam [PVar "r"] (CCase (CVar "r") [CoreAlt (PCon "Lune.Prelude.Err" [Located {locSpan = Span {spanStartLine = 55, spanStartCol = 19, spanEndLine = 55, spanEndCol = 21}, locComments = Comments {commentsLeading = [], commentsTrailing = [], commentsInner = []}, locValue = PVar "e"}]) (CApp (CVar "Lune.IO.pure") (CApp (CVar "Lune.Prelude.Err") (CVar "e"))),CoreAlt (PCon "Lune.Prelude.Ok" [Located {locSpan = Span {spanStartLine = 56, spanStartCol = 18, spanEndLine = 56, spanEndCol = 20}, locComments = Comments {commentsLeading = [], commentsTrailing = [], commentsInner = []}, locValue = PVar "a"}]) (CApp (CVar "Lune.IO.pure") (CApp (CVar "Lune.Prelude.Ok") (CApp (CVar "f") (CVar "a"))))]))))])),CoreDecl "" (CInt 0),CoreDecl "Lune.Task.andThen" (CLam [PVar "task",PVar "k"] (CCase (CVar "task") [CoreAlt (PCon "Lune.Prelude.Task" [Located {locSpan = Span {spanStartLine = 63, spanStartCol = 10, spanEndLine = 63, spanEndCol = 13}, locComments = Comments {commentsLeading = [], commentsTrailing = [], commentsInner = []}, locValue = PVar "io"}]) (CApp (CVar "Lune.Prelude.Task") (CApp (CApp (CVar "Lune.IO.andThen") (CVar "io")) (CLam [PVar "r"] (CCase (CVar "r") [CoreAlt (PCon "Lune.Prelude.Err" [Located {locSpan = Span {spanStartLine = 67, spanStartCol = 19, spanEndLine = 67, spanEndCol = 21}, locComments = Comments {commentsLeading = [], commentsTrailing = [], commentsInner = []}, locValue = PVar "e"}]) (CApp (CVar "Lune.IO.pure") (CApp (CVar "Lune.Prelude.Err") (CVar "e"))),CoreAlt (PCon "Lune.Prelude.Ok" [Located {locSpan = Span {spanStartLine = 68, spanStartCol = 18, spanEndLine = 68, spanEndCol = 20}, locComments = Comments {commentsLeading = [], commentsTrailing = [], commentsInner = []}, locValue = PVar "a"}]) (CCase (CApp (CVar "k") (CVar "a")) [CoreAlt (PCon "Lune.Prelude.Task" [Located {locSpan = Span {spanStartLine = 70, spanStartCol = 24, spanEndLine = 70, spanEndCol = 28}, locComments = Comments {commentsLeading = [], commentsTrailing = [], commentsInner = []}, locValue = PVar "io2"}]) (CVar "io2")])]))))])),CoreDecl "" (CInt 0),CoreDecl "Lune.Task.then" (CLam [PVar "ta",PVar "tb"] (CApp (CApp (CVar "Lune.Task.andThen") (CVar "ta")) (CLam [PWildcard] (CVar "tb")))),CoreDecl "" (CInt 0),CoreDecl "Lune.Task.mapError" (CLam [PVar "f",PVar "task"] (CCase (CVar "task") [CoreAlt (PCon "Lune.Prelude.Task" [Located {locSpan = Span {spanStartLine = 81, spanStartCol = 10, spanEndLine = 81, spanEndCol = 13}, locComments = Comments {commentsLeading = [], commentsTrailing = [], commentsInner = []}, locValue = PVar "io"}]) (CApp (CVar "Lune.Prelude.Task") (CApp (CApp (CVar "Lune.IO.andThen") (CVar "io")) (CLam [PVar "r"] (CCase (CVar "r") [CoreAlt (PCon "Lune.Prelude.Err" [Located {locSpan = Span {spanStartLine = 85, spanStartCol = 19, spanEndLine = 85, spanEndCol = 21}, locComments = Comments {commentsLeading = [], commentsTrailing = [], commentsInner = []}, locValue = PVar "e"}]) (CApp (CVar "Lune.IO.pure") (CApp (CVar "Lune.Prelude.Err") (CApp (CVar "f") (CVar "e")))),CoreAlt (PCon "Lune.Prelude.Ok" [Located {locSpan = Span {spanStartLine = 86, spanStartCol = 18, spanEndLine = 86, spanEndCol = 20}, locComments = Comments {commentsLeading = [], commentsTrailing = [], commentsInner = []}, locValue = PVar "a"}]) (CApp (CVar "Lune.IO.pure") (CApp (CVar "Lune.Prelude.Ok") (CVar "a")))]))))])),CoreDecl "" (CInt 0),CoreDecl "Lune.Task.onError" (CLam [PVar "task",PVar "handler"] (CCase (CVar "task") [CoreAlt (PCon "Lune.Prelude.Task" [Located {locSpan = Span {spanStartLine = 93, spanStartCol = 10, spanEndLine = 93, spanEndCol = 13}, locComments = Comments {commentsLeading = [], commentsTrailing = [], commentsInner = []}, locValue = PVar "io"}]) (CApp (CVar "Lune.Prelude.Task") (CApp (CApp (CVar "Lune.IO.andThen") (CVar "io")) (CLam [PVar "r"] (CCase (CVar "r") [CoreAlt (PCon "Lune.Prelude.Ok" [Located {locSpan = Span {spanStartLine = 97, spanStartCol = 18, spanEndLine = 97, spanEndCol = 20}, locComments = Comments {commentsLeading = [], commentsTrailing = [], commentsInner = []}, locValue = PVar "a"}]) (CApp (CVar "Lune.IO.pure") (CApp (CVar "Lune.Prelude.Ok") (CVar "a"))),CoreAlt (PCon "Lune.Prelude.Err" [Located {locSpan = Span {spanStartLine = 98, spanStartCol = 19, spanEndLine = 98, spanEndCol = 21}, locComments = Comments {commentsLeading = [], commentsTrailing = [], commentsInner = []}, locValue = PVar "e"}]) (CCase (CApp (CVar "handler") (CVar "e")) [CoreAlt (PCon "Lune.Prelude.Task" [Located {locSpan = Span {spanStartLine = 100, spanStartCol = 24, spanEndLine = 100, spanEndCol = 28}, locComments = Comments {commentsLeading = [], commentsTrailing = [], commentsInner = []}, locValue = PVar "io2"}]) (CVar "io2")])]))))])),CoreDecl "" (CInt 0),CoreDecl "Lune.Task.attempt" (CLam [PVar "task"] (CCase (CVar "task") [CoreAlt (PCon "Lune.Prelude.Task" [Located {locSpan = Span {spanStartLine = 107, spanStartCol = 10, spanEndLine = 107, spanEndCol = 13}, locComments = Comments {commentsLeading = [], commentsTrailing = [], commentsInner = []}, locValue = PVar "io"}]) (CVar "io")])),CoreDecl "" (CInt 0),CoreDecl "Lune.Task.result" (CLam [PVar "task"] (CApp (CApp (CVar "Lune.Task.onError") (CApp (CApp (CVar "Lune.Task.map") (CVar "Lune.Prelude.Ok")) (CVar "task"))) (CLam [PVar "e"] (CApp (CVar "Lune.Task.succeed") (CApp (CVar "Lune.Prelude.Err") (CVar "e")))))),CoreDecl "" (CInt 0),CoreDecl "Lune.Task.withTimeout" (CLam [PVar "timeoutMs",PVar "task"] (CApp (CApp (CSelect (CVar "$dictMonad_Task") "andThen") (CApp (CVar "Lune.Fiber.spawn") (CApp (CApp (CVar "Lune.Task.map") (CVar "Lune.Prelude.Ok")) (CVar "task")))) (CLam [PVar "t1"] (CApp (CApp (CSelect (CVar "$dictMonad_Task") "andThen") (CApp (CVar "Lune.Fiber.spawn") (CApp (CApp (CVar "Lune.Task.then") (CApp (CVar "Lune.IO.sleepMs") (CVar "timeoutMs"))) (CApp (CVar "Lune.Task.succeed") (CApp (CVar "Lune.Prelude.Err") (CVar "Lune.Task.Timeout")))))) (CLam [PVar "t2"] (CApp (CApp (CVar "Lune.Fiber.awaitAny") (CVar "t1")) (CVar "t2"))))))),CoreDecl "" (CInt 0),CoreDecl "Lune.Int.add" (CVar "prim_addInt"),CoreDecl "" (CInt 0),CoreDecl "Lune.Int.sub" (CVar "prim_subInt"),CoreDecl "" (CInt 0),CoreDecl "Lune.Int.mul" (CVar "prim_mulInt"),CoreDecl "" (CInt 0),CoreDecl "Lune.Int.div" (CVar "prim_divInt"),CoreDecl "" (CInt 0),CoreDecl "Lune.Int.mod" (CVar "prim_modInt"),CoreDecl "" (CInt 0),CoreDecl "Lune.Int.eq" (CVar "prim_eqInt"),CoreDecl "" (CInt 0),CoreDecl "Lune.Int.gte" (CVar "prim_geInt"),CoreDecl "" (CInt 0),CoreDecl "Lune.Int.lte" (CVar "prim_leInt"),CoreDecl "" (CInt 0),CoreDecl "Lune.Int.max" (CLam [PVar "a",PVar "b"] (CCase (CApp (CApp (CVar "prim_geInt") (CVar "a")) (CVar "b")) [CoreAlt (PCon "Lune.Prelude.True" []) (CVar "a"),CoreAlt (PCon "Lune.Prelude.False" []) (CVar "b")])),CoreDecl "" (CInt 0),CoreDecl "Lune.Int.min" (CLam [PVar "a",PVar "b"] (CCase (CApp (CApp (CVar "prim_leInt") (CVar "a")) (CVar "b")) [CoreAlt (PCon "Lune.Prelude.True" []) (CVar "a"),CoreAlt (PCon "Lune.Prelude.False" []) (CVar "b")])),CoreDecl "" (CInt 0),CoreDecl "Lune.Char.toInt" (CVar "prim_charToInt"),CoreDecl "" (CInt 0),CoreDecl "Lune.Char.fromInt" (CVar "prim_intToChar"),CoreDecl "" (CInt 0),CoreDecl "Lune.Char.toLower" (CLam [PVar "c"] (CCase (CApp (CApp (CVar "prim_and") (CApp (CApp (CVar "prim_geInt") (CApp (CVar "Lune.Char.toInt") (CVar "c"))) (CInt 65))) (CApp (CApp (CVar "prim_leInt") (CApp (CVar "Lune.Char.toInt") (CVar "c"))) (CInt 90))) [CoreAlt (PCon "Lune.Prelude.True" []) (CApp (CVar "Lune.Char.fromInt") (CApp (CApp (CVar "prim_addInt") (CApp (CVar "Lune.Char.toInt") (CVar "c"))) (CInt 32))),CoreAlt (PCon "Lune.Prelude.False" []) (CVar "c")])),CoreDecl "" (CInt 0),CoreDecl "Lune.Char.toUpper" (CLam [PVar "c"] (CCase (CApp (CApp (CVar "prim_and") (CApp (CApp (CVar "prim_geInt") (CApp (CVar "Lune.Char.toInt") (CVar "c"))) (CInt 97))) (CApp (CApp (CVar "prim_leInt") (CApp (CVar "Lune.Char.toInt") (CVar "c"))) (CInt 122))) [CoreAlt (PCon "Lune.Prelude.True" []) (CApp (CVar "Lune.Char.fromInt") (CApp (CApp (CVar "prim_subInt") (CApp (CVar "Lune.Char.toInt") (CVar "c"))) (CInt 32))),CoreAlt (PCon "Lune.Prelude.False" []) (CVar "c")])),CoreDecl "" (CInt 0),CoreDecl "Lune.Char.isSpace" (CLam [PVar "c"] (CCase (CApp (CApp (CVar "prim_eqInt") (CApp (CVar "Lune.Char.toInt") (CVar "c"))) (CInt 32)) [CoreAlt (PCon "Lune.Prelude.True" []) (CVar "Lune.Prelude.True"),CoreAlt (PCon "Lune.Prelude.False" []) (CCase (CApp (CApp (CVar "prim_eqInt") (CApp (CVar "Lune.Char.toInt") (CVar "c"))) (CInt 9)) [CoreAlt (PCon "Lune.Prelude.True" []) (CVar "Lune.Prelude.True"),CoreAlt (PCon "Lune.Prelude.False" []) (CCase (CApp (CApp (CVar "prim_eqInt") (CApp (CVar "Lune.Char.toInt") (CVar "c"))) (CInt 10)) [CoreAlt (PCon "Lune.Prelude.True" []) (CVar "Lune.Prelude.True"),CoreAlt (PCon "Lune.Prelude.False" []) (CCase (CApp (CApp (CVar "prim_eqInt") (CApp (CVar "Lune.Char.toInt") (CVar "c"))) (CInt 13)) [CoreAlt (PCon "Lune.Prelude.True" []) (CVar "Lune.Prelude.True"),CoreAlt (PCon "Lune.Prelude.False" []) (CVar "Lune.Prelude.False")])])])])),CoreDecl "" (CInt 0),CoreDecl "Lune.Char.isDigit" (CLam [PVar "c"] (CApp (CApp (CVar "prim_and") (CApp (CApp (CVar "prim_geInt") (CApp (CVar "Lune.Char.toInt") (CVar "c"))) (CInt 48))) (CApp (CApp (CVar "prim_leInt") (CApp (CVar "Lune.Char.toInt") (CVar "c"))) (CInt 57)))),CoreDecl "" (CInt 0),CoreDecl "Lune.Char.eq" (CLam [PVar "a",PVar "b"] (CApp (CApp (CVar "prim_eqInt") (CApp (CVar "Lune.Char.toInt") (CVar "a"))) (CApp (CVar "Lune.Char.toInt") (CVar "b")))),CoreDecl "" (CInt 0),CoreDecl "Lune.String.append" (CVar "prim_appendString"),CoreDecl "" (CInt 0),CoreDecl "Lune.String.eq" (CVar "prim_eqString"),CoreDecl "" (CInt 0),CoreDecl "Lune.String.fromInt" (CVar "prim_showInt"),CoreDecl "" (CInt 0),CoreDecl "Lune.String.fromFloat" (CVar "prim_showFloat"),CoreDecl "" (CInt 0),CoreDecl "Lune.String.toInt" (CVar "prim_parseInt"),CoreDecl "" (CInt 0),CoreDecl "Lune.String.toChars" (CVar "prim_stringToChars"),CoreDecl "" (CInt 0),CoreDecl "Lune.String.fromChars" (CVar "prim_charsToString"),CoreDecl "" (CInt 0),CoreDecl "Lune.String.fromChar" (CLam [PVar "c"] (CApp (CVar "Lune.String.fromChars") (CApp (CApp (CVar "Lune.Prelude.Cons") (CVar "c")) (CVar "Lune.Prelude.Nil")))),CoreDecl "" (CInt 0),CoreDecl "Lune.String.length" (CLam [PVar "s"] (CApp (CVar "Lune.String.listLength") (CApp (CVar "Lune.String.toChars") (CVar "s")))),CoreDecl "" (CInt 0),CoreDecl "Lune.String.isEmpty" (CLam [PVar "s"] (CCase (CApp (CVar "Lune.String.toChars") (CVar "s")) [CoreAlt (PCon "Lune.Prelude.Nil" []) (CVar "Lune.Prelude.True"),CoreAlt PWildcard (CVar "Lune.Prelude.False")])),CoreDecl "" (CInt 0),CoreDecl "Lune.String.toLower" (CLam [PVar "s"] (CApp (CVar "Lune.String.fromChars") (CApp (CApp (CVar "Lune.String.listMap") (CVar "Lune.Char.toLower")) (CApp (CVar "Lune.String.toChars") (CVar "s"))))),CoreDecl "" (CInt 0),CoreDecl "Lune.String.toUpper" (CLam [PVar "s"] (CApp (CVar "Lune.String.fromChars") (CApp (CApp (CVar "Lune.String.listMap") (CVar "Lune.Char.toUpper")) (CApp (CVar "Lune.String.toChars") (CVar "s"))))),CoreDecl "" (CInt 0),CoreDecl "Lune.String.startsWith" (CLam [PVar "prefix",PVar "s"] (CApp (CApp (CVar "Lune.String.charsStartsWith") (CApp (CVar "Lune.String.toChars") (CVar "prefix"))) (CApp (CVar "Lune.String.toChars") (CVar "s")))),CoreDecl "" (CInt 0),CoreDecl "Lune.String.endsWith" (CLam [PVar "suffix",PVar "s"] (CApp (CApp (CVar "Lune.String.charsStartsWith") (CApp (CVar "Lune.String.listReverse") (CApp (CVar "Lune.String.toChars") (CVar "suffix")))) (CApp (CVar "Lune.String.listReverse") (CApp (CVar "Lune.String.toChars") (CVar "s"))))),CoreDecl "" (CInt 0),CoreDecl "Lune.String.contains" (CLam [PVar "needle",PVar "haystack"] (CApp (CApp (CVar "Lune.String.charsContains") (CApp (CVar "Lune.String.toChars") (CVar "needle"))) (CApp (CVar "Lune.String.toChars") (CVar "haystack")))),CoreDecl "" (CInt 0),CoreDecl "Lune.String.split" (CLam [PVar "delimiter",PVar "s"] (CCase (CApp (CVar "Lune.String.isEmpty") (CVar "delimiter")) [CoreAlt (PCon "Lune.Prelude.True" []) (CApp (CApp (CVar "Lune.Prelude.Cons") (CVar "s")) (CVar "Lune.Prelude.Nil")),CoreAlt (PCon "Lune.Prelude.False" []) (CApp (CApp (CApp (CVar "Lune.String.splitHelper") (CApp (CVar "Lune.String.toChars") (CVar "delimiter"))) (CApp (CVar "Lune.String.toChars") (CVar "s"))) (CVar "Lune.Prelude.Nil"))])),CoreDecl "" (CInt 0),CoreDecl "Lune.String.join" (CLam [PVar "sep",PVar "parts"] (CCase (CVar "parts") [CoreAlt (PCon "Lune.Prelude.Nil" []) (CString ""),CoreAlt (PCon "Lune.Prelude.Cons" [Located {locSpan = Span {spanStartLine = 80, spanStartCol = 10, spanEndLine = 80, spanEndCol = 16}, locComments = Comments {commentsLeading = [], commentsTrailing = [], commentsInner = []}, locValue = PVar "first"},Located {locSpan = Span {spanStartLine = 80, spanStartCol = 16, spanEndLine = 80, spanEndCol = 21}, locComments = Comments {commentsLeading = [], commentsTrailing = [], commentsInner = []}, locValue = PVar "rest"}]) (CApp (CApp (CApp (CVar "Lune.String.listFoldl") (CLam [PVar "acc",PVar "x"] (CApp (CApp (CVar "Lune.String.append") (CApp (CApp (CVar "Lune.String.append") (CVar "acc")) (CVar "sep"))) (CVar "x")))) (CVar "first")) (CVar "rest"))])),CoreDecl "" (CInt 0),CoreDecl "Lune.String.trim" (CLam [PVar "s"] (CApp (CVar "Lune.String.trimLeft") (CApp (CVar "Lune.String.trimRight") (CVar "s")))),CoreDecl "" (CInt 0),CoreDecl "Lune.String.trimLeft" (CLam [PVar "s"] (CApp (CVar "Lune.String.fromChars") (CApp (CApp (CVar "Lune.String.dropWhileChars") (CVar "Lune.Char.isSpace")) (CApp (CVar "Lune.String.toChars") (CVar "s"))))),CoreDecl "" (CInt 0),CoreDecl "Lune.String.trimRight" (CLam [PVar "s"] (CApp (CVar "Lune.String.fromChars") (CApp (CVar "Lune.String.listReverse") (CApp (CApp (CVar "Lune.String.dropWhileChars") (CVar "Lune.Char.isSpace")) (CApp (CVar "Lune.String.listReverse") (CApp (CVar "Lune.String.toChars") (CVar "s"))))))),CoreDecl "" (CInt 0),CoreDecl "Lune.String.drop" (CLam [PVar "n",PVar "s"] (CApp (CVar "Lune.String.fromChars") (CApp (CApp (CVar "Lune.String.listDrop") (CVar "n")) (CApp (CVar "Lune.String.toChars") (CVar "s"))))),CoreDecl "" (CInt 0),CoreDecl "Lune.String.take" (CLam [PVar "n",PVar "s"] (CApp (CVar "Lune.String.fromChars") (CApp (CApp (CVar "Lune.String.listTake") (CVar "n")) (CApp (CVar "Lune.String.toChars") (CVar "s"))))),CoreDecl "" (CInt 0),CoreDecl "Lune.String.indexOf" (CLam [PVar "needle",PVar "haystack"] (CApp (CApp (CApp (CVar "Lune.String.indexOfHelper") (CApp (CVar "Lune.String.toChars") (CVar "needle"))) (CApp (CVar "Lune.String.toChars") (CVar "haystack"))) (CInt 0))),CoreDecl "" (CInt 0),CoreDecl "Lune.String.lines" (CLam [PVar "s"] (CApp (CApp (CVar "Lune.String.split") (CString "\n")) (CVar "s"))),CoreDecl "" (CInt 0),CoreDecl "Lune.String.unlines" (CLam [PVar "ls"] (CApp (CApp (CVar "Lune.String.join") (CString "\n")) (CVar "ls"))),CoreDecl "" (CInt 0),CoreDecl "Lune.String.words" (CLam [PVar "s"] (CApp (CApp (CApp (CVar "Lune.String.wordsFromChars") (CApp (CVar "Lune.String.toChars") (CVar "s"))) (CVar "Lune.Prelude.Nil")) (CVar "Lune.Prelude.Nil"))),CoreDecl "" (CInt 0),CoreDecl "Lune.String.wordsFromChars" (CLam [PVar "chars",PVar "currentRev",PVar "accRev"] (CCase (CVar "chars") [CoreAlt (PCon "Lune.Prelude.Nil" []) (CCase (CVar "currentRev") [CoreAlt (PCon "Lune.Prelude.Nil" []) (CApp (CVar "Lune.String.listReverse") (CVar "accRev")),CoreAlt PWildcard (CApp (CVar "Lune.String.listReverse") (CApp (CApp (CVar "Lune.Prelude.Cons") (CApp (CVar "Lune.String.fromChars") (CApp (CVar "Lune.String.listReverse") (CVar "currentRev")))) (CVar "accRev")))]),CoreAlt (PCon "Lune.Prelude.Cons" [Located {locSpan = Span {spanStartLine = 118, spanStartCol = 10, spanEndLine = 118, spanEndCol = 12}, locComments = Comments {commentsLeading = [], commentsTrailing = [], commentsInner = []}, locValue = PVar "c"},Located {locSpan = Span {spanStartLine = 118, spanStartCol = 12, spanEndLine = 118, spanEndCol = 17}, locComments = Comments {commentsLeading = [], commentsTrailing = [], commentsInner = []}, locValue = PVar "rest"}]) (CCase (CApp (CVar "Lune.Char.isSpace") (CVar "c")) [CoreAlt (PCon "Lune.Prelude.True" []) (CCase (CVar "currentRev") [CoreAlt (PCon "Lune.Prelude.Nil" []) (CApp (CApp (CApp (CVar "Lune.String.wordsFromChars") (CVar "rest")) (CVar "Lune.Prelude.Nil")) (CVar "accRev")),CoreAlt PWildcard (CApp (CApp (CApp (CVar "Lune.String.wordsFromChars") (CVar "rest")) (CVar "Lune.Prelude.Nil")) (CApp (CApp (CVar "Lune.Prelude.Cons") (CApp (CVar "Lune.String.fromChars") (CApp (CVar "Lune.String.listReverse") (CVar "currentRev")))) (CVar "accRev")))]),CoreAlt (PCon "Lune.Prelude.False" []) (CApp (CApp (CApp (CVar "Lune.String.wordsFromChars") (CVar "rest")) (CApp (CApp (CVar "Lune.Prelude.Cons") (CVar "c")) (CVar "currentRev"))) (CVar "accRev"))])])),CoreDecl "" (CInt 0),CoreDecl "Lune.String.sumInts" (CLam [PVar "xs"] (CApp (CApp (CApp (CVar "Lune.String.listFoldl") (CVar "Lune.String.sumIntsStep")) (CApp (CVar "Lune.Prelude.Ok") (CInt 0))) (CVar "xs"))),CoreDecl "" (CInt 0),CoreDecl "Lune.String.sumIntsStep" (CLam [PVar "acc",PVar "s"] (CCase (CVar "acc") [CoreAlt (PCon "Lune.Prelude.Err" [Located {locSpan = Span {spanStartLine = 133, spanStartCol = 9, spanEndLine = 133, spanEndCol = 13}, locComments = Comments {commentsLeading = [], commentsTrailing = [], commentsInner = []}, locValue = PVar "msg"}]) (CApp (CVar "Lune.Prelude.Err") (CVar "msg")),CoreAlt (PCon "Lune.Prelude.Ok" [Located {locSpan = Span {spanStartLine = 134, spanStartCol = 8, spanEndLine = 134, spanEndCol = 10}, locComments = Comments {commentsLeading = [], commentsTrailing = [], commentsInner = []}, locValue = PVar "n"}]) (CCase (CApp (CVar "Lune.String.toInt") (CVar "s")) [CoreAlt (PCon "Lune.Prelude.Err" [Located {locSpan = Span {spanStartLine = 136, spanStartCol = 13, spanEndLine = 136, spanEndCol = 17}, locComments = Comments {commentsLeading = [], commentsTrailing = [], commentsInner = []}, locValue = PVar "msg"}]) (CApp (CVar "Lune.Prelude.Err") (CVar "msg")),CoreAlt (PCon "Lune.Prelude.Ok" [Located {locSpan = Span {spanStartLine = 137, spanStartCol = 12, spanEndLine = 137, spanEndCol = 14}, locComments = Comments {commentsLeading = [], commentsTrailing = [], commentsInner = []}, locValue = PVar "m"}]) (CApp (CVar "Lune.Prelude.Ok") (CApp (CApp (CVar "prim_addInt") (CVar "n")) (CVar "m")))])])),CoreDecl "" (CInt 0),CoreDecl "Lune.String.charsStartsWith" (CLam [PVar "prefix",PVar "str"] (CCase (CVar "prefix") [CoreAlt (PCon "Lune.Prelude.Nil" []) (CVar "Lune.Prelude.True"),CoreAlt (PCon "Lune.Prelude.Cons" [Located {locSpan = Span {spanStartLine = 145, spanStartCol = 10, spanEndLine = 145, spanEndCol = 12}, locComments = Comments {commentsLeading = [], commentsTrailing = [], commentsInner = []}, locValue = PVar "p"},Located {locSpan = Span {spanStartLine = 145, spanStartCol = 12, spanEndLine = 145, spanEndCol = 15}, locComments = Comments {commentsLeading = [], commentsTrailing = [], commentsInner = []}, locValue = PVar "ps"}]) (CCase (CVar "str") [CoreAlt (PCon "Lune.Prelude.Nil" []) (CVar "Lune.Prelude.False"),CoreAlt (PCon "Lune.Prelude.Cons" [Located {locSpan = Span {spanStartLine = 148, spanStartCol = 14, spanEndLine = 148, spanEndCol = 16}, locComments = Comments {commentsLeading = [], commentsTrailing = [], commentsInner = []}, locValue = PVar "s"},Located {locSpan = Span {spanStartLine = 148, spanStartCol = 16, spanEndLine = 148, spanEndCol = 19}, locComments = Comments {commentsLeading = [], commentsTrailing = [], commentsInner = []}, locValue = PVar "ss"}]) (CCase (CApp (CApp (CVar "Lune.Char.eq") (CVar "p")) (CVar "s")) [CoreAlt (PCon "Lune.Prelude.True" []) (CApp (CApp (CVar "Lune.String.charsStartsWith") (CVar "ps")) (CVar "ss")),CoreAlt (PCon "Lune.Prelude.False" []) (CVar "Lune.Prelude.False")])])])),CoreDecl "" (CInt 0),CoreDecl "Lune.String.charsContains" (CLam [PVar "needle",PVar "haystack"] (CCase (CVar "needle") [CoreAlt (PCon "Lune.Prelude.Nil" []) (CVar "Lune.Prelude.True"),CoreAlt PWildcard (CCase (CVar "haystack") [CoreAlt (PCon "Lune.Prelude.Nil" []) (CVar "Lune.Prelude.False"),CoreAlt (PCon "Lune.Prelude.Cons" [Located {locSpan = Span {spanStartLine = 160, spanStartCol = 14, spanEndLine = 160, spanEndCol = 16}, locComments = Comments {commentsLeading = [], commentsTrailing = [], commentsInner = []}, locValue = PWildcard},Located {locSpan = Span {spanStartLine = 160, spanStartCol = 16, spanEndLine = 160, spanEndCol = 21}, locComments = Comments {commentsLeading = [], commentsTrailing = [], commentsInner = []}, locValue = PVar "rest"}]) (CCase (CApp (CApp (CVar "Lune.String.charsStartsWith") (CVar "needle")) (CVar "haystack")) [CoreAlt (PCon "Lune.Prelude.True" []) (CVar "Lune.Prelude.True"),CoreAlt (PCon "Lune.Prelude.False" []) (CApp (CApp (CVar "Lune.String.charsContains") (CVar "needle")) (CVar "rest"))])])])),CoreDecl "" (CInt 0),CoreDecl "Lune.String.splitHelper" (CLam [PVar "delim",PVar "chars",PVar "acc"] (CCase (CVar "chars") [CoreAlt (PCon "Lune.Prelude.Nil" []) (CApp (CApp (CVar "Lune.Prelude.Cons") (CApp (CVar "Lune.String.fromChars") (CApp (CVar "Lune.String.listReverse") (CVar "acc")))) (CVar "Lune.Prelude.Nil")),CoreAlt (PCon "Lune.Prelude.Cons" [Located {locSpan = Span {spanStartLine = 169, spanStartCol = 10, spanEndLine = 169, spanEndCol = 12}, locComments = Comments {commentsLeading = [], commentsTrailing = [], commentsInner = []}, locValue = PVar "c"},Located {locSpan = Span {spanStartLine = 169, spanStartCol = 12, spanEndLine = 169, spanEndCol = 17}, locComments = Comments {commentsLeading = [], commentsTrailing = [], commentsInner = []}, locValue = PVar "rest"}]) (CCase (CApp (CApp (CVar "Lune.String.charsStartsWith") (CVar "delim")) (CVar "chars")) [CoreAlt (PCon "Lune.Prelude.True" []) (CApp (CApp (CVar "Lune.Prelude.Cons") (CApp (CVar "Lune.String.fromChars") (CApp (CVar "Lune.String.listReverse") (CVar "acc")))) (CApp (CApp (CApp (CVar "Lune.String.splitHelper") (CVar "delim")) (CApp (CApp (CVar "Lune.String.listDrop") (CApp (CVar "Lune.String.listLength") (CVar "delim"))) (CVar "chars"))) (CVar "Lune.Prelude.Nil"))),CoreAlt (PCon "Lune.Prelude.False" []) (CApp (CApp (CApp (CVar "Lune.String.splitHelper") (CVar "delim")) (CVar "rest")) (CApp (CApp (CVar "Lune.Prelude.Cons") (CVar "c")) (CVar "acc")))])])),CoreDecl "" (CInt 0),CoreDecl "Lune.String.indexOfHelper" (CLam [PVar "needle",PVar "haystack",PVar "idx"] (CCase (CVar "needle") [CoreAlt (PCon "Lune.Prelude.Nil" []) (CApp (CVar "Lune.Prelude.Just") (CVar "idx")),CoreAlt PWildcard (CCase (CVar "haystack") [CoreAlt (PCon "Lune.Prelude.Nil" []) (CVar "Lune.Prelude.Nothing"),CoreAlt (PCon "Lune.Prelude.Cons" [Located {locSpan = Span {spanStartLine = 184, spanStartCol = 14, spanEndLine = 184, spanEndCol = 16}, locComments = Comments {commentsLeading = [], commentsTrailing = [], commentsInner = []}, locValue = PWildcard},Located {locSpan = Span {spanStartLine = 184, spanStartCol = 16, spanEndLine = 184, spanEndCol = 21}, locComments = Comments {commentsLeading = [], commentsTrailing = [], commentsInner = []}, locValue = PVar "rest"}]) (CCase (CApp (CApp (CVar "Lune.String.charsStartsWith") (CVar "needle")) (CVar "haystack")) [CoreAlt (PCon "Lune.Prelude.True" []) (CApp (CVar "Lune.Prelude.Just") (CVar "idx")),CoreAlt (PCon "Lune.Prelude.False" []) (CApp (CApp (CApp (CVar "Lune.String.indexOfHelper") (CVar "needle")) (CVar "rest")) (CApp (CApp (CVar "prim_addInt") (CVar "idx")) (CInt 1)))])])])),CoreDecl "" (CInt 0),CoreDecl "Lune.String.dropWhileChars" (CLam [PVar "pred",PVar "chars"] (CCase (CVar "chars") [CoreAlt (PCon "Lune.Prelude.Nil" []) (CVar "Lune.Prelude.Nil"),CoreAlt (PCon "Lune.Prelude.Cons" [Located {locSpan = Span {spanStartLine = 193, spanStartCol = 10, spanEndLine = 193, spanEndCol = 12}, locComments = Comments {commentsLeading = [], commentsTrailing = [], commentsInner = []}, locValue = PVar "c"},Located {locSpan = Span {spanStartLine = 193, spanStartCol = 12, spanEndLine = 193, spanEndCol = 17}, locComments = Comments {commentsLeading = [], commentsTrailing = [], commentsInner = []}, locValue = PVar "rest"}]) (CCase (CApp (CVar "pred") (CVar "c")) [CoreAlt (PCon "Lune.Prelude.True" []) (CApp (CApp (CVar "Lune.String.dropWhileChars") (CVar "pred")) (CVar "rest")),CoreAlt (PCon "Lune.Prelude.False" []) (CApp (CApp (CVar "Lune.Prelude.Cons") (CVar "c")) (CVar "rest"))])])),CoreDecl "" (CInt 0),CoreDecl "Lune.String.listLength" (CLam [PVar "xs"] (CCase (CVar "xs") [CoreAlt (PCon "Lune.Prelude.Nil" []) (CInt 0),CoreAlt (PCon "Lune.Prelude.Cons" [Located {locSpan = Span {spanStartLine = 202, spanStartCol = 10, spanEndLine = 202, spanEndCol = 12}, locComments = Comments {commentsLeading = [], commentsTrailing = [], commentsInner = []}, locValue = PWildcard},Located {locSpan = Span {spanStartLine = 202, spanStartCol = 12, spanEndLine = 202, spanEndCol = 17}, locComments = Comments {commentsLeading = [], commentsTrailing = [], commentsInner = []}, locValue = PVar "rest"}]) (CApp (CApp (CVar "prim_addInt") (CInt 1)) (CApp (CVar "Lune.String.listLength") (CVar "rest")))])),CoreDecl "" (CInt 0),CoreDecl "Lune.String.listMap" (CLam [PVar "f",PVar "xs"] (CCase (CVar "xs") [CoreAlt (PCon "Lune.Prelude.Nil" []) (CVar "Lune.Prelude.Nil"),CoreAlt (PCon "Lune.Prelude.Cons" [Located {locSpan = Span {spanStartLine = 208, spanStartCol = 10, spanEndLine = 208, spanEndCol = 12}, locComments = Comments {commentsLeading = [], commentsTrailing = [], commentsInner = []}, locValue = PVar "x"},Located {locSpan = Span {spanStartLine = 208, spanStartCol = 12, spanEndLine = 208, spanEndCol = 17}, locComments = Comments {commentsLeading = [], commentsTrailing = [], commentsInner = []}, locValue = PVar "rest"}]) (CApp (CApp (CVar "Lune.Prelude.Cons") (CApp (CVar "f") (CVar "x"))) (CApp (CApp (CVar "Lune.String.listMap") (CVar "f")) (CVar "rest")))])),CoreDecl "" (CInt 0),CoreDecl "Lune.String.listReverse" (CLam [PVar "xs"] (CApp (CApp (CVar "Lune.String.listReverseHelper") (CVar "xs")) (CVar "Lune.Prelude.Nil"))),CoreDecl "" (CInt 0),CoreDecl "Lune.String.listReverseHelper" (CLam [PVar "xs",PVar "acc"] (CCase (CVar "xs") [CoreAlt (PCon "Lune.Prelude.Nil" []) (CVar "acc"),CoreAlt (PCon "Lune.Prelude.Cons" [Located {locSpan = Span {spanStartLine = 217, spanStartCol = 10, spanEndLine = 217, spanEndCol = 12}, locComments = Comments {commentsLeading = [], commentsTrailing = [], commentsInner = []}, locValue = PVar "x"},Located {locSpan = Span {spanStartLine = 217, spanStartCol = 12, spanEndLine = 217, spanEndCol = 17}, locComments = Comments {commentsLeading = [], commentsTrailing = [], commentsInner = []}, locValue = PVar "rest"}]) (CApp (CApp (CVar "Lune.String.listReverseHelper") (CVar "rest")) (CApp (CApp (CVar "Lune.Prelude.Cons") (CVar "x")) (CVar "acc")))])),CoreDecl "" (CInt 0),CoreDecl "Lune.String.listDrop" (CLam [PVar "n",PVar "xs"] (CCase (CApp (CApp (CVar "prim_leInt") (CVar "n")) (CInt 0)) [CoreAlt (PCon "Lune.Prelude.True" []) (CVar "xs"),CoreAlt (PCon "Lune.Prelude.False" []) (CCase (CVar "xs") [CoreAlt (PCon "Lune.Prelude.Nil" []) (CVar "Lune.Prelude.Nil"),CoreAlt (PCon "Lune.Prelude.Cons" [Located {locSpan = Span {spanStartLine = 226, spanStartCol = 14, spanEndLine = 226, spanEndCol = 16}, locComments = Comments {commentsLeading = [], commentsTrailing = [], commentsInner = []}, locValue = PWildcard},Located {locSpan = Span {spanStartLine = 226, spanStartCol = 16, spanEndLine = 226, spanEndCol = 21}, locComments = Comments {commentsLeading = [], commentsTrailing = [], commentsInner = []}, locValue = PVar "rest"}]) (CApp (CApp (CVar "Lune.String.listDrop") (CApp (CApp (CVar "prim_subInt") (CVar "n")) (CInt 1))) (CVar "rest"))])])),CoreDecl "" (CInt 0),CoreDecl "Lune.String.listTake" (CLam [PVar "n",PVar "xs"] (CCase (CApp (CApp (CVar "prim_leInt") (CVar "n")) (CInt 0)) [CoreAlt (PCon "Lune.Prelude.True" []) (CVar "Lune.Prelude.Nil"),CoreAlt (PCon "Lune.Prelude.False" []) (CCase (CVar "xs") [CoreAlt (PCon "Lune.Prelude.Nil" []) (CVar "Lune.Prelude.Nil"),CoreAlt (PCon "Lune.Prelude.Cons" [Located {locSpan = Span {spanStartLine = 235, spanStartCol = 14, spanEndLine = 235, spanEndCol = 16}, locComments = Comments {commentsLeading = [], commentsTrailing = [], commentsInner = []}, locValue = PVar "x"},Located {locSpan = Span {spanStartLine = 235, spanStartCol = 16, spanEndLine = 235, spanEndCol = 21}, locComments = Comments {commentsLeading = [], commentsTrailing = [], commentsInner = []}, locValue = PVar "rest"}]) (CApp (CApp (CVar "Lune.Prelude.Cons") (CVar "x")) (CApp (CApp (CVar "Lune.String.listTake") (CApp (CApp (CVar "prim_subInt") (CVar "n")) (CInt 1))) (CVar "rest")))])])),CoreDecl "" (CInt 0),CoreDecl "Lune.String.listFoldl" (CLam [PVar "f",PVar "acc",PVar "xs"] (CCase (CVar "xs") [CoreAlt (PCon "Lune.Prelude.Nil" []) (CVar "acc"),CoreAlt (PCon "Lune.Prelude.Cons" [Located {locSpan = Span {spanStartLine = 241, spanStartCol = 10, spanEndLine = 241, spanEndCol = 12}, locComments = Comments {commentsLeading = [], commentsTrailing = [], commentsInner = []}, locValue = PVar "x"},Located {locSpan = Span {spanStartLine = 241, spanStartCol = 12, spanEndLine = 241, spanEndCol = 17}, locComments = Comments {commentsLeading = [], commentsTrailing = [], commentsInner = []}, locValue = PVar "rest"}]) (CApp (CApp (CApp (CVar "Lune.String.listFoldl") (CVar "f")) (CApp (CApp (CVar "f") (CVar "acc")) (CVar "x"))) (CVar "rest"))])),CoreDecl "" (CInt 0),CoreDecl "" (CInt 0),CoreDecl "" (CInt 0),CoreDecl "" (CInt 0),CoreDecl "" (CInt 0),CoreDecl "" (CInt 0),CoreDecl "" (CInt 0),CoreDecl "" (CInt 0),CoreDecl "" (CInt 0),CoreDecl "Lune.Scheduler.new" (CApp (CApp (CSelect (CVar "$dictMonad_Task") "andThen") (CApp (CVar "Lune.Atomic.commit") (CApp (CVar "Lune.Atomic.new") (CVar "Lune.Prelude.False")))) (CLam [PVar "runningVar"] (CApp (CApp (CSelect (CVar "$dictMonad_Task") "andThen") (CApp (CVar "Lune.Atomic.commit") (CApp (CVar "Lune.Atomic.new") (CVar "Lune.Prelude.Nil")))) (CLam [PVar "jobsVar"] (CApp (CApp (CSelect (CVar "$dictMonad_Task") "andThen") (CApp (CVar "Lune.Atomic.commit") (CApp (CVar "Lune.Atomic.new") (CVar "Lune.Prelude.Nil")))) (CLam [PVar "queueVar"] (CApp (CApp (CSelect (CVar "$dictMonad_Task") "andThen") (CApp (CVar "Lune.Atomic.commit") (CApp (CVar "Lune.Atomic.new") (CVar "Lune.Prelude.Nil")))) (CLam [PVar "inFlightVar"] (CApp (CVar "Lune.Task.succeed") (CRecord [("state",CRecord [("running",CVar "runningVar"),("jobs",CVar "jobsVar"),("queue",CVar "queueVar"),("inFlight",CVar "inFlightVar")])])))))))))),CoreDecl "" (CInt 0),CoreDecl "Lune.Scheduler.start" (CLam [PVar "sched"] (CApp (CApp (CSelect (CVar "$dictMonad_Task") "andThen") (CApp (CVar "Lune.Atomic.commit") (CApp (CApp (CVar "Lune.Atomic.write") (CSelect (CSelect (CVar "sched") "state") "running")) (CVar "Lune.Prelude.True")))) (CLam [PWildcard] (CApp (CApp (CSelect (CVar "$dictMonad_Task") "andThen") (CApp (CVar "Lune.Fiber.spawn") (CApp (CVar "Lune.Scheduler.runnerLoop") (CVar "sched")))) (CLam [PWildcard] (CApp (CVar "Lune.Task.succeed") (CVar "Lune.Prelude.unit"))))))),CoreDecl "" (CInt 0),CoreDecl "Lune.Scheduler.stop" (CLam [PVar "sched"] (CApp (CVar "Lune.Atomic.commit") (CApp (CApp (CVar "Lune.Atomic.write") (CSelect (CSelect (CVar "sched") "state") "running")) (CVar "Lune.Prelude.False")))),CoreDecl "" (CInt 0),CoreDecl "Lune.Scheduler.jobIdEq" (CLam [PVar "a",PVar "b"] (CCase (CVar "a") [CoreAlt (PCon "Lune.Scheduler.JobId" [Located {locSpan = Span {spanStartLine = 145, spanStartCol = 11, spanEndLine = 145, spanEndCol = 14}, locComments = Comments {commentsLeading = [], commentsTrailing = [], commentsInner = []}, locValue = PVar "sa"}]) (CCase (CVar "b") [CoreAlt (PCon "Lune.Scheduler.JobId" [Located {locSpan = Span {spanStartLine = 147, spanStartCol = 15, spanEndLine = 147, spanEndCol = 18}, locComments = Comments {commentsLeading = [], commentsTrailing = [], commentsInner = []}, locValue = PVar "sb"}]) (CApp (CApp (CVar "Lune.String.eq") (CVar "sa")) (CVar "sb"))])])),CoreDecl "" (CInt 0),CoreDecl "Lune.Scheduler.findJob" (CLam [PVar "targetId",PVar "entries"] (CCase (CVar "entries") [CoreAlt (PCon "Lune.Prelude.Nil" []) (CVar "Lune.Prelude.Nothing"),CoreAlt (PCon "Lune.Prelude.Cons" [Located {locSpan = Span {spanStartLine = 154, spanStartCol = 10, spanEndLine = 154, spanEndCol = 16}, locComments = Comments {commentsLeading = [], commentsTrailing = [], commentsInner = []}, locValue = PVar "entry"},Located {locSpan = Span {spanStartLine = 154, spanStartCol = 16, spanEndLine = 154, spanEndCol = 21}, locComments = Comments {commentsLeading = [], commentsTrailing = [], commentsInner = []}, locValue = PVar "rest"}]) (CCase (CApp (CApp (CVar "Lune.Scheduler.jobIdEq") (CVar "targetId")) (CSelect (CSelect (CVar "entry") "spec") "id")) [CoreAlt (PCon "Lune.Prelude.True" []) (CApp (CVar "Lune.Prelude.Just") (CVar "entry")),CoreAlt (PCon "Lune.Prelude.False" []) (CApp (CApp (CVar "Lune.Scheduler.findJob") (CVar "targetId")) (CVar "rest"))])])),CoreDecl "" (CInt 0),CoreDecl "Lune.Scheduler.memberJobId" (CLam [PVar "targetId",PVar "ids"] (CCase (CVar "ids") [CoreAlt (PCon "Lune.Prelude.Nil" []) (CVar "Lune.Prelude.False"),CoreAlt (PCon "Lune.Prelude.Cons" [Located {locSpan = Span {spanStartLine = 164, spanStartCol = 10, spanEndLine = 164, spanEndCol = 13}, locComments = Comments {commentsLeading = [], commentsTrailing = [], commentsInner = []}, locValue = PVar "id"},Located {locSpan = Span {spanStartLine = 164, spanStartCol = 13, spanEndLine = 164, spanEndCol = 18}, locComments = Comments {commentsLeading = [], commentsTrailing = [], commentsInner = []}, locValue = PVar "rest"}]) (CCase (CApp (CApp (CVar "Lune.Scheduler.jobIdEq") (CVar "targetId")) (CVar "id")) [CoreAlt (PCon "Lune.Prelude.True" []) (CVar "Lune.Prelude.True"),CoreAlt (PCon "Lune.Prelude.False" []) (CApp (CApp (CVar "Lune.Scheduler.memberJobId") (CVar "targetId")) (CVar "rest"))])])),CoreDecl "" (CInt 0),CoreDecl "Lune.Scheduler.removeJob" (CLam [PVar "targetId",PVar "entries"] (CCase (CVar "entries") [CoreAlt (PCon "Lune.Prelude.Nil" []) (CVar "Lune.Prelude.Nil"),CoreAlt (PCon "Lune.Prelude.Cons" [Located {locSpan = Span {spanStartLine = 174, spanStartCol = 10, spanEndLine = 174, spanEndCol = 16}, locComments = Comments {commentsLeading = [], commentsTrailing = [], commentsInner = []}, locValue = PVar "entry"},Located {locSpan = Span {spanStartLine = 174, spanStartCol = 16, spanEndLine = 174, spanEndCol = 21}, locComments = Comments {commentsLeading = [], commentsTrailing = [], commentsInner = []}, locValue = PVar "rest"}]) (CCase (CApp (CApp (CVar "Lune.Scheduler.jobIdEq") (CVar "targetId")) (CSelect (CSelect (CVar "entry") "spec") "id")) [CoreAlt (PCon "Lune.Prelude.True" []) (CVar "rest"),CoreAlt (PCon "Lune.Prelude.False" []) (CApp (CApp (CVar "Lune.Prelude.Cons") (CVar "entry")) (CApp (CApp (CVar "Lune.Scheduler.removeJob") (CVar "targetId")) (CVar "rest")))])])),CoreDecl "" (CInt 0),CoreDecl "Lune.Scheduler.removeJobId" (CLam [PVar "targetId",PVar "ids"] (CCase (CVar "ids") [CoreAlt (PCon "Lune.Prelude.Nil" []) (CVar "Lune.Prelude.Nil"),CoreAlt (PCon "Lune.Prelude.Cons" [Located {locSpan = Span {spanStartLine = 184, spanStartCol = 10, spanEndLine = 184, spanEndCol = 13}, locComments = Comments {commentsLeading = [], commentsTrailing = [], commentsInner = []}, locValue = PVar "id"},Located {locSpan = Span {spanStartLine = 184, spanStartCol = 13, spanEndLine = 184, spanEndCol = 18}, locComments = Comments {commentsLeading = [], commentsTrailing = [], commentsInner = []}, locValue = PVar "rest"}]) (CCase (CApp (CApp (CVar "Lune.Scheduler.jobIdEq") (CVar "targetId")) (CVar "id")) [CoreAlt (PCon "Lune.Prelude.True" []) (CVar "rest"),CoreAlt (PCon "Lune.Prelude.False" []) (CApp (CApp (CVar "Lune.Prelude.Cons") (CVar "id")) (CApp (CApp (CVar "Lune.Scheduler.removeJobId") (CVar "targetId")) (CVar "rest")))])])),CoreDecl "" (CInt 0),CoreDecl "Lune.Scheduler.register" (CLam [PVar "sched",PVar "spec"] (CApp (CApp (CSelect (CVar "$dictMonad_Task") "andThen") (CApp (CVar "Lune.Atomic.commit") (CApp (CApp (CSelect (CVar "$dictMonad_STM") "andThen") (CApp (CVar "Lune.Atomic.read") (CSelect (CSelect (CVar "sched") "state") "jobs"))) (CLam [PVar "jobs"] (CCase (CApp (CApp (CVar "Lune.Scheduler.findJob") (CSelect (CVar "spec") "id")) (CVar "jobs")) [CoreAlt (PCon "Lune.Prelude.Just" [Located {locSpan = Span {spanStartLine = 202, spanStartCol = 16, spanEndLine = 202, spanEndCol = 25}, locComments = Comments {commentsLeading = [], commentsTrailing = [], commentsInner = []}, locValue = PVar "existing"}]) (CApp (CSelect (CVar "$dictApplicative_STM") "pure") (CApp (CVar "Lune.Prelude.Err") (CVar "Lune.Scheduler.JobAlreadyRegistered"))),CoreAlt (PCon "Lune.Prelude.Nothing" []) (CLet "entry" (CRecord [("spec",CVar "spec"),("timerFiber",CVar "Lune.Prelude.Nothing")]) (CApp (CApp (CSelect (CVar "$dictMonad_STM") "andThen") (CApp (CApp (CVar "Lune.Atomic.write") (CSelect (CSelect (CVar "sched") "state") "jobs")) (CApp (CApp (CVar "Lune.Prelude.Cons") (CVar "entry")) (CVar "jobs")))) (CLam [PWildcard] (CApp (CSelect (CVar "$dictApplicative_STM") "pure") (CApp (CVar "Lune.Prelude.Ok") (CVar "Lune.Prelude.unit"))))))]))))) (CLam [PVar "result"] (CCase (CVar "result") [CoreAlt (PCon "Lune.Prelude.Err" [Located {locSpan = Span {spanStartLine = 210, spanStartCol = 11, spanEndLine = 210, spanEndCol = 13}, locComments = Comments {commentsLeading = [], commentsTrailing = [], commentsInner = []}, locValue = PVar "e"}]) (CApp (CVar "Lune.Task.fail") (CVar "e")),CoreAlt (PCon "Lune.Prelude.Ok" [Located {locSpan = Span {spanStartLine = 211, spanStartCol = 10, spanEndLine = 211, spanEndCol = 12}, locComments = Comments {commentsLeading = [], commentsTrailing = [], commentsInner = []}, locValue = PVar "u"}]) (CApp (CApp (CVar "Lune.Scheduler.armSchedule") (CVar "sched")) (CVar "spec"))])))),CoreDecl "" (CInt 0),CoreDecl "Lune.Scheduler.armSchedule" (CLam [PVar "sched",PVar "spec"] (CCase (CSelect (CVar "spec") "schedule") [CoreAlt (PCon "Lune.Scheduler.Manual" []) (CApp (CVar "Lune.Task.succeed") (CVar "Lune.Prelude.unit")),CoreAlt (PCon "Lune.Scheduler.AfterMs" [Located {locSpan = Span {spanStartLine = 221, spanStartCol = 13, spanEndLine = 221, spanEndCol = 21}, locComments = Comments {commentsLeading = [], commentsTrailing = [], commentsInner = []}, locValue = PVar "delayMs"}]) (CApp (CApp (CSelect (CVar "$dictMonad_Task") "andThen") (CApp (CVar "Lune.Fiber.spawn") (CApp (CApp (CApp (CVar "Lune.Scheduler.afterMsTimer") (CVar "sched")) (CSelect (CVar "spec") "id")) (CVar "delayMs")))) (CLam [PWildcard] (CApp (CVar "Lune.Task.succeed") (CVar "Lune.Prelude.unit")))),CoreAlt (PCon "Lune.Scheduler.EveryMs" [Located {locSpan = Span {spanStartLine = 225, spanStartCol = 13, spanEndLine = 225, spanEndCol = 24}, locComments = Comments {commentsLeading = [], commentsTrailing = [], commentsInner = []}, locValue = PVar "intervalMs"}]) (CApp (CApp (CSelect (CVar "$dictMonad_Task") "andThen") (CApp (CVar "Lune.Fiber.spawn") (CApp (CApp (CApp (CVar "Lune.Scheduler.everyMsTimer") (CVar "sched")) (CSelect (CVar "spec") "id")) (CVar "intervalMs")))) (CLam [PWildcard] (CApp (CVar "Lune.Task.succeed") (CVar "Lune.Prelude.unit"))))])),CoreDecl "" (CInt 0),CoreDecl "Lune.Scheduler.afterMsTimer" (CLam [PVar "sched",PVar "jobId",PVar "delayMs"] (CApp (CApp (CSelect (CVar "$dictMonad_Task") "andThen") (CApp (CVar "Lune.IO.sleepMs") (CVar "delayMs"))) (CLam [PWildcard] (CApp (CApp (CSelect (CVar "$dictMonad_Task") "andThen") (CApp (CVar "Lune.Atomic.commit") (CApp (CVar "Lune.Atomic.read") (CSelect (CSelect (CVar "sched") "state") "running")))) (CLam [PVar "isRunning"] (CCase (CVar "isRunning") [CoreAlt (PCon "Lune.Prelude.False" []) (CApp (CVar "Lune.Task.succeed") (CVar "Lune.Prelude.unit")),CoreAlt (PCon "Lune.Prelude.True" []) (CApp (CApp (CVar "Lune.Scheduler.afterMsExecute") (CVar "sched")) (CVar "jobId"))])))))),CoreDecl "" (CInt 0),CoreDecl "Lune.Scheduler.afterMsExecute" (CLam [PVar "sched",PVar "jobId"] (CApp (CApp (CSelect (CVar "$dictMonad_Task") "andThen") (CApp (CVar "Lune.Atomic.commit") (CApp (CVar "Lune.Atomic.read") (CSelect (CSelect (CVar "sched") "state") "jobs")))) (CLam [PVar "jobs"] (CCase (CApp (CApp (CVar "Lune.Scheduler.findJob") (CVar "jobId")) (CVar "jobs")) [CoreAlt (PCon "Lune.Prelude.Nothing" []) (CApp (CVar "Lune.Task.succeed") (CVar "Lune.Prelude.unit")),CoreAlt (PCon "Lune.Prelude.Just" [Located {locSpan = Span {spanStartLine = 249, spanStartCol = 12, spanEndLine = 249, spanEndCol = 18}, locComments = Comments {commentsLeading = [], commentsTrailing = [], commentsInner = []}, locValue = PVar "entry"}]) (CApp (CApp (CSelect (CVar "$dictMonad_Task") "andThen") (CApp (CApp (CVar "Lune.Task.onError") (CSelect (CSelect (CVar "entry") "spec") "action")) (CLam [PVar "err"] (CApp (CVar "Lune.Task.succeed") (CVar "Lune.Prelude.unit"))))) (CLam [PWildcard] (CApp (CApp (CVar "Lune.Scheduler.unregisterInternal") (CVar "sched")) (CVar "jobId"))))])))),CoreDecl "" (CInt 0),CoreDecl "Lune.Scheduler.everyMsTimer" (CLam [PVar "sched",PVar "jobId",PVar "intervalMs"] (CApp (CApp (CSelect (CVar "$dictMonad_Task") "andThen") (CApp (CVar "Lune.IO.sleepMs") (CVar "intervalMs"))) (CLam [PWildcard] (CApp (CApp (CSelect (CVar "$dictMonad_Task") "andThen") (CApp (CVar "Lune.Atomic.commit") (CApp (CVar "Lune.Atomic.read") (CSelect (CSelect (CVar "sched") "state") "running")))) (CLam [PVar "isRunning"] (CCase (CVar "isRunning") [CoreAlt (PCon "Lune.Prelude.False" []) (CApp (CVar "Lune.Task.succeed") (CVar "Lune.Prelude.unit")),CoreAlt (PCon "Lune.Prelude.True" []) (CApp (CApp (CSelect (CVar "$dictMonad_Task") "andThen") (CApp (CApp (CVar "Lune.Scheduler.triggerInternal") (CVar "sched")) (CVar "jobId"))) (CLam [PWildcard] (CApp (CApp (CApp (CVar "Lune.Scheduler.everyMsTimer") (CVar "sched")) (CVar "jobId")) (CVar "intervalMs"))))])))))),CoreDecl "" (CInt 0),CoreDecl "Lune.Scheduler.unregister" (CLam [PVar "sched",PVar "jobId"] (CApp (CApp (CVar "Lune.Scheduler.unregisterInternal") (CVar "sched")) (CVar "jobId"))),CoreDecl "" (CInt 0),CoreDecl "Lune.Scheduler.unregisterInternal" (CLam [PVar "sched",PVar "jobId"] (CApp (CApp (CSelect (CVar "$dictMonad_Task") "andThen") (CApp (CVar "Lune.Atomic.commit") (CApp (CApp (CSelect (CVar "$dictMonad_STM") "andThen") (CApp (CVar "Lune.Atomic.read") (CSelect (CSelect (CVar "sched") "state") "jobs"))) (CLam [PVar "jobs"] (CApp (CApp (CVar "Lune.Atomic.write") (CSelect (CSelect (CVar "sched") "state") "jobs")) (CApp (CApp (CVar "Lune.Scheduler.removeJob") (CVar "jobId")) (CVar "jobs"))))))) (CLam [PWildcard] (CApp (CApp (CSelect (CVar "$dictMonad_Task") "andThen") (CApp (CVar "Lune.Atomic.commit") (CApp (CApp (CSelect (CVar "$dictMonad_STM") "andThen") (CApp (CVar "Lune.Atomic.read") (CSelect (CSelect (CVar "sched") "state") "queue"))) (CLam [PVar "queue"] (CApp (CApp (CVar "Lune.Atomic.write") (CSelect (CSelect (CVar "sched") "state") "queue")) (CApp (CApp (CVar "Lune.Scheduler.removeJobId") (CVar "jobId")) (CVar "queue"))))))) (CLam [PWildcard] (CApp (CApp (CSelect (CVar "$dictMonad_Task") "andThen") (CApp (CVar "Lune.Atomic.commit") (CApp (CApp (CSelect (CVar "$dictMonad_STM") "andThen") (CApp (CVar "Lune.Atomic.read") (CSelect (CSelect (CVar "sched") "state") "inFlight"))) (CLam [PVar "inFlight"] (CApp (CApp (CVar "Lune.Atomic.write") (CSelect (CSelect (CVar "sched") "state") "inFlight")) (CApp (CApp (CVar "Lune.Scheduler.removeJobId") (CVar "jobId")) (CVar "inFlight"))))))) (CLam [PWildcard] (CApp (CVar "Lune.Task.succeed") (CVar "Lune.Prelude.unit"))))))))),CoreDecl "" (CInt 0),CoreDecl "Lune.Scheduler.trigger" (CLam [PVar "sched",PVar "jobId"] (CApp (CApp (CSelect (CVar "$dictMonad_Task") "andThen") (CApp (CVar "Lune.Atomic.commit") (CApp (CVar "Lune.Atomic.read") (CSelect (CSelect (CVar "sched") "state") "running")))) (CLam [PVar "isRunning"] (CCase (CVar "isRunning") [CoreAlt (PCon "Lune.Prelude.False" []) (CApp (CVar "Lune.Task.fail") (CVar "Lune.Scheduler.SchedulerNotRunning")),CoreAlt (PCon "Lune.Prelude.True" []) (CApp (CApp (CSelect (CVar "$dictMonad_Task") "andThen") (CApp (CVar "Lune.Atomic.commit") (CApp (CApp (CSelect (CVar "$dictMonad_STM") "andThen") (CApp (CVar "Lune.Atomic.read") (CSelect (CSelect (CVar "sched") "state") "jobs"))) (CLam [PVar "jobs"] (CCase (CApp (CApp (CVar "Lune.Scheduler.findJob") (CVar "jobId")) (CVar "jobs")) [CoreAlt (PCon "Lune.Prelude.Nothing" []) (CApp (CSelect (CVar "$dictApplicative_STM") "pure") (CApp (CVar "Lune.Prelude.Err") (CVar "Lune.Scheduler.JobNotFound"))),CoreAlt (PCon "Lune.Prelude.Just" [Located {locSpan = Span {spanStartLine = 309, spanStartCol = 22, spanEndLine = 309, spanEndCol = 28}, locComments = Comments {commentsLeading = [], commentsTrailing = [], commentsInner = []}, locValue = PVar "entry"}]) (CApp (CApp (CSelect (CVar "$dictMonad_STM") "andThen") (CApp (CVar "Lune.Atomic.read") (CSelect (CSelect (CVar "sched") "state") "queue"))) (CLam [PVar "queue"] (CApp (CApp (CSelect (CVar "$dictMonad_STM") "andThen") (CApp (CApp (CVar "Lune.Atomic.write") (CSelect (CSelect (CVar "sched") "state") "queue")) (CApp (CApp (CVar "Lune.Prelude.Cons") (CVar "jobId")) (CVar "queue")))) (CLam [PWildcard] (CApp (CSelect (CVar "$dictApplicative_STM") "pure") (CApp (CVar "Lune.Prelude.Ok") (CVar "Lune.Prelude.unit")))))))]))))) (CLam [PVar "result"] (CCase (CVar "result") [CoreAlt (PCon "Lune.Prelude.Err" [Located {locSpan = Span {spanStartLine = 316, spanStartCol = 17, spanEndLine = 316, spanEndCol = 19}, locComments = Comments {commentsLeading = [], commentsTrailing = [], commentsInner = []}, locValue = PVar "e"}]) (CApp (CVar "Lune.Task.fail") (CVar "e")),CoreAlt (PCon "Lune.Prelude.Ok" [Located {locSpan = Span {spanStartLine = 317, spanStartCol = 16, spanEndLine = 317, spanEndCol = 18}, locComments = Comments {commentsLeading = [], commentsTrailing = [], commentsInner = []}, locValue = PVar "u"}]) (CApp (CVar "Lune.Task.succeed") (CVar "Lune.Prelude.unit"))])))])))),CoreDecl "" (CInt 0),CoreDecl "Lune.Scheduler.triggerInternal" (CLam [PVar "sched",PVar "jobId"] (CApp (CApp (CSelect (CVar "$dictMonad_Task") "andThen") (CApp (CVar "Lune.Atomic.commit") (CApp (CApp (CSelect (CVar "$dictMonad_STM") "andThen") (CApp (CVar "Lune.Atomic.read") (CSelect (CSelect (CVar "sched") "state") "queue"))) (CLam [PVar "queue"] (CApp (CApp (CVar "Lune.Atomic.write") (CSelect (CSelect (CVar "sched") "state") "queue")) (CApp (CApp (CVar "Lune.Prelude.Cons") (CVar "jobId")) (CVar "queue"))))))) (CLam [PWildcard] (CApp (CVar "Lune.Task.succeed") (CVar "Lune.Prelude.unit"))))),CoreDecl "" (CInt 0),CoreDecl "Lune.Scheduler.runnerLoop" (CLam [PVar "sched"] (CApp (CApp (CSelect (CVar "$dictMonad_Task") "andThen") (CApp (CVar "Lune.Atomic.commit") (CApp (CVar "Lune.Atomic.read") (CSelect (CSelect (CVar "sched") "state") "running")))) (CLam [PVar "isRunning"] (CCase (CVar "isRunning") [CoreAlt (PCon "Lune.Prelude.False" []) (CApp (CVar "Lune.Task.succeed") (CVar "Lune.Prelude.unit")),CoreAlt (PCon "Lune.Prelude.True" []) (CApp (CApp (CSelect (CVar "$dictMonad_Task") "andThen") (CApp (CVar "Lune.Atomic.commit") (CApp (CVar "Lune.Scheduler.tryDequeue") (CVar "sched")))) (CLam [PVar "maybeJob"] (CCase (CVar "maybeJob") [CoreAlt (PCon "Lune.Prelude.Nothing" []) (CApp (CApp (CSelect (CVar "$dictMonad_Task") "andThen") (CVar "Lune.Fiber.yield")) (CLam [PWildcard] (CApp (CVar "Lune.Scheduler.runnerLoop") (CVar "sched")))),CoreAlt (PCon "Lune.Prelude.Just" [Located {locSpan = Span {spanStartLine = 349, spanStartCol = 18, spanEndLine = 349, spanEndCol = 24}, locComments = Comments {commentsLeading = [], commentsTrailing = [], commentsInner = []}, locValue = PVar "entry"}]) (CApp (CApp (CSelect (CVar "$dictMonad_Task") "andThen") (CApp (CApp (CVar "Lune.Scheduler.executeJob") (CVar "sched")) (CVar "entry"))) (CLam [PWildcard] (CApp (CVar "Lune.Scheduler.runnerLoop") (CVar "sched"))))])))])))),CoreDecl "" (CInt 0),CoreDecl "Lune.Scheduler.tryDequeue" (CLam [PVar "sched"] (CApp (CApp (CSelect (CVar "$dictMonad_STM") "andThen") (CApp (CVar "Lune.Atomic.read") (CSelect (CSelect (CVar "sched") "state") "queue"))) (CLam [PVar "queue"] (CCase (CVar "queue") [CoreAlt (PCon "Lune.Prelude.Nil" []) (CApp (CSelect (CVar "$dictApplicative_STM") "pure") (CVar "Lune.Prelude.Nothing")),CoreAlt (PCon "Lune.Prelude.Cons" [Located {locSpan = Span {spanStartLine = 361, spanStartCol = 12, spanEndLine = 361, spanEndCol = 18}, locComments = Comments {commentsLeading = [], commentsTrailing = [], commentsInner = []}, locValue = PVar "jobId"},Located {locSpan = Span {spanStartLine = 361, spanStartCol = 18, spanEndLine = 361, spanEndCol = 23}, locComments = Comments {commentsLeading = [], commentsTrailing = [], commentsInner = []}, locValue = PVar "rest"}]) (CApp (CApp (CSelect (CVar "$dictMonad_STM") "andThen") (CApp (CApp (CVar "Lune.Atomic.write") (CSelect (CSelect (CVar "sched") "state") "queue")) (CVar "rest"))) (CLam [PWildcard] (CApp (CApp (CSelect (CVar "$dictMonad_STM") "andThen") (CApp (CVar "Lune.Atomic.read") (CSelect (CSelect (CVar "sched") "state") "jobs"))) (CLam [PVar "jobs"] (CCase (CApp (CApp (CVar "Lune.Scheduler.findJob") (CVar "jobId")) (CVar "jobs")) [CoreAlt (PCon "Lune.Prelude.Nothing" []) (CApp (CSelect (CVar "$dictApplicative_STM") "pure") (CVar "Lune.Prelude.Nothing")),CoreAlt (PCon "Lune.Prelude.Just" [Located {locSpan = Span {spanStartLine = 368, spanStartCol = 18, spanEndLine = 368, spanEndCol = 24}, locComments = Comments {commentsLeading = [], commentsTrailing = [], commentsInner = []}, locValue = PVar "entry"}]) (CCase (CSelect (CSelect (CVar "entry") "spec") "concurrency") [CoreAlt (PCon "Lune.Scheduler.AllowConcurrent" []) (CApp (CSelect (CVar "$dictApplicative_STM") "pure") (CApp (CVar "Lune.Prelude.Just") (CVar "entry"))),CoreAlt (PCon "Lune.Scheduler.OneInstance" []) (CApp (CApp (CSelect (CVar "$dictMonad_STM") "andThen") (CApp (CVar "Lune.Atomic.read") (CSelect (CSelect (CVar "sched") "state") "inFlight"))) (CLam [PVar "inFlight"] (CCase (CApp (CApp (CVar "Lune.Scheduler.memberJobId") (CVar "jobId")) (CVar "inFlight")) [CoreAlt (PCon "Lune.Prelude.True" []) (CApp (CSelect (CVar "$dictApplicative_STM") "pure") (CVar "Lune.Prelude.Nothing")),CoreAlt (PCon "Lune.Prelude.False" []) (CApp (CApp (CSelect (CVar "$dictMonad_STM") "andThen") (CApp (CApp (CVar "Lune.Atomic.write") (CSelect (CSelect (CVar "sched") "state") "inFlight")) (CApp (CApp (CVar "Lune.Prelude.Cons") (CVar "jobId")) (CVar "inFlight")))) (CLam [PWildcard] (CApp (CSelect (CVar "$dictApplicative_STM") "pure") (CApp (CVar "Lune.Prelude.Just") (CVar "entry")))))])))])])))))])))),CoreDecl "" (CInt 0),CoreDecl "Lune.Scheduler.executeJob" (CLam [PVar "sched",PVar "entry"] (CApp (CApp (CSelect (CVar "$dictMonad_Task") "andThen") (CApp (CApp (CVar "Lune.Task.onError") (CSelect (CSelect (CVar "entry") "spec") "action")) (CLam [PVar "err"] (CApp (CVar "Lune.Task.succeed") (CVar "Lune.Prelude.unit"))))) (CLam [PWildcard] (CCase (CSelect (CSelect (CVar "entry") "spec") "concurrency") [CoreAlt (PCon "Lune.Scheduler.AllowConcurrent" []) (CApp (CVar "Lune.Task.succeed") (CVar "Lune.Prelude.unit")),CoreAlt (PCon "Lune.Scheduler.OneInstance" []) (CApp (CApp (CSelect (CVar "$dictMonad_Task") "andThen") (CApp (CVar "Lune.Atomic.commit") (CApp (CApp (CSelect (CVar "$dictMonad_STM") "andThen") (CApp (CVar "Lune.Atomic.read") (CSelect (CSelect (CVar "sched") "state") "inFlight"))) (CLam [PVar "inFlight"] (CApp (CApp (CVar "Lune.Atomic.write") (CSelect (CSelect (CVar "sched") "state") "inFlight")) (CApp (CApp (CVar "Lune.Scheduler.removeJobId") (CSelect (CSelect (CVar "entry") "spec") "id")) (CVar "inFlight"))))))) (CLam [PWildcard] (CApp (CVar "Lune.Task.succeed") (CVar "Lune.Prelude.unit"))))])))),CoreDecl "" (CInt 0),CoreDecl "Scheduler.main" (CApp (CApp (CSelect (CVar "$dictMonad_Task") "andThen") (CApp (CVar "Lune.IO.println") (CString "Creating scheduler..."))) (CLam [PWildcard] (CApp (CApp (CSelect (CVar "$dictMonad_Task") "andThen") (CVar "Lune.Scheduler.new")) (CLam [PVar "sched"] (CApp (CApp (CSelect (CVar "$dictMonad_Task") "andThen") (CApp (CVar "Lune.IO.println") (CString "Registering periodic job..."))) (CLam [PWildcard] (CApp (CApp (CSelect (CVar "$dictMonad_Task") "andThen") (CApp (CVar "Scheduler.registerTick") (CVar "sched"))) (CLam [PWildcard] (CApp (CApp (CSelect (CVar "$dictMonad_Task") "andThen") (CApp (CVar "Lune.IO.println") (CString "Registering one-shot job..."))) (CLam [PWildcard] (CApp (CApp (CSelect (CVar "$dictMonad_Task") "andThen") (CApp (CVar "Scheduler.registerOneshot") (CVar "sched"))) (CLam [PWildcard] (CApp (CApp (CSelect (CVar "$dictMonad_Task") "andThen") (CApp (CVar "Lune.IO.println") (CString "Registering manual job..."))) (CLam [PWildcard] (CApp (CApp (CSelect (CVar "$dictMonad_Task") "andThen") (CApp (CVar "Scheduler.registerManual") (CVar "sched"))) (CLam [PWildcard] (CApp (CApp (CSelect (CVar "$dictMonad_Task") "andThen") (CApp (CVar "Lune.IO.println") (CString "Starting scheduler..."))) (CLam [PWildcard] (CApp (CApp (CSelect (CVar "$dictMonad_Task") "andThen") (CApp (CVar "Lune.Scheduler.start") (CVar "sched"))) (CLam [PWildcard] (CApp (CApp (CSelect (CVar "$dictMonad_Task") "andThen") (CApp (CVar "Lune.IO.sleepMs") (CInt 2700))) (CLam [PWildcard] (CApp (CApp (CSelect (CVar "$dictMonad_Task") "andThen") (CApp (CVar "Lune.IO.println") (CString "Triggering manual job..."))) (CLam [PWildcard] (CApp (CApp (CSelect (CVar "$dictMonad_Task") "andThen") (CApp (CApp (CVar "Lune.Task.onError") (CApp (CApp (CVar "Lune.Scheduler.trigger") (CVar "sched")) (CApp (CVar "Lune.Scheduler.JobId") (CString "manual")))) (CLam [PVar "e"] (CApp (CVar "Lune.Task.succeed") (CVar "Lune.Prelude.unit"))))) (CLam [PWildcard] (CApp (CApp (CSelect (CVar "$dictMonad_Task") "andThen") (CApp (CVar "Lune.IO.sleepMs") (CInt 1800))) (CLam [PWildcard] (CApp (CApp (CSelect (CVar "$dictMonad_Task") "andThen") (CApp (CVar "Lune.IO.println") (CString "Stopping scheduler..."))) (CLam [PWildcard] (CApp (CApp (CSelect (CVar "$dictMonad_Task") "andThen") (CApp (CVar "Lune.Scheduler.stop") (CVar "sched"))) (CLam [PWildcard] (CApp (CVar "Lune.IO.println") (CString "Done!")))))))))))))))))))))))))))))))))),CoreDecl "" (CInt 0),CoreDecl "Scheduler.registerTick" (CLam [PVar "sched"] (CApp (CApp (CVar "Lune.Task.onError") (CApp (CApp (CSelect (CVar "$dictMonad_Task") "andThen") (CApp (CApp (CVar "Lune.Scheduler.register") (CVar "sched")) (CRecord [("id",CApp (CVar "Lune.Scheduler.JobId") (CString "tick")),("schedule",CApp (CVar "Lune.Scheduler.EveryMs") (CInt 1000)),("concurrency",CVar "Lune.Scheduler.OneInstance"),("action",CApp (CVar "Lune.IO.println") (CString "  tick!"))]))) (CLam [PWildcard] (CApp (CVar "Lune.Task.succeed") (CVar "Lune.Prelude.unit"))))) (CLam [PVar "e"] (CApp (CVar "Lune.Task.succeed") (CVar "Lune.Prelude.unit"))))),CoreDecl "" (CInt 0),CoreDecl "Scheduler.registerOneshot" (CLam [PVar "sched"] (CApp (CApp (CVar "Lune.Task.onError") (CApp (CApp (CSelect (CVar "$dictMonad_Task") "andThen") (CApp (CApp (CVar "Lune.Scheduler.register") (CVar "sched")) (CRecord [("id",CApp (CVar "Lune.Scheduler.JobId") (CString "oneshot")),("schedule",CApp (CVar "Lune.Scheduler.AfterMs") (CInt 2500)),("concurrency",CVar "Lune.Scheduler.AllowConcurrent"),("action",CApp (CVar "Lune.IO.println") (CString "  oneshot fired!"))]))) (CLam [PWildcard] (CApp (CVar "Lune.Task.succeed") (CVar "Lune.Prelude.unit"))))) (CLam [PVar "e"] (CApp (CVar "Lune.Task.succeed") (CVar "Lune.Prelude.unit"))))),CoreDecl "" (CInt 0),CoreDecl "Scheduler.registerManual" (CLam [PVar "sched"] (CApp (CApp (CVar "Lune.Task.onError") (CApp (CApp (CSelect (CVar "$dictMonad_Task") "andThen") (CApp (CApp (CVar "Lune.Scheduler.register") (CVar "sched")) (CRecord [("id",CApp (CVar "Lune.Scheduler.JobId") (CString "manual")),("schedule",CVar "Lune.Scheduler.Manual"),("concurrency",CVar "Lune.Scheduler.OneInstance"),("action",CApp (CVar "Lune.IO.println") (CString "  manual job executed!"))]))) (CLam [PWildcard] (CApp (CVar "Lune.Task.succeed") (CVar "Lune.Prelude.unit"))))) (CLam [PVar "e"] (CApp (CVar "Lune.Task.succeed") (CVar "Lune.Prelude.unit")))))]}
