CoreModule {coreName = "DatabaseDecode", coreDecls = [CoreDecl "$dictFunctor_IO" (CRecord [("map",CLam [PVar "f",PVar "ma"] (CApp (CApp (CVar "$primIOBind") (CVar "ma")) (CLam [PVar "a"] (CApp (CVar "$primIOPure") (CApp (CVar "f") (CVar "a"))))))]),CoreDecl "$dictApplicative_IO" (CRecord [("$superFunctor",CVar "$dictFunctor_IO"),("pure",CVar "$primIOPure"),("apply",CLam [PVar "mf",PVar "ma"] (CApp (CApp (CVar "$primIOBind") (CVar "mf")) (CLam [PVar "f"] (CApp (CApp (CVar "$primIOBind") (CVar "ma")) (CLam [PVar "a"] (CApp (CVar "$primIOPure") (CApp (CVar "f") (CVar "a"))))))))]),CoreDecl "$dictMonad_IO" (CRecord [("$superApplicative",CVar "$dictApplicative_IO"),("andThen",CVar "$primIOBind"),("then",CVar "$primIOThen")]),CoreDecl "$dictFunctor_Result" (CRecord [("map",CLam [PVar "f",PVar "r"] (CCase (CVar "r") [CoreAlt (PCon "Lune.Prelude.Err" [PVar "e"]) (CApp (CVar "Lune.Prelude.Err") (CVar "e")),CoreAlt (PCon "Lune.Prelude.Ok" [PVar "a"]) (CApp (CVar "Lune.Prelude.Ok") (CApp (CVar "f") (CVar "a")))]))]),CoreDecl "$dictApplicative_Result" (CRecord [("$superFunctor",CVar "$dictFunctor_Result"),("pure",CLam [PVar "a"] (CApp (CVar "Lune.Prelude.Ok") (CVar "a"))),("apply",CLam [PVar "rf",PVar "ra"] (CCase (CVar "rf") [CoreAlt (PCon "Lune.Prelude.Err" [PVar "e"]) (CApp (CVar "Lune.Prelude.Err") (CVar "e")),CoreAlt (PCon "Lune.Prelude.Ok" [PVar "f"]) (CCase (CVar "ra") [CoreAlt (PCon "Lune.Prelude.Err" [PVar "e"]) (CApp (CVar "Lune.Prelude.Err") (CVar "e")),CoreAlt (PCon "Lune.Prelude.Ok" [PVar "a"]) (CApp (CVar "Lune.Prelude.Ok") (CApp (CVar "f") (CVar "a")))])]))]),CoreDecl "$dictMonad_Result" (CRecord [("$superApplicative",CVar "$dictApplicative_Result"),("andThen",CLam [PVar "m",PVar "k"] (CCase (CVar "m") [CoreAlt (PCon "Lune.Prelude.Ok" [PVar "a"]) (CApp (CVar "k") (CVar "a")),CoreAlt (PCon "Lune.Prelude.Err" [PVar "e"]) (CApp (CVar "Lune.Prelude.Err") (CVar "e"))])),("then",CLam [PVar "ra",PVar "rb"] (CCase (CVar "ra") [CoreAlt (PCon "Lune.Prelude.Ok" [PWildcard]) (CVar "rb"),CoreAlt (PCon "Lune.Prelude.Err" [PVar "e"]) (CApp (CVar "Lune.Prelude.Err") (CVar "e"))]))]),CoreDecl "$dictFunctor_STM" (CRecord [("map",CLam [PVar "f",PVar "ma"] (CApp (CApp (CVar "$primSTMBind") (CVar "ma")) (CLam [PVar "a"] (CApp (CVar "$primSTMPure") (CApp (CVar "f") (CVar "a"))))))]),CoreDecl "$dictApplicative_STM" (CRecord [("$superFunctor",CVar "$dictFunctor_STM"),("pure",CVar "$primSTMPure"),("apply",CLam [PVar "mf",PVar "ma"] (CApp (CApp (CVar "$primSTMBind") (CVar "mf")) (CLam [PVar "f"] (CApp (CApp (CVar "$primSTMBind") (CVar "ma")) (CLam [PVar "a"] (CApp (CVar "$primSTMPure") (CApp (CVar "f") (CVar "a"))))))))]),CoreDecl "$dictMonad_STM" (CRecord [("$superApplicative",CVar "$dictApplicative_STM"),("andThen",CVar "$primSTMBind"),("then",CLam [PVar "ma",PVar "mb"] (CApp (CApp (CVar "$primSTMBind") (CVar "ma")) (CLam [PWildcard] (CVar "mb"))))]),CoreDecl "$dictFunctor_Api" (CRecord [("map",CLam [PVar "f",PVar "ma"] (CApp (CApp (CVar "prim_apiAndThen") (CLam [PVar "a"] (CApp (CVar "prim_apiPure") (CApp (CVar "f") (CVar "a"))))) (CVar "ma")))]),CoreDecl "$dictApplicative_Api" (CRecord [("$superFunctor",CVar "$dictFunctor_Api"),("pure",CVar "prim_apiPure"),("apply",CLam [PVar "mf",PVar "ma"] (CApp (CApp (CVar "prim_apiAndThen") (CLam [PVar "f"] (CApp (CApp (CVar "prim_apiAndThen") (CLam [PVar "a"] (CApp (CVar "prim_apiPure") (CApp (CVar "f") (CVar "a"))))) (CVar "ma")))) (CVar "mf")))]),CoreDecl "$dictMonad_Api" (CRecord [("$superApplicative",CVar "$dictApplicative_Api"),("andThen",CLam [PVar "ma",PVar "k"] (CApp (CApp (CVar "prim_apiAndThen") (CVar "k")) (CVar "ma"))),("then",CLam [PVar "ma",PVar "mb"] (CApp (CApp (CVar "prim_apiAndThen") (CLam [PWildcard] (CVar "mb"))) (CVar "ma")))]),CoreDecl "Lune.Prelude.unit" (CVar "Lune.Prelude.Unit"),CoreDecl "Lune.Prelude.fst" (CLam [PVar "p"] (CCase (CVar "p") [CoreAlt (PCon "Lune.Prelude.Pair" [PVar "x",PWildcard]) (CVar "x")])),CoreDecl "Lune.Prelude.snd" (CLam [PVar "p"] (CCase (CVar "p") [CoreAlt (PCon "Lune.Prelude.Pair" [PWildcard,PVar "y"]) (CVar "y")])),CoreDecl "Lune.IO.println" (CVar "prim_putStrLn"),CoreDecl "Lune.IO.readLine" (CVar "prim_readLine"),CoreDecl "Lune.IO.readInt" (CVar "prim_readInt"),CoreDecl "Lune.IO.sleepMs" (CVar "prim_sleepMs"),CoreDecl "Lune.IO.readFile" (CVar "prim_readFile"),CoreDecl "Lune.IO.writeFile" (CVar "prim_writeFile"),CoreDecl "Lune.String.append" (CVar "prim_appendString"),CoreDecl "Lune.String.eq" (CVar "prim_eqString"),CoreDecl "Lune.String.fromInt" (CVar "prim_showInt"),CoreDecl "Lune.String.fromFloat" (CVar "prim_showFloat"),CoreDecl "Lune.String.toInt" (CVar "prim_parseInt"),CoreDecl "Lune.Database.errorToString" (CLam [PVar "err"] (CCase (CVar "err") [CoreAlt (PCon "Lune.Database.ConnectionFailed" [PVar "msg"]) (CApp (CApp (CVar "Lune.String.append") (CString "Connection failed: ")) (CVar "msg")),CoreAlt (PCon "Lune.Database.QueryFailed" [PVar "msg"]) (CApp (CApp (CVar "Lune.String.append") (CString "Query failed: ")) (CVar "msg")),CoreAlt (PCon "Lune.Database.InvalidConnection" []) (CString "Invalid database connection")])),CoreDecl "Lune.Database.null" (CVar "prim_dbNull"),CoreDecl "Lune.Database.int" (CVar "prim_dbInt"),CoreDecl "Lune.Database.float" (CVar "prim_dbFloat"),CoreDecl "Lune.Database.string" (CVar "prim_dbString"),CoreDecl "Lune.Database.bool" (CVar "prim_dbBool"),CoreDecl "Lune.Int.add" (CVar "prim_addInt"),CoreDecl "Lune.Int.sub" (CVar "prim_subInt"),CoreDecl "Lune.Int.mul" (CVar "prim_mulInt"),CoreDecl "Lune.Int.eq" (CVar "prim_eqInt"),CoreDecl "Lune.Int.gte" (CVar "prim_geInt"),CoreDecl "Lune.Int.lte" (CVar "prim_leInt"),CoreDecl "Lune.Float.add" (CVar "prim_addFloat"),CoreDecl "Lune.Float.sub" (CVar "prim_subFloat"),CoreDecl "Lune.Float.mul" (CVar "prim_mulFloat"),CoreDecl "Lune.Float.div" (CVar "prim_divFloat"),CoreDecl "Lune.Float.eq" (CVar "prim_eqFloat"),CoreDecl "Lune.Float.gt" (CVar "prim_gtFloat"),CoreDecl "Lune.Float.lt" (CVar "prim_ltFloat"),CoreDecl "Lune.Float.gte" (CVar "prim_geFloat"),CoreDecl "Lune.Float.lte" (CVar "prim_leFloat"),CoreDecl "Lune.Float.fromInt" (CVar "prim_fromIntFloat"),CoreDecl "Lune.Float.truncate" (CVar "prim_truncateFloat"),CoreDecl "Lune.Database.Decode.decodeRow" (CLam [PVar "decoder",PVar "row"] (CApp (CVar "decoder") (CVar "row"))),CoreDecl "Lune.Database.Decode.succeed" (CLam [PVar "value"] (CLam [PWildcard] (CApp (CVar "Lune.Prelude.Ok") (CVar "value")))),CoreDecl "Lune.Database.Decode.fail" (CLam [PVar "message"] (CLam [PWildcard] (CApp (CVar "Lune.Prelude.Err") (CRecord [("message",CVar "message"),("column",CInt 0)])))),CoreDecl "Lune.Database.Decode.index" (CLam [PVar "idx",PVar "decoder"] (CLam [PVar "row"] (CCase (CApp (CApp (CVar "Lune.Database.Decode.getAt") (CVar "idx")) (CVar "row")) [CoreAlt (PCon "Lune.Prelude.Nothing" []) (CApp (CVar "Lune.Prelude.Err") (CRecord [("message",CApp (CApp (CVar "Lune.String.append") (CString "Column index out of bounds: ")) (CApp (CVar "Lune.String.fromInt") (CVar "idx"))),("column",CVar "idx")])),CoreAlt (PCon "Lune.Prelude.Just" [PVar "val"]) (CCase (CApp (CVar "decoder") (CApp (CApp (CVar "Lune.Prelude.Cons") (CVar "val")) (CVar "Lune.Prelude.Nil"))) [CoreAlt (PCon "Lune.Prelude.Err" [PVar "err"]) (CApp (CVar "Lune.Prelude.Err") (CRecord [("message",CSelect (CVar "err") "message"),("column",CVar "idx")])),CoreAlt (PCon "Lune.Prelude.Ok" [PVar "a"]) (CApp (CVar "Lune.Prelude.Ok") (CVar "a"))])]))),CoreDecl "Lune.Database.Decode.getAt" (CLam [PVar "idx",PVar "xs"] (CCase (CVar "xs") [CoreAlt (PCon "Lune.Prelude.Nil" []) (CVar "Lune.Prelude.Nothing"),CoreAlt (PCon "Lune.Prelude.Cons" [PVar "x",PVar "rest"]) (CCase (CApp (CApp (CVar "Lune.Int.lte") (CVar "idx")) (CInt 0)) [CoreAlt (PCon "Lune.Prelude.True" []) (CApp (CVar "Lune.Prelude.Just") (CVar "x")),CoreAlt (PCon "Lune.Prelude.False" []) (CApp (CApp (CVar "Lune.Database.Decode.getAt") (CApp (CApp (CVar "Lune.Int.sub") (CVar "idx")) (CInt 1))) (CVar "rest"))])])),CoreDecl "Lune.Database.Decode.int" (CLam [PVar "row"] (CCase (CVar "row") [CoreAlt (PCon "Lune.Prelude.Cons" [PCon "Lune.Database.DbInt" [PVar "n"],PWildcard]) (CApp (CVar "Lune.Prelude.Ok") (CVar "n")),CoreAlt (PCon "Lune.Prelude.Cons" [PCon "Lune.Database.DbString" [PVar "s"],PWildcard]) (CCase (CApp (CVar "Lune.String.toInt") (CVar "s")) [CoreAlt (PCon "Lune.Prelude.Ok" [PVar "n"]) (CApp (CVar "Lune.Prelude.Ok") (CVar "n")),CoreAlt (PCon "Lune.Prelude.Err" [PWildcard]) (CApp (CVar "Lune.Prelude.Err") (CRecord [("message",CString "Expected integer"),("column",CInt 0)]))]),CoreAlt (PCon "Lune.Prelude.Cons" [PCon "Lune.Database.DbNull" [],PWildcard]) (CApp (CVar "Lune.Prelude.Err") (CRecord [("message",CString "Expected integer, got NULL"),("column",CInt 0)])),CoreAlt PWildcard (CApp (CVar "Lune.Prelude.Err") (CRecord [("message",CString "Expected integer"),("column",CInt 0)]))])),CoreDecl "Lune.Database.Decode.float" (CLam [PVar "row"] (CCase (CVar "row") [CoreAlt (PCon "Lune.Prelude.Cons" [PCon "Lune.Database.DbFloat" [PVar "f"],PWildcard]) (CApp (CVar "Lune.Prelude.Ok") (CVar "f")),CoreAlt (PCon "Lune.Prelude.Cons" [PCon "Lune.Database.DbInt" [PVar "n"],PWildcard]) (CApp (CVar "Lune.Prelude.Ok") (CApp (CVar "Lune.Float.fromInt") (CVar "n"))),CoreAlt (PCon "Lune.Prelude.Cons" [PCon "Lune.Database.DbString" [PVar "s"],PWildcard]) (CApp (CVar "Lune.Prelude.Err") (CRecord [("message",CString "Expected float"),("column",CInt 0)])),CoreAlt (PCon "Lune.Prelude.Cons" [PCon "Lune.Database.DbNull" [],PWildcard]) (CApp (CVar "Lune.Prelude.Err") (CRecord [("message",CString "Expected float, got NULL"),("column",CInt 0)])),CoreAlt PWildcard (CApp (CVar "Lune.Prelude.Err") (CRecord [("message",CString "Expected float"),("column",CInt 0)]))])),CoreDecl "Lune.Database.Decode.string" (CLam [PVar "row"] (CCase (CVar "row") [CoreAlt (PCon "Lune.Prelude.Cons" [PCon "Lune.Database.DbString" [PVar "s"],PWildcard]) (CApp (CVar "Lune.Prelude.Ok") (CVar "s")),CoreAlt (PCon "Lune.Prelude.Cons" [PCon "Lune.Database.DbInt" [PVar "n"],PWildcard]) (CApp (CVar "Lune.Prelude.Ok") (CApp (CVar "Lune.String.fromInt") (CVar "n"))),CoreAlt (PCon "Lune.Prelude.Cons" [PCon "Lune.Database.DbFloat" [PVar "f"],PWildcard]) (CApp (CVar "Lune.Prelude.Ok") (CApp (CVar "Lune.String.fromFloat") (CVar "f"))),CoreAlt (PCon "Lune.Prelude.Cons" [PCon "Lune.Database.DbBool" [PVar "b"],PWildcard]) (CCase (CVar "b") [CoreAlt (PCon "Lune.Prelude.True" []) (CApp (CVar "Lune.Prelude.Ok") (CString "true")),CoreAlt (PCon "Lune.Prelude.False" []) (CApp (CVar "Lune.Prelude.Ok") (CString "false"))]),CoreAlt (PCon "Lune.Prelude.Cons" [PCon "Lune.Database.DbNull" [],PWildcard]) (CApp (CVar "Lune.Prelude.Err") (CRecord [("message",CString "Expected string, got NULL"),("column",CInt 0)])),CoreAlt PWildcard (CApp (CVar "Lune.Prelude.Err") (CRecord [("message",CString "Expected string"),("column",CInt 0)]))])),CoreDecl "Lune.Database.Decode.bool" (CLam [PVar "row"] (CCase (CVar "row") [CoreAlt (PCon "Lune.Prelude.Cons" [PCon "Lune.Database.DbBool" [PVar "b"],PWildcard]) (CApp (CVar "Lune.Prelude.Ok") (CVar "b")),CoreAlt (PCon "Lune.Prelude.Cons" [PCon "Lune.Database.DbString" [PVar "s"],PWildcard]) (CApp (CVar "Lune.Database.Decode.parseBoolString") (CVar "s")),CoreAlt (PCon "Lune.Prelude.Cons" [PCon "Lune.Database.DbNull" [],PWildcard]) (CApp (CVar "Lune.Prelude.Err") (CRecord [("message",CString "Expected boolean, got NULL"),("column",CInt 0)])),CoreAlt PWildcard (CApp (CVar "Lune.Prelude.Err") (CRecord [("message",CString "Expected boolean"),("column",CInt 0)]))])),CoreDecl "Lune.Database.Decode.parseBoolString" (CLam [PVar "s"] (CCase (CApp (CApp (CVar "Lune.String.eq") (CVar "s")) (CString "t")) [CoreAlt (PCon "Lune.Prelude.True" []) (CApp (CVar "Lune.Prelude.Ok") (CVar "Lune.Prelude.True")),CoreAlt (PCon "Lune.Prelude.False" []) (CCase (CApp (CApp (CVar "Lune.String.eq") (CVar "s")) (CString "true")) [CoreAlt (PCon "Lune.Prelude.True" []) (CApp (CVar "Lune.Prelude.Ok") (CVar "Lune.Prelude.True")),CoreAlt (PCon "Lune.Prelude.False" []) (CCase (CApp (CApp (CVar "Lune.String.eq") (CVar "s")) (CString "1")) [CoreAlt (PCon "Lune.Prelude.True" []) (CApp (CVar "Lune.Prelude.Ok") (CVar "Lune.Prelude.True")),CoreAlt (PCon "Lune.Prelude.False" []) (CCase (CApp (CApp (CVar "Lune.String.eq") (CVar "s")) (CString "f")) [CoreAlt (PCon "Lune.Prelude.True" []) (CApp (CVar "Lune.Prelude.Ok") (CVar "Lune.Prelude.False")),CoreAlt (PCon "Lune.Prelude.False" []) (CCase (CApp (CApp (CVar "Lune.String.eq") (CVar "s")) (CString "false")) [CoreAlt (PCon "Lune.Prelude.True" []) (CApp (CVar "Lune.Prelude.Ok") (CVar "Lune.Prelude.False")),CoreAlt (PCon "Lune.Prelude.False" []) (CCase (CApp (CApp (CVar "Lune.String.eq") (CVar "s")) (CString "0")) [CoreAlt (PCon "Lune.Prelude.True" []) (CApp (CVar "Lune.Prelude.Ok") (CVar "Lune.Prelude.False")),CoreAlt (PCon "Lune.Prelude.False" []) (CApp (CVar "Lune.Prelude.Err") (CRecord [("message",CString "Expected boolean"),("column",CInt 0)]))])])])])])])),CoreDecl "Lune.Database.Decode.nullable" (CLam [PVar "decoder"] (CLam [PVar "row"] (CCase (CVar "row") [CoreAlt (PCon "Lune.Prelude.Cons" [PCon "Lune.Database.DbNull" [],PWildcard]) (CApp (CVar "Lune.Prelude.Ok") (CVar "Lune.Prelude.Nothing")),CoreAlt PWildcard (CCase (CApp (CVar "decoder") (CVar "row")) [CoreAlt (PCon "Lune.Prelude.Ok" [PVar "a"]) (CApp (CVar "Lune.Prelude.Ok") (CApp (CVar "Lune.Prelude.Just") (CVar "a"))),CoreAlt (PCon "Lune.Prelude.Err" [PVar "err"]) (CApp (CVar "Lune.Prelude.Err") (CVar "err"))])]))),CoreDecl "Lune.Database.Decode.map" (CLam [PVar "f",PVar "decoder"] (CLam [PVar "row"] (CCase (CApp (CVar "decoder") (CVar "row")) [CoreAlt (PCon "Lune.Prelude.Err" [PVar "err"]) (CApp (CVar "Lune.Prelude.Err") (CVar "err")),CoreAlt (PCon "Lune.Prelude.Ok" [PVar "a"]) (CApp (CVar "Lune.Prelude.Ok") (CApp (CVar "f") (CVar "a")))]))),CoreDecl "Lune.Database.Decode.map2" (CLam [PVar "f",PVar "decoderA",PVar "decoderB"] (CLam [PVar "row"] (CCase (CApp (CVar "decoderA") (CVar "row")) [CoreAlt (PCon "Lune.Prelude.Err" [PVar "err"]) (CApp (CVar "Lune.Prelude.Err") (CVar "err")),CoreAlt (PCon "Lune.Prelude.Ok" [PVar "a"]) (CCase (CApp (CVar "decoderB") (CVar "row")) [CoreAlt (PCon "Lune.Prelude.Err" [PVar "err"]) (CApp (CVar "Lune.Prelude.Err") (CVar "err")),CoreAlt (PCon "Lune.Prelude.Ok" [PVar "b"]) (CApp (CVar "Lune.Prelude.Ok") (CApp (CApp (CVar "f") (CVar "a")) (CVar "b")))])]))),CoreDecl "Lune.Database.Decode.map3" (CLam [PVar "f",PVar "da",PVar "db",PVar "dc"] (CLam [PVar "row"] (CCase (CApp (CVar "da") (CVar "row")) [CoreAlt (PCon "Lune.Prelude.Err" [PVar "err"]) (CApp (CVar "Lune.Prelude.Err") (CVar "err")),CoreAlt (PCon "Lune.Prelude.Ok" [PVar "a"]) (CCase (CApp (CVar "db") (CVar "row")) [CoreAlt (PCon "Lune.Prelude.Err" [PVar "err"]) (CApp (CVar "Lune.Prelude.Err") (CVar "err")),CoreAlt (PCon "Lune.Prelude.Ok" [PVar "b"]) (CCase (CApp (CVar "dc") (CVar "row")) [CoreAlt (PCon "Lune.Prelude.Err" [PVar "err"]) (CApp (CVar "Lune.Prelude.Err") (CVar "err")),CoreAlt (PCon "Lune.Prelude.Ok" [PVar "c"]) (CApp (CVar "Lune.Prelude.Ok") (CApp (CApp (CApp (CVar "f") (CVar "a")) (CVar "b")) (CVar "c")))])])]))),CoreDecl "Lune.Database.Decode.map4" (CLam [PVar "f",PVar "da",PVar "db",PVar "dc",PVar "dd"] (CLam [PVar "row"] (CCase (CApp (CVar "da") (CVar "row")) [CoreAlt (PCon "Lune.Prelude.Err" [PVar "err"]) (CApp (CVar "Lune.Prelude.Err") (CVar "err")),CoreAlt (PCon "Lune.Prelude.Ok" [PVar "a"]) (CCase (CApp (CVar "db") (CVar "row")) [CoreAlt (PCon "Lune.Prelude.Err" [PVar "err"]) (CApp (CVar "Lune.Prelude.Err") (CVar "err")),CoreAlt (PCon "Lune.Prelude.Ok" [PVar "b"]) (CCase (CApp (CVar "dc") (CVar "row")) [CoreAlt (PCon "Lune.Prelude.Err" [PVar "err"]) (CApp (CVar "Lune.Prelude.Err") (CVar "err")),CoreAlt (PCon "Lune.Prelude.Ok" [PVar "c"]) (CCase (CApp (CVar "dd") (CVar "row")) [CoreAlt (PCon "Lune.Prelude.Err" [PVar "err"]) (CApp (CVar "Lune.Prelude.Err") (CVar "err")),CoreAlt (PCon "Lune.Prelude.Ok" [PVar "d"]) (CApp (CVar "Lune.Prelude.Ok") (CApp (CApp (CApp (CApp (CVar "f") (CVar "a")) (CVar "b")) (CVar "c")) (CVar "d")))])])])]))),CoreDecl "Lune.Database.Decode.map5" (CLam [PVar "fn",PVar "da",PVar "db",PVar "dc",PVar "dd",PVar "de"] (CLam [PVar "row"] (CCase (CApp (CVar "da") (CVar "row")) [CoreAlt (PCon "Lune.Prelude.Err" [PVar "err"]) (CApp (CVar "Lune.Prelude.Err") (CVar "err")),CoreAlt (PCon "Lune.Prelude.Ok" [PVar "a"]) (CCase (CApp (CVar "db") (CVar "row")) [CoreAlt (PCon "Lune.Prelude.Err" [PVar "err"]) (CApp (CVar "Lune.Prelude.Err") (CVar "err")),CoreAlt (PCon "Lune.Prelude.Ok" [PVar "b"]) (CCase (CApp (CVar "dc") (CVar "row")) [CoreAlt (PCon "Lune.Prelude.Err" [PVar "err"]) (CApp (CVar "Lune.Prelude.Err") (CVar "err")),CoreAlt (PCon "Lune.Prelude.Ok" [PVar "c"]) (CCase (CApp (CVar "dd") (CVar "row")) [CoreAlt (PCon "Lune.Prelude.Err" [PVar "err"]) (CApp (CVar "Lune.Prelude.Err") (CVar "err")),CoreAlt (PCon "Lune.Prelude.Ok" [PVar "d"]) (CCase (CApp (CVar "de") (CVar "row")) [CoreAlt (PCon "Lune.Prelude.Err" [PVar "err"]) (CApp (CVar "Lune.Prelude.Err") (CVar "err")),CoreAlt (PCon "Lune.Prelude.Ok" [PVar "e"]) (CApp (CVar "Lune.Prelude.Ok") (CApp (CApp (CApp (CApp (CApp (CVar "fn") (CVar "a")) (CVar "b")) (CVar "c")) (CVar "d")) (CVar "e")))])])])])]))),CoreDecl "Lune.Database.Decode.andThen" (CLam [PVar "continuation",PVar "decoder"] (CLam [PVar "row"] (CCase (CApp (CVar "decoder") (CVar "row")) [CoreAlt (PCon "Lune.Prelude.Err" [PVar "err"]) (CApp (CVar "Lune.Prelude.Err") (CVar "err")),CoreAlt (PCon "Lune.Prelude.Ok" [PVar "a"]) (CApp (CApp (CVar "continuation") (CVar "a")) (CVar "row"))]))),CoreDecl "Lune.Database.Decode.errorToString" (CLam [PVar "err"] (CApp (CApp (CVar "Lune.String.append") (CString "Decode error at column ")) (CApp (CApp (CVar "Lune.String.append") (CApp (CVar "Lune.String.fromInt") (CSelect (CVar "err") "column"))) (CApp (CApp (CVar "Lune.String.append") (CString ": ")) (CSelect (CVar "err") "message"))))),CoreDecl "DatabaseDecode.userDecoder" (CApp (CApp (CApp (CApp (CVar "Lune.Database.Decode.map3") (CLam [PVar "id",PVar "name",PVar "email"] (CRecord [("id",CVar "id"),("name",CVar "name"),("email",CVar "email")]))) (CApp (CApp (CVar "Lune.Database.Decode.index") (CInt 0)) (CVar "Lune.Database.Decode.int"))) (CApp (CApp (CVar "Lune.Database.Decode.index") (CInt 1)) (CVar "Lune.Database.Decode.string"))) (CApp (CApp (CVar "Lune.Database.Decode.index") (CInt 2)) (CVar "Lune.Database.Decode.string"))),CoreDecl "DatabaseDecode.productDecoder" (CApp (CApp (CApp (CApp (CVar "Lune.Database.Decode.map3") (CLam [PVar "id",PVar "name",PVar "desc"] (CRecord [("id",CVar "id"),("name",CVar "name"),("description",CVar "desc")]))) (CApp (CApp (CVar "Lune.Database.Decode.index") (CInt 0)) (CVar "Lune.Database.Decode.int"))) (CApp (CApp (CVar "Lune.Database.Decode.index") (CInt 1)) (CVar "Lune.Database.Decode.string"))) (CApp (CApp (CVar "Lune.Database.Decode.index") (CInt 2)) (CApp (CVar "Lune.Database.Decode.nullable") (CVar "Lune.Database.Decode.string")))),CoreDecl "DatabaseDecode.userRow" (CApp (CApp (CVar "Lune.Prelude.Cons") (CApp (CVar "Lune.Database.DbInt") (CInt 42))) (CApp (CApp (CVar "Lune.Prelude.Cons") (CApp (CVar "Lune.Database.DbString") (CString "Alice"))) (CApp (CApp (CVar "Lune.Prelude.Cons") (CApp (CVar "Lune.Database.DbString") (CString "alice@example.com"))) (CVar "Lune.Prelude.Nil")))),CoreDecl "DatabaseDecode.productRowWithDesc" (CApp (CApp (CVar "Lune.Prelude.Cons") (CApp (CVar "Lune.Database.DbInt") (CInt 1))) (CApp (CApp (CVar "Lune.Prelude.Cons") (CApp (CVar "Lune.Database.DbString") (CString "Widget"))) (CApp (CApp (CVar "Lune.Prelude.Cons") (CApp (CVar "Lune.Database.DbString") (CString "A useful widget"))) (CVar "Lune.Prelude.Nil")))),CoreDecl "DatabaseDecode.productRowNullDesc" (CApp (CApp (CVar "Lune.Prelude.Cons") (CApp (CVar "Lune.Database.DbInt") (CInt 2))) (CApp (CApp (CVar "Lune.Prelude.Cons") (CApp (CVar "Lune.Database.DbString") (CString "Gadget"))) (CApp (CApp (CVar "Lune.Prelude.Cons") (CVar "Lune.Database.DbNull")) (CVar "Lune.Prelude.Nil")))),CoreDecl "DatabaseDecode.badRow" (CApp (CApp (CVar "Lune.Prelude.Cons") (CApp (CVar "Lune.Database.DbString") (CString "not-an-int"))) (CApp (CApp (CVar "Lune.Prelude.Cons") (CApp (CVar "Lune.Database.DbString") (CString "Bob"))) (CApp (CApp (CVar "Lune.Prelude.Cons") (CApp (CVar "Lune.Database.DbString") (CString "bob@example.com"))) (CVar "Lune.Prelude.Nil")))),CoreDecl "DatabaseDecode.main" (CApp (CApp (CSelect (CVar "$dictMonad_IO") "then") (CApp (CVar "Lune.IO.println") (CString "=== Database Decode Examples ==="))) (CApp (CApp (CSelect (CVar "$dictMonad_IO") "then") (CApp (CVar "Lune.IO.println") (CString ""))) (CApp (CApp (CSelect (CVar "$dictMonad_IO") "then") (CVar "DatabaseDecode.decodeUserExample")) (CApp (CApp (CSelect (CVar "$dictMonad_IO") "then") (CApp (CVar "Lune.IO.println") (CString ""))) (CApp (CApp (CSelect (CVar "$dictMonad_IO") "then") (CVar "DatabaseDecode.decodeProductWithDesc")) (CApp (CApp (CSelect (CVar "$dictMonad_IO") "then") (CApp (CVar "Lune.IO.println") (CString ""))) (CApp (CApp (CSelect (CVar "$dictMonad_IO") "then") (CVar "DatabaseDecode.decodeProductNullDesc")) (CApp (CApp (CSelect (CVar "$dictMonad_IO") "then") (CApp (CVar "Lune.IO.println") (CString ""))) (CApp (CApp (CSelect (CVar "$dictMonad_IO") "then") (CVar "DatabaseDecode.decodeErrorExample")) (CApp (CApp (CSelect (CVar "$dictMonad_IO") "then") (CApp (CVar "Lune.IO.println") (CString ""))) (CApp (CVar "Lune.IO.println") (CString "Done!")))))))))))),CoreDecl "DatabaseDecode.decodeUserExample" (CApp (CApp (CSelect (CVar "$dictMonad_IO") "then") (CApp (CVar "Lune.IO.println") (CString "Decoding user row: [42, 'Alice', 'alice@example.com']"))) (CCase (CApp (CApp (CVar "Lune.Database.Decode.decodeRow") (CVar "DatabaseDecode.userDecoder")) (CVar "DatabaseDecode.userRow")) [CoreAlt (PCon "Lune.Prelude.Err" [PVar "err"]) (CApp (CVar "Lune.IO.println") (CApp (CApp (CVar "Lune.String.append") (CString "Error: ")) (CApp (CVar "Lune.Database.Decode.errorToString") (CVar "err")))),CoreAlt (PCon "Lune.Prelude.Ok" [PVar "user"]) (CApp (CApp (CSelect (CVar "$dictMonad_IO") "then") (CApp (CVar "Lune.IO.println") (CApp (CApp (CVar "Lune.String.append") (CString "  id: ")) (CApp (CVar "Lune.String.fromInt") (CSelect (CVar "user") "id"))))) (CApp (CApp (CSelect (CVar "$dictMonad_IO") "then") (CApp (CVar "Lune.IO.println") (CApp (CApp (CVar "Lune.String.append") (CString "  name: ")) (CSelect (CVar "user") "name")))) (CApp (CVar "Lune.IO.println") (CApp (CApp (CVar "Lune.String.append") (CString "  email: ")) (CSelect (CVar "user") "email")))))])),CoreDecl "DatabaseDecode.decodeProductWithDesc" (CApp (CApp (CSelect (CVar "$dictMonad_IO") "then") (CApp (CVar "Lune.IO.println") (CString "Decoding product with description: [1, 'Widget', 'A useful widget']"))) (CCase (CApp (CApp (CVar "Lune.Database.Decode.decodeRow") (CVar "DatabaseDecode.productDecoder")) (CVar "DatabaseDecode.productRowWithDesc")) [CoreAlt (PCon "Lune.Prelude.Err" [PVar "err"]) (CApp (CVar "Lune.IO.println") (CApp (CApp (CVar "Lune.String.append") (CString "Error: ")) (CApp (CVar "Lune.Database.Decode.errorToString") (CVar "err")))),CoreAlt (PCon "Lune.Prelude.Ok" [PVar "product"]) (CApp (CApp (CSelect (CVar "$dictMonad_IO") "then") (CApp (CVar "Lune.IO.println") (CApp (CApp (CVar "Lune.String.append") (CString "  id: ")) (CApp (CVar "Lune.String.fromInt") (CSelect (CVar "product") "id"))))) (CApp (CApp (CSelect (CVar "$dictMonad_IO") "then") (CApp (CVar "Lune.IO.println") (CApp (CApp (CVar "Lune.String.append") (CString "  name: ")) (CSelect (CVar "product") "name")))) (CApp (CVar "DatabaseDecode.printDescription") (CSelect (CVar "product") "description"))))])),CoreDecl "DatabaseDecode.decodeProductNullDesc" (CApp (CApp (CSelect (CVar "$dictMonad_IO") "then") (CApp (CVar "Lune.IO.println") (CString "Decoding product with NULL description: [2, 'Gadget', NULL]"))) (CCase (CApp (CApp (CVar "Lune.Database.Decode.decodeRow") (CVar "DatabaseDecode.productDecoder")) (CVar "DatabaseDecode.productRowNullDesc")) [CoreAlt (PCon "Lune.Prelude.Err" [PVar "err"]) (CApp (CVar "Lune.IO.println") (CApp (CApp (CVar "Lune.String.append") (CString "Error: ")) (CApp (CVar "Lune.Database.Decode.errorToString") (CVar "err")))),CoreAlt (PCon "Lune.Prelude.Ok" [PVar "product"]) (CApp (CApp (CSelect (CVar "$dictMonad_IO") "then") (CApp (CVar "Lune.IO.println") (CApp (CApp (CVar "Lune.String.append") (CString "  id: ")) (CApp (CVar "Lune.String.fromInt") (CSelect (CVar "product") "id"))))) (CApp (CApp (CSelect (CVar "$dictMonad_IO") "then") (CApp (CVar "Lune.IO.println") (CApp (CApp (CVar "Lune.String.append") (CString "  name: ")) (CSelect (CVar "product") "name")))) (CApp (CVar "DatabaseDecode.printDescription") (CSelect (CVar "product") "description"))))])),CoreDecl "DatabaseDecode.printDescription" (CLam [PVar "desc"] (CCase (CVar "desc") [CoreAlt (PCon "Lune.Prelude.Nothing" []) (CApp (CVar "Lune.IO.println") (CString "  description: (none)")),CoreAlt (PCon "Lune.Prelude.Just" [PVar "d"]) (CApp (CVar "Lune.IO.println") (CApp (CApp (CVar "Lune.String.append") (CString "  description: ")) (CVar "d")))])),CoreDecl "DatabaseDecode.decodeErrorExample" (CApp (CApp (CSelect (CVar "$dictMonad_IO") "then") (CApp (CVar "Lune.IO.println") (CString "Decoding bad row (string instead of int): ['not-an-int', 'Bob', 'bob@example.com']"))) (CCase (CApp (CApp (CVar "Lune.Database.Decode.decodeRow") (CVar "DatabaseDecode.userDecoder")) (CVar "DatabaseDecode.badRow")) [CoreAlt (PCon "Lune.Prelude.Err" [PVar "err"]) (CApp (CVar "Lune.IO.println") (CApp (CApp (CVar "Lune.String.append") (CString "Expected error: ")) (CApp (CVar "Lune.Database.Decode.errorToString") (CVar "err")))),CoreAlt (PCon "Lune.Prelude.Ok" [PWildcard]) (CApp (CVar "Lune.IO.println") (CString "Unexpected success!"))]))]}
