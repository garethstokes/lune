CoreModule {coreName = "NovaDemo", coreDecls = [CoreDecl "$dictFunctor_IO" (CRecord [("map",CLam [PVar "f",PVar "ma"] (CApp (CApp (CVar "$primIOBind") (CVar "ma")) (CLam [PVar "a"] (CApp (CVar "$primIOPure") (CApp (CVar "f") (CVar "a"))))))]),CoreDecl "$dictApplicative_IO" (CRecord [("$superFunctor",CVar "$dictFunctor_IO"),("pure",CVar "$primIOPure"),("apply",CLam [PVar "mf",PVar "ma"] (CApp (CApp (CVar "$primIOBind") (CVar "mf")) (CLam [PVar "f"] (CApp (CApp (CVar "$primIOBind") (CVar "ma")) (CLam [PVar "a"] (CApp (CVar "$primIOPure") (CApp (CVar "f") (CVar "a"))))))))]),CoreDecl "$dictMonad_IO" (CRecord [("$superApplicative",CVar "$dictApplicative_IO"),("andThen",CVar "$primIOBind"),("then",CVar "$primIOThen")]),CoreDecl "$dictFunctor_Task" (CRecord [("map",CLam [PVar "f",PVar "ta"] (CCase (CVar "ta") [CoreAlt (PCon "Lune.Prelude.Task" [PVar "io"]) (CApp (CVar "Lune.Prelude.Task") (CApp (CApp (CVar "$primIOBind") (CVar "io")) (CLam [PVar "r"] (CCase (CVar "r") [CoreAlt (PCon "Lune.Prelude.Err" [PVar "e"]) (CApp (CVar "$primIOPure") (CApp (CVar "Lune.Prelude.Err") (CVar "e"))),CoreAlt (PCon "Lune.Prelude.Ok" [PVar "a"]) (CApp (CVar "$primIOPure") (CApp (CVar "Lune.Prelude.Ok") (CApp (CVar "f") (CVar "a"))))]))))]))]),CoreDecl "$dictApplicative_Task" (CRecord [("$superFunctor",CVar "$dictFunctor_Task"),("pure",CLam [PVar "a"] (CApp (CVar "Lune.Prelude.Task") (CApp (CVar "$primIOPure") (CApp (CVar "Lune.Prelude.Ok") (CVar "a"))))),("apply",CLam [PVar "tf",PVar "ta"] (CCase (CVar "tf") [CoreAlt (PCon "Lune.Prelude.Task" [PVar "ioF"]) (CCase (CVar "ta") [CoreAlt (PCon "Lune.Prelude.Task" [PVar "ioA"]) (CApp (CVar "Lune.Prelude.Task") (CApp (CApp (CVar "$primIOBind") (CVar "ioF")) (CLam [PVar "rf"] (CCase (CVar "rf") [CoreAlt (PCon "Lune.Prelude.Err" [PVar "e"]) (CApp (CVar "$primIOPure") (CApp (CVar "Lune.Prelude.Err") (CVar "e"))),CoreAlt (PCon "Lune.Prelude.Ok" [PVar "f"]) (CApp (CApp (CVar "$primIOBind") (CVar "ioA")) (CLam [PVar "ra"] (CCase (CVar "ra") [CoreAlt (PCon "Lune.Prelude.Err" [PVar "e"]) (CApp (CVar "$primIOPure") (CApp (CVar "Lune.Prelude.Err") (CVar "e"))),CoreAlt (PCon "Lune.Prelude.Ok" [PVar "a"]) (CApp (CVar "$primIOPure") (CApp (CVar "Lune.Prelude.Ok") (CApp (CVar "f") (CVar "a"))))])))]))))])]))]),CoreDecl "$dictMonad_Task" (CRecord [("$superApplicative",CVar "$dictApplicative_Task"),("andThen",CLam [PVar "ta",PVar "k"] (CCase (CVar "ta") [CoreAlt (PCon "Lune.Prelude.Task" [PVar "io"]) (CApp (CVar "Lune.Prelude.Task") (CApp (CApp (CVar "$primIOBind") (CVar "io")) (CLam [PVar "r"] (CCase (CVar "r") [CoreAlt (PCon "Lune.Prelude.Err" [PVar "e"]) (CApp (CVar "$primIOPure") (CApp (CVar "Lune.Prelude.Err") (CVar "e"))),CoreAlt (PCon "Lune.Prelude.Ok" [PVar "a"]) (CCase (CApp (CVar "k") (CVar "a")) [CoreAlt (PCon "Lune.Prelude.Task" [PVar "io2"]) (CVar "io2")])]))))])),("then",CLam [PVar "ta",PVar "tb"] (CCase (CVar "ta") [CoreAlt (PCon "Lune.Prelude.Task" [PVar "ioA"]) (CCase (CVar "tb") [CoreAlt (PCon "Lune.Prelude.Task" [PVar "ioB"]) (CApp (CVar "Lune.Prelude.Task") (CApp (CApp (CVar "$primIOBind") (CVar "ioA")) (CLam [PVar "r"] (CCase (CVar "r") [CoreAlt (PCon "Lune.Prelude.Err" [PVar "e"]) (CApp (CVar "$primIOPure") (CApp (CVar "Lune.Prelude.Err") (CVar "e"))),CoreAlt (PCon "Lune.Prelude.Ok" [PWildcard]) (CVar "ioB")]))))])]))]),CoreDecl "$dictFunctor_Result" (CRecord [("map",CLam [PVar "f",PVar "r"] (CCase (CVar "r") [CoreAlt (PCon "Lune.Prelude.Err" [PVar "e"]) (CApp (CVar "Lune.Prelude.Err") (CVar "e")),CoreAlt (PCon "Lune.Prelude.Ok" [PVar "a"]) (CApp (CVar "Lune.Prelude.Ok") (CApp (CVar "f") (CVar "a")))]))]),CoreDecl "$dictApplicative_Result" (CRecord [("$superFunctor",CVar "$dictFunctor_Result"),("pure",CLam [PVar "a"] (CApp (CVar "Lune.Prelude.Ok") (CVar "a"))),("apply",CLam [PVar "rf",PVar "ra"] (CCase (CVar "rf") [CoreAlt (PCon "Lune.Prelude.Err" [PVar "e"]) (CApp (CVar "Lune.Prelude.Err") (CVar "e")),CoreAlt (PCon "Lune.Prelude.Ok" [PVar "f"]) (CCase (CVar "ra") [CoreAlt (PCon "Lune.Prelude.Err" [PVar "e"]) (CApp (CVar "Lune.Prelude.Err") (CVar "e")),CoreAlt (PCon "Lune.Prelude.Ok" [PVar "a"]) (CApp (CVar "Lune.Prelude.Ok") (CApp (CVar "f") (CVar "a")))])]))]),CoreDecl "$dictMonad_Result" (CRecord [("$superApplicative",CVar "$dictApplicative_Result"),("andThen",CLam [PVar "m",PVar "k"] (CCase (CVar "m") [CoreAlt (PCon "Lune.Prelude.Ok" [PVar "a"]) (CApp (CVar "k") (CVar "a")),CoreAlt (PCon "Lune.Prelude.Err" [PVar "e"]) (CApp (CVar "Lune.Prelude.Err") (CVar "e"))])),("then",CLam [PVar "ra",PVar "rb"] (CCase (CVar "ra") [CoreAlt (PCon "Lune.Prelude.Ok" [PWildcard]) (CVar "rb"),CoreAlt (PCon "Lune.Prelude.Err" [PVar "e"]) (CApp (CVar "Lune.Prelude.Err") (CVar "e"))]))]),CoreDecl "$dictFunctor_STM" (CRecord [("map",CLam [PVar "f",PVar "ma"] (CApp (CApp (CVar "$primSTMBind") (CVar "ma")) (CLam [PVar "a"] (CApp (CVar "$primSTMPure") (CApp (CVar "f") (CVar "a"))))))]),CoreDecl "$dictApplicative_STM" (CRecord [("$superFunctor",CVar "$dictFunctor_STM"),("pure",CVar "$primSTMPure"),("apply",CLam [PVar "mf",PVar "ma"] (CApp (CApp (CVar "$primSTMBind") (CVar "mf")) (CLam [PVar "f"] (CApp (CApp (CVar "$primSTMBind") (CVar "ma")) (CLam [PVar "a"] (CApp (CVar "$primSTMPure") (CApp (CVar "f") (CVar "a"))))))))]),CoreDecl "$dictMonad_STM" (CRecord [("$superApplicative",CVar "$dictApplicative_STM"),("andThen",CVar "$primSTMBind"),("then",CLam [PVar "ma",PVar "mb"] (CApp (CApp (CVar "$primSTMBind") (CVar "ma")) (CLam [PWildcard] (CVar "mb"))))]),CoreDecl "$dictJson.Decode_Bool" (CRecord [("decoder",CVar "Lune.Json.Decode.bool")]),CoreDecl "$dictJson.Decode_Float" (CRecord [("decoder",CVar "Lune.Json.Decode.float")]),CoreDecl "$dictJson.Decode_Int" (CRecord [("decoder",CVar "Lune.Json.Decode.int")]),CoreDecl "$dictJson.Decode_Json" (CRecord [("decoder",CLam [PVar "j"] (CApp (CVar "Lune.Prelude.Ok") (CVar "j")))]),CoreDecl "$dictJson.Decode_String" (CRecord [("decoder",CVar "Lune.Json.Decode.string")]),CoreDecl "$dictMonoid_Template" (CRecord [("$superSemigroup",CVar "$dictSemigroup_Template"),("mconcat",CLam [PVar "xs"] (CApp (CApp (CApp (CVar "Lune.List.foldl") (CSelect (CVar "$dictSemigroup_Template") "<>")) (CSelect (CVar "$dictMonoid_Template") "mempty")) (CVar "xs"))),("mempty",CVar "Template.empty")]),CoreDecl "$dictSemigroup_Template" (CRecord [("<>",CVar "Template.append")]),CoreDecl "$dictToTemplate_Bool" (CRecord [("toTemplate",CLam [PVar "b"] (CCase (CVar "b") [CoreAlt (PCon "Lune.Prelude.True" []) (CApp (CVar "Template.text") (CString "True")),CoreAlt (PCon "Lune.Prelude.False" []) (CApp (CVar "Template.text") (CString "False"))]))]),CoreDecl "$dictToTemplate_Char" (CRecord [("toTemplate",CLam [PVar "c"] (CApp (CVar "Template.text") (CApp (CVar "Lune.String.fromChar") (CVar "c"))))]),CoreDecl "$dictToTemplate_Float" (CRecord [("toTemplate",CLam [PVar "n"] (CApp (CVar "Template.text") (CApp (CVar "prim_showFloat") (CVar "n"))))]),CoreDecl "$dictToTemplate_Int" (CRecord [("toTemplate",CLam [PVar "n"] (CApp (CVar "Template.text") (CApp (CVar "prim_showInt") (CVar "n"))))]),CoreDecl "$dictToTemplate_String" (CRecord [("toTemplate",CLam [PVar "s"] (CApp (CVar "Template.text") (CVar "s")))]),CoreDecl "$dictToTemplate_Template" (CRecord [("toTemplate",CLam [PVar "t"] (CVar "t"))]),CoreDecl "" (CInt 0),CoreDecl "" (CInt 0),CoreDecl "Lune.Prelude.unit" (CVar "Lune.Prelude.Unit"),CoreDecl "" (CInt 0),CoreDecl "" (CInt 0),CoreDecl "" (CInt 0),CoreDecl "" (CInt 0),CoreDecl "" (CInt 0),CoreDecl "" (CInt 0),CoreDecl "" (CInt 0),CoreDecl "" (CInt 0),CoreDecl "" (CInt 0),CoreDecl "" (CInt 0),CoreDecl "" (CInt 0),CoreDecl "" (CInt 0),CoreDecl "" (CInt 0),CoreDecl "Lune.Prelude.fst" (CLam [PVar "p"] (CCase (CVar "p") [CoreAlt (PCon "Lune.Prelude.Pair" [PVar "x",PWildcard]) (CVar "x")])),CoreDecl "" (CInt 0),CoreDecl "Lune.Prelude.snd" (CLam [PVar "p"] (CCase (CVar "p") [CoreAlt (PCon "Lune.Prelude.Pair" [PWildcard,PVar "y"]) (CVar "y")])),CoreDecl "" (CInt 0),CoreDecl "" (CInt 0),CoreDecl "" (CInt 0),CoreDecl "" (CInt 0),CoreDecl "" (CInt 0),CoreDecl "" (CInt 0),CoreDecl "" (CInt 0),CoreDecl "" (CInt 0),CoreDecl "" (CInt 0),CoreDecl "" (CInt 0),CoreDecl "" (CInt 0),CoreDecl "" (CInt 0),CoreDecl "Lune.IO.println" (CLam [PVar "s"] (CApp (CVar "Lune.Prelude.Task") (CApp (CApp (CVar "prim_ioBind") (CApp (CVar "prim_putStrLn") (CVar "s"))) (CLam [PVar "u"] (CApp (CVar "prim_ioPure") (CApp (CVar "Lune.Prelude.Ok") (CVar "u"))))))),CoreDecl "" (CInt 0),CoreDecl "Lune.IO.readLine" (CApp (CVar "Lune.Prelude.Task") (CApp (CApp (CVar "prim_ioBind") (CVar "prim_readLine")) (CLam [PVar "s"] (CApp (CVar "prim_ioPure") (CApp (CVar "Lune.Prelude.Ok") (CVar "s")))))),CoreDecl "" (CInt 0),CoreDecl "Lune.IO.readInt" (CApp (CVar "Lune.Prelude.Task") (CApp (CApp (CVar "prim_ioBind") (CVar "prim_readInt")) (CLam [PVar "n"] (CApp (CVar "prim_ioPure") (CApp (CVar "Lune.Prelude.Ok") (CVar "n")))))),CoreDecl "" (CInt 0),CoreDecl "Lune.IO.sleepMs" (CLam [PVar "ms"] (CApp (CVar "Lune.Prelude.Task") (CApp (CApp (CVar "prim_ioBind") (CApp (CVar "prim_sleepMs") (CVar "ms"))) (CLam [PVar "u"] (CApp (CVar "prim_ioPure") (CApp (CVar "Lune.Prelude.Ok") (CVar "u"))))))),CoreDecl "" (CInt 0),CoreDecl "Lune.IO.readFile" (CLam [PVar "path"] (CApp (CVar "Lune.Prelude.Task") (CApp (CVar "prim_readFile") (CVar "path")))),CoreDecl "" (CInt 0),CoreDecl "Lune.IO.writeFile" (CLam [PVar "path",PVar "contents"] (CApp (CVar "Lune.Prelude.Task") (CApp (CApp (CVar "prim_writeFile") (CVar "path")) (CVar "contents")))),CoreDecl "" (CInt 0),CoreDecl "Lune.Task.succeed" (CLam [PVar "a"] (CApp (CVar "Lune.Prelude.Task") (CApp (CVar "prim_ioPure") (CApp (CVar "Lune.Prelude.Ok") (CVar "a"))))),CoreDecl "" (CInt 0),CoreDecl "Lune.Task.fail" (CLam [PVar "e"] (CApp (CVar "Lune.Prelude.Task") (CApp (CVar "prim_ioPure") (CApp (CVar "Lune.Prelude.Err") (CVar "e"))))),CoreDecl "" (CInt 0),CoreDecl "Lune.Task.fromIO" (CLam [PVar "io"] (CApp (CVar "Lune.Prelude.Task") (CApp (CApp (CVar "prim_ioBind") (CVar "io")) (CLam [PVar "a"] (CApp (CVar "prim_ioPure") (CApp (CVar "Lune.Prelude.Ok") (CVar "a"))))))),CoreDecl "" (CInt 0),CoreDecl "Lune.Task.map" (CLam [PVar "f",PVar "task"] (CCase (CVar "task") [CoreAlt (PCon "Lune.Prelude.Task" [PVar "io"]) (CApp (CVar "Lune.Prelude.Task") (CApp (CApp (CVar "prim_ioBind") (CVar "io")) (CLam [PVar "r"] (CCase (CVar "r") [CoreAlt (PCon "Lune.Prelude.Err" [PVar "e"]) (CApp (CVar "prim_ioPure") (CApp (CVar "Lune.Prelude.Err") (CVar "e"))),CoreAlt (PCon "Lune.Prelude.Ok" [PVar "a"]) (CApp (CVar "prim_ioPure") (CApp (CVar "Lune.Prelude.Ok") (CApp (CVar "f") (CVar "a"))))]))))])),CoreDecl "" (CInt 0),CoreDecl "Lune.Task.andThen" (CLam [PVar "task",PVar "k"] (CCase (CVar "task") [CoreAlt (PCon "Lune.Prelude.Task" [PVar "io"]) (CApp (CVar "Lune.Prelude.Task") (CApp (CApp (CVar "prim_ioBind") (CVar "io")) (CLam [PVar "r"] (CCase (CVar "r") [CoreAlt (PCon "Lune.Prelude.Err" [PVar "e"]) (CApp (CVar "prim_ioPure") (CApp (CVar "Lune.Prelude.Err") (CVar "e"))),CoreAlt (PCon "Lune.Prelude.Ok" [PVar "a"]) (CCase (CApp (CVar "k") (CVar "a")) [CoreAlt (PCon "Lune.Prelude.Task" [PVar "io2"]) (CVar "io2")])]))))])),CoreDecl "" (CInt 0),CoreDecl "Lune.Task.then" (CLam [PVar "ta",PVar "tb"] (CApp (CApp (CVar "Lune.Task.andThen") (CVar "ta")) (CLam [PWildcard] (CVar "tb")))),CoreDecl "" (CInt 0),CoreDecl "Lune.Task.mapError" (CLam [PVar "f",PVar "task"] (CCase (CVar "task") [CoreAlt (PCon "Lune.Prelude.Task" [PVar "io"]) (CApp (CVar "Lune.Prelude.Task") (CApp (CApp (CVar "prim_ioBind") (CVar "io")) (CLam [PVar "r"] (CCase (CVar "r") [CoreAlt (PCon "Lune.Prelude.Err" [PVar "e"]) (CApp (CVar "prim_ioPure") (CApp (CVar "Lune.Prelude.Err") (CApp (CVar "f") (CVar "e")))),CoreAlt (PCon "Lune.Prelude.Ok" [PVar "a"]) (CApp (CVar "prim_ioPure") (CApp (CVar "Lune.Prelude.Ok") (CVar "a")))]))))])),CoreDecl "" (CInt 0),CoreDecl "Lune.Task.onError" (CLam [PVar "task",PVar "handler"] (CCase (CVar "task") [CoreAlt (PCon "Lune.Prelude.Task" [PVar "io"]) (CApp (CVar "Lune.Prelude.Task") (CApp (CApp (CVar "prim_ioBind") (CVar "io")) (CLam [PVar "r"] (CCase (CVar "r") [CoreAlt (PCon "Lune.Prelude.Ok" [PVar "a"]) (CApp (CVar "prim_ioPure") (CApp (CVar "Lune.Prelude.Ok") (CVar "a"))),CoreAlt (PCon "Lune.Prelude.Err" [PVar "e"]) (CCase (CApp (CVar "handler") (CVar "e")) [CoreAlt (PCon "Lune.Prelude.Task" [PVar "io2"]) (CVar "io2")])]))))])),CoreDecl "" (CInt 0),CoreDecl "Lune.Task.attempt" (CLam [PVar "task"] (CCase (CVar "task") [CoreAlt (PCon "Lune.Prelude.Task" [PVar "io"]) (CVar "io")])),CoreDecl "" (CInt 0),CoreDecl "Lune.Char.toInt" (CVar "prim_charToInt"),CoreDecl "" (CInt 0),CoreDecl "Lune.Char.fromInt" (CVar "prim_intToChar"),CoreDecl "" (CInt 0),CoreDecl "Lune.Char.toLower" (CLam [PVar "c"] (CCase (CApp (CApp (CVar "prim_and") (CApp (CApp (CVar "prim_geInt") (CApp (CVar "Lune.Char.toInt") (CVar "c"))) (CInt 65))) (CApp (CApp (CVar "prim_leInt") (CApp (CVar "Lune.Char.toInt") (CVar "c"))) (CInt 90))) [CoreAlt (PCon "Lune.Prelude.True" []) (CApp (CVar "Lune.Char.fromInt") (CApp (CApp (CVar "prim_addInt") (CApp (CVar "Lune.Char.toInt") (CVar "c"))) (CInt 32))),CoreAlt (PCon "Lune.Prelude.False" []) (CVar "c")])),CoreDecl "" (CInt 0),CoreDecl "Lune.Char.toUpper" (CLam [PVar "c"] (CCase (CApp (CApp (CVar "prim_and") (CApp (CApp (CVar "prim_geInt") (CApp (CVar "Lune.Char.toInt") (CVar "c"))) (CInt 97))) (CApp (CApp (CVar "prim_leInt") (CApp (CVar "Lune.Char.toInt") (CVar "c"))) (CInt 122))) [CoreAlt (PCon "Lune.Prelude.True" []) (CApp (CVar "Lune.Char.fromInt") (CApp (CApp (CVar "prim_subInt") (CApp (CVar "Lune.Char.toInt") (CVar "c"))) (CInt 32))),CoreAlt (PCon "Lune.Prelude.False" []) (CVar "c")])),CoreDecl "" (CInt 0),CoreDecl "Lune.Char.isSpace" (CLam [PVar "c"] (CCase (CApp (CApp (CVar "prim_eqInt") (CApp (CVar "Lune.Char.toInt") (CVar "c"))) (CInt 32)) [CoreAlt (PCon "Lune.Prelude.True" []) (CVar "Lune.Prelude.True"),CoreAlt (PCon "Lune.Prelude.False" []) (CCase (CApp (CApp (CVar "prim_eqInt") (CApp (CVar "Lune.Char.toInt") (CVar "c"))) (CInt 9)) [CoreAlt (PCon "Lune.Prelude.True" []) (CVar "Lune.Prelude.True"),CoreAlt (PCon "Lune.Prelude.False" []) (CCase (CApp (CApp (CVar "prim_eqInt") (CApp (CVar "Lune.Char.toInt") (CVar "c"))) (CInt 10)) [CoreAlt (PCon "Lune.Prelude.True" []) (CVar "Lune.Prelude.True"),CoreAlt (PCon "Lune.Prelude.False" []) (CCase (CApp (CApp (CVar "prim_eqInt") (CApp (CVar "Lune.Char.toInt") (CVar "c"))) (CInt 13)) [CoreAlt (PCon "Lune.Prelude.True" []) (CVar "Lune.Prelude.True"),CoreAlt (PCon "Lune.Prelude.False" []) (CVar "Lune.Prelude.False")])])])])),CoreDecl "" (CInt 0),CoreDecl "Lune.Char.eq" (CLam [PVar "a",PVar "b"] (CApp (CApp (CVar "prim_eqInt") (CApp (CVar "Lune.Char.toInt") (CVar "a"))) (CApp (CVar "Lune.Char.toInt") (CVar "b")))),CoreDecl "" (CInt 0),CoreDecl "Lune.String.append" (CVar "prim_appendString"),CoreDecl "" (CInt 0),CoreDecl "Lune.String.eq" (CVar "prim_eqString"),CoreDecl "" (CInt 0),CoreDecl "Lune.String.fromInt" (CVar "prim_showInt"),CoreDecl "" (CInt 0),CoreDecl "Lune.String.fromFloat" (CVar "prim_showFloat"),CoreDecl "" (CInt 0),CoreDecl "Lune.String.toInt" (CVar "prim_parseInt"),CoreDecl "" (CInt 0),CoreDecl "Lune.String.toChars" (CVar "prim_stringToChars"),CoreDecl "" (CInt 0),CoreDecl "Lune.String.fromChars" (CVar "prim_charsToString"),CoreDecl "" (CInt 0),CoreDecl "Lune.String.fromChar" (CLam [PVar "c"] (CApp (CVar "Lune.String.fromChars") (CApp (CApp (CVar "Lune.Prelude.Cons") (CVar "c")) (CVar "Lune.Prelude.Nil")))),CoreDecl "" (CInt 0),CoreDecl "Lune.String.length" (CLam [PVar "s"] (CApp (CVar "Lune.String.listLength") (CApp (CVar "Lune.String.toChars") (CVar "s")))),CoreDecl "" (CInt 0),CoreDecl "Lune.String.isEmpty" (CLam [PVar "s"] (CCase (CApp (CVar "Lune.String.toChars") (CVar "s")) [CoreAlt (PCon "Lune.Prelude.Nil" []) (CVar "Lune.Prelude.True"),CoreAlt PWildcard (CVar "Lune.Prelude.False")])),CoreDecl "" (CInt 0),CoreDecl "Lune.String.toLower" (CLam [PVar "s"] (CApp (CVar "Lune.String.fromChars") (CApp (CApp (CVar "Lune.String.listMap") (CVar "Lune.Char.toLower")) (CApp (CVar "Lune.String.toChars") (CVar "s"))))),CoreDecl "" (CInt 0),CoreDecl "Lune.String.toUpper" (CLam [PVar "s"] (CApp (CVar "Lune.String.fromChars") (CApp (CApp (CVar "Lune.String.listMap") (CVar "Lune.Char.toUpper")) (CApp (CVar "Lune.String.toChars") (CVar "s"))))),CoreDecl "" (CInt 0),CoreDecl "Lune.String.startsWith" (CLam [PVar "prefix",PVar "s"] (CApp (CApp (CVar "Lune.String.charsStartsWith") (CApp (CVar "Lune.String.toChars") (CVar "prefix"))) (CApp (CVar "Lune.String.toChars") (CVar "s")))),CoreDecl "" (CInt 0),CoreDecl "Lune.String.endsWith" (CLam [PVar "suffix",PVar "s"] (CApp (CApp (CVar "Lune.String.charsStartsWith") (CApp (CVar "Lune.String.listReverse") (CApp (CVar "Lune.String.toChars") (CVar "suffix")))) (CApp (CVar "Lune.String.listReverse") (CApp (CVar "Lune.String.toChars") (CVar "s"))))),CoreDecl "" (CInt 0),CoreDecl "Lune.String.contains" (CLam [PVar "needle",PVar "haystack"] (CApp (CApp (CVar "Lune.String.charsContains") (CApp (CVar "Lune.String.toChars") (CVar "needle"))) (CApp (CVar "Lune.String.toChars") (CVar "haystack")))),CoreDecl "" (CInt 0),CoreDecl "Lune.String.split" (CLam [PVar "delimiter",PVar "s"] (CCase (CApp (CVar "Lune.String.isEmpty") (CVar "delimiter")) [CoreAlt (PCon "Lune.Prelude.True" []) (CApp (CApp (CVar "Lune.Prelude.Cons") (CVar "s")) (CVar "Lune.Prelude.Nil")),CoreAlt (PCon "Lune.Prelude.False" []) (CApp (CApp (CApp (CVar "Lune.String.splitHelper") (CApp (CVar "Lune.String.toChars") (CVar "delimiter"))) (CApp (CVar "Lune.String.toChars") (CVar "s"))) (CVar "Lune.Prelude.Nil"))])),CoreDecl "" (CInt 0),CoreDecl "Lune.String.join" (CLam [PVar "sep",PVar "parts"] (CCase (CVar "parts") [CoreAlt (PCon "Lune.Prelude.Nil" []) (CString ""),CoreAlt (PCon "Lune.Prelude.Cons" [PVar "first",PVar "rest"]) (CApp (CApp (CApp (CVar "Lune.String.listFoldl") (CLam [PVar "acc",PVar "x"] (CApp (CApp (CVar "Lune.String.append") (CApp (CApp (CVar "Lune.String.append") (CVar "acc")) (CVar "sep"))) (CVar "x")))) (CVar "first")) (CVar "rest"))])),CoreDecl "" (CInt 0),CoreDecl "Lune.String.trim" (CLam [PVar "s"] (CApp (CVar "Lune.String.trimLeft") (CApp (CVar "Lune.String.trimRight") (CVar "s")))),CoreDecl "" (CInt 0),CoreDecl "Lune.String.trimLeft" (CLam [PVar "s"] (CApp (CVar "Lune.String.fromChars") (CApp (CApp (CVar "Lune.String.dropWhileChars") (CVar "Lune.Char.isSpace")) (CApp (CVar "Lune.String.toChars") (CVar "s"))))),CoreDecl "" (CInt 0),CoreDecl "Lune.String.trimRight" (CLam [PVar "s"] (CApp (CVar "Lune.String.fromChars") (CApp (CVar "Lune.String.listReverse") (CApp (CApp (CVar "Lune.String.dropWhileChars") (CVar "Lune.Char.isSpace")) (CApp (CVar "Lune.String.listReverse") (CApp (CVar "Lune.String.toChars") (CVar "s"))))))),CoreDecl "" (CInt 0),CoreDecl "Lune.String.drop" (CLam [PVar "n",PVar "s"] (CApp (CVar "Lune.String.fromChars") (CApp (CApp (CVar "Lune.String.listDrop") (CVar "n")) (CApp (CVar "Lune.String.toChars") (CVar "s"))))),CoreDecl "" (CInt 0),CoreDecl "Lune.String.take" (CLam [PVar "n",PVar "s"] (CApp (CVar "Lune.String.fromChars") (CApp (CApp (CVar "Lune.String.listTake") (CVar "n")) (CApp (CVar "Lune.String.toChars") (CVar "s"))))),CoreDecl "" (CInt 0),CoreDecl "Lune.String.indexOf" (CLam [PVar "needle",PVar "haystack"] (CApp (CApp (CApp (CVar "Lune.String.indexOfHelper") (CApp (CVar "Lune.String.toChars") (CVar "needle"))) (CApp (CVar "Lune.String.toChars") (CVar "haystack"))) (CInt 0))),CoreDecl "" (CInt 0),CoreDecl "Lune.String.lines" (CLam [PVar "s"] (CApp (CApp (CVar "Lune.String.split") (CString "\n")) (CVar "s"))),CoreDecl "" (CInt 0),CoreDecl "Lune.String.unlines" (CLam [PVar "ls"] (CApp (CApp (CVar "Lune.String.join") (CString "\n")) (CVar "ls"))),CoreDecl "" (CInt 0),CoreDecl "Lune.String.charsStartsWith" (CLam [PVar "prefix",PVar "str"] (CCase (CVar "prefix") [CoreAlt (PCon "Lune.Prelude.Nil" []) (CVar "Lune.Prelude.True"),CoreAlt (PCon "Lune.Prelude.Cons" [PVar "p",PVar "ps"]) (CCase (CVar "str") [CoreAlt (PCon "Lune.Prelude.Nil" []) (CVar "Lune.Prelude.False"),CoreAlt (PCon "Lune.Prelude.Cons" [PVar "s",PVar "ss"]) (CCase (CApp (CApp (CVar "Lune.Char.eq") (CVar "p")) (CVar "s")) [CoreAlt (PCon "Lune.Prelude.True" []) (CApp (CApp (CVar "Lune.String.charsStartsWith") (CVar "ps")) (CVar "ss")),CoreAlt (PCon "Lune.Prelude.False" []) (CVar "Lune.Prelude.False")])])])),CoreDecl "" (CInt 0),CoreDecl "Lune.String.charsContains" (CLam [PVar "needle",PVar "haystack"] (CCase (CVar "needle") [CoreAlt (PCon "Lune.Prelude.Nil" []) (CVar "Lune.Prelude.True"),CoreAlt PWildcard (CCase (CVar "haystack") [CoreAlt (PCon "Lune.Prelude.Nil" []) (CVar "Lune.Prelude.False"),CoreAlt (PCon "Lune.Prelude.Cons" [PWildcard,PVar "rest"]) (CCase (CApp (CApp (CVar "Lune.String.charsStartsWith") (CVar "needle")) (CVar "haystack")) [CoreAlt (PCon "Lune.Prelude.True" []) (CVar "Lune.Prelude.True"),CoreAlt (PCon "Lune.Prelude.False" []) (CApp (CApp (CVar "Lune.String.charsContains") (CVar "needle")) (CVar "rest"))])])])),CoreDecl "" (CInt 0),CoreDecl "Lune.String.splitHelper" (CLam [PVar "delim",PVar "chars",PVar "acc"] (CCase (CVar "chars") [CoreAlt (PCon "Lune.Prelude.Nil" []) (CApp (CApp (CVar "Lune.Prelude.Cons") (CApp (CVar "Lune.String.fromChars") (CApp (CVar "Lune.String.listReverse") (CVar "acc")))) (CVar "Lune.Prelude.Nil")),CoreAlt (PCon "Lune.Prelude.Cons" [PVar "c",PVar "rest"]) (CCase (CApp (CApp (CVar "Lune.String.charsStartsWith") (CVar "delim")) (CVar "chars")) [CoreAlt (PCon "Lune.Prelude.True" []) (CApp (CApp (CVar "Lune.Prelude.Cons") (CApp (CVar "Lune.String.fromChars") (CApp (CVar "Lune.String.listReverse") (CVar "acc")))) (CApp (CApp (CApp (CVar "Lune.String.splitHelper") (CVar "delim")) (CApp (CApp (CVar "Lune.String.listDrop") (CApp (CVar "Lune.String.listLength") (CVar "delim"))) (CVar "chars"))) (CVar "Lune.Prelude.Nil"))),CoreAlt (PCon "Lune.Prelude.False" []) (CApp (CApp (CApp (CVar "Lune.String.splitHelper") (CVar "delim")) (CVar "rest")) (CApp (CApp (CVar "Lune.Prelude.Cons") (CVar "c")) (CVar "acc")))])])),CoreDecl "" (CInt 0),CoreDecl "Lune.String.indexOfHelper" (CLam [PVar "needle",PVar "haystack",PVar "idx"] (CCase (CVar "needle") [CoreAlt (PCon "Lune.Prelude.Nil" []) (CApp (CVar "Lune.Prelude.Just") (CVar "idx")),CoreAlt PWildcard (CCase (CVar "haystack") [CoreAlt (PCon "Lune.Prelude.Nil" []) (CVar "Lune.Prelude.Nothing"),CoreAlt (PCon "Lune.Prelude.Cons" [PWildcard,PVar "rest"]) (CCase (CApp (CApp (CVar "Lune.String.charsStartsWith") (CVar "needle")) (CVar "haystack")) [CoreAlt (PCon "Lune.Prelude.True" []) (CApp (CVar "Lune.Prelude.Just") (CVar "idx")),CoreAlt (PCon "Lune.Prelude.False" []) (CApp (CApp (CApp (CVar "Lune.String.indexOfHelper") (CVar "needle")) (CVar "rest")) (CApp (CApp (CVar "prim_addInt") (CVar "idx")) (CInt 1)))])])])),CoreDecl "" (CInt 0),CoreDecl "Lune.String.dropWhileChars" (CLam [PVar "pred",PVar "chars"] (CCase (CVar "chars") [CoreAlt (PCon "Lune.Prelude.Nil" []) (CVar "Lune.Prelude.Nil"),CoreAlt (PCon "Lune.Prelude.Cons" [PVar "c",PVar "rest"]) (CCase (CApp (CVar "pred") (CVar "c")) [CoreAlt (PCon "Lune.Prelude.True" []) (CApp (CApp (CVar "Lune.String.dropWhileChars") (CVar "pred")) (CVar "rest")),CoreAlt (PCon "Lune.Prelude.False" []) (CApp (CApp (CVar "Lune.Prelude.Cons") (CVar "c")) (CVar "rest"))])])),CoreDecl "" (CInt 0),CoreDecl "Lune.String.listLength" (CLam [PVar "xs"] (CCase (CVar "xs") [CoreAlt (PCon "Lune.Prelude.Nil" []) (CInt 0),CoreAlt (PCon "Lune.Prelude.Cons" [PWildcard,PVar "rest"]) (CApp (CApp (CVar "prim_addInt") (CInt 1)) (CApp (CVar "Lune.String.listLength") (CVar "rest")))])),CoreDecl "" (CInt 0),CoreDecl "Lune.String.listMap" (CLam [PVar "f",PVar "xs"] (CCase (CVar "xs") [CoreAlt (PCon "Lune.Prelude.Nil" []) (CVar "Lune.Prelude.Nil"),CoreAlt (PCon "Lune.Prelude.Cons" [PVar "x",PVar "rest"]) (CApp (CApp (CVar "Lune.Prelude.Cons") (CApp (CVar "f") (CVar "x"))) (CApp (CApp (CVar "Lune.String.listMap") (CVar "f")) (CVar "rest")))])),CoreDecl "" (CInt 0),CoreDecl "Lune.String.listReverse" (CLam [PVar "xs"] (CApp (CApp (CVar "Lune.String.listReverseHelper") (CVar "xs")) (CVar "Lune.Prelude.Nil"))),CoreDecl "" (CInt 0),CoreDecl "Lune.String.listReverseHelper" (CLam [PVar "xs",PVar "acc"] (CCase (CVar "xs") [CoreAlt (PCon "Lune.Prelude.Nil" []) (CVar "acc"),CoreAlt (PCon "Lune.Prelude.Cons" [PVar "x",PVar "rest"]) (CApp (CApp (CVar "Lune.String.listReverseHelper") (CVar "rest")) (CApp (CApp (CVar "Lune.Prelude.Cons") (CVar "x")) (CVar "acc")))])),CoreDecl "" (CInt 0),CoreDecl "Lune.String.listDrop" (CLam [PVar "n",PVar "xs"] (CCase (CApp (CApp (CVar "prim_leInt") (CVar "n")) (CInt 0)) [CoreAlt (PCon "Lune.Prelude.True" []) (CVar "xs"),CoreAlt (PCon "Lune.Prelude.False" []) (CCase (CVar "xs") [CoreAlt (PCon "Lune.Prelude.Nil" []) (CVar "Lune.Prelude.Nil"),CoreAlt (PCon "Lune.Prelude.Cons" [PWildcard,PVar "rest"]) (CApp (CApp (CVar "Lune.String.listDrop") (CApp (CApp (CVar "prim_subInt") (CVar "n")) (CInt 1))) (CVar "rest"))])])),CoreDecl "" (CInt 0),CoreDecl "Lune.String.listTake" (CLam [PVar "n",PVar "xs"] (CCase (CApp (CApp (CVar "prim_leInt") (CVar "n")) (CInt 0)) [CoreAlt (PCon "Lune.Prelude.True" []) (CVar "Lune.Prelude.Nil"),CoreAlt (PCon "Lune.Prelude.False" []) (CCase (CVar "xs") [CoreAlt (PCon "Lune.Prelude.Nil" []) (CVar "Lune.Prelude.Nil"),CoreAlt (PCon "Lune.Prelude.Cons" [PVar "x",PVar "rest"]) (CApp (CApp (CVar "Lune.Prelude.Cons") (CVar "x")) (CApp (CApp (CVar "Lune.String.listTake") (CApp (CApp (CVar "prim_subInt") (CVar "n")) (CInt 1))) (CVar "rest")))])])),CoreDecl "" (CInt 0),CoreDecl "Lune.String.listFoldl" (CLam [PVar "f",PVar "acc",PVar "xs"] (CCase (CVar "xs") [CoreAlt (PCon "Lune.Prelude.Nil" []) (CVar "acc"),CoreAlt (PCon "Lune.Prelude.Cons" [PVar "x",PVar "rest"]) (CApp (CApp (CApp (CVar "Lune.String.listFoldl") (CVar "f")) (CApp (CApp (CVar "f") (CVar "acc")) (CVar "x"))) (CVar "rest"))])),CoreDecl "" (CInt 0),CoreDecl "" (CInt 0),CoreDecl "Lune.Json.parse" (CVar "prim_jsonParse"),CoreDecl "" (CInt 0),CoreDecl "Lune.Json.stringify" (CVar "prim_jsonStringify"),CoreDecl "" (CInt 0),CoreDecl "Lune.Int.add" (CVar "prim_addInt"),CoreDecl "" (CInt 0),CoreDecl "Lune.Int.sub" (CVar "prim_subInt"),CoreDecl "" (CInt 0),CoreDecl "Lune.Int.mul" (CVar "prim_mulInt"),CoreDecl "" (CInt 0),CoreDecl "Lune.Int.div" (CVar "prim_divInt"),CoreDecl "" (CInt 0),CoreDecl "Lune.Int.mod" (CVar "prim_modInt"),CoreDecl "" (CInt 0),CoreDecl "Lune.Int.eq" (CVar "prim_eqInt"),CoreDecl "" (CInt 0),CoreDecl "Lune.Int.gte" (CVar "prim_geInt"),CoreDecl "" (CInt 0),CoreDecl "Lune.Int.lte" (CVar "prim_leInt"),CoreDecl "" (CInt 0),CoreDecl "Lune.List.map" (CLam [PVar "f",PVar "xs"] (CCase (CVar "xs") [CoreAlt (PCon "Lune.Prelude.Nil" []) (CVar "Lune.Prelude.Nil"),CoreAlt (PCon "Lune.Prelude.Cons" [PVar "x",PVar "xt"]) (CApp (CApp (CVar "Lune.Prelude.Cons") (CApp (CVar "f") (CVar "x"))) (CApp (CApp (CVar "Lune.List.map") (CVar "f")) (CVar "xt")))])),CoreDecl "" (CInt 0),CoreDecl "Lune.List.foldl" (CLam [PVar "f",PVar "acc",PVar "xs"] (CCase (CVar "xs") [CoreAlt (PCon "Lune.Prelude.Nil" []) (CVar "acc"),CoreAlt (PCon "Lune.Prelude.Cons" [PVar "x",PVar "xt"]) (CApp (CApp (CApp (CVar "Lune.List.foldl") (CVar "f")) (CApp (CApp (CVar "f") (CVar "acc")) (CVar "x"))) (CVar "xt"))])),CoreDecl "" (CInt 0),CoreDecl "Lune.List.length" (CLam [PVar "xs"] (CCase (CVar "xs") [CoreAlt (PCon "Lune.Prelude.Nil" []) (CInt 0),CoreAlt (PCon "Lune.Prelude.Cons" [PWildcard,PVar "xt"]) (CApp (CApp (CVar "Lune.Int.add") (CInt 1)) (CApp (CVar "Lune.List.length") (CVar "xt")))])),CoreDecl "" (CInt 0),CoreDecl "Lune.List.reverse" (CLam [PVar "xs"] (CApp (CApp (CVar "Lune.List.reverseHelper") (CVar "xs")) (CVar "Lune.Prelude.Nil"))),CoreDecl "" (CInt 0),CoreDecl "Lune.List.reverseHelper" (CLam [PVar "xs",PVar "acc"] (CCase (CVar "xs") [CoreAlt (PCon "Lune.Prelude.Nil" []) (CVar "acc"),CoreAlt (PCon "Lune.Prelude.Cons" [PVar "x",PVar "xt"]) (CApp (CApp (CVar "Lune.List.reverseHelper") (CVar "xt")) (CApp (CApp (CVar "Lune.Prelude.Cons") (CVar "x")) (CVar "acc")))])),CoreDecl "" (CInt 0),CoreDecl "" (CInt 0),CoreDecl "Template.empty" (CVar "prim_templateEmpty"),CoreDecl "" (CInt 0),CoreDecl "Template.text" (CVar "prim_templateText"),CoreDecl "" (CInt 0),CoreDecl "Template.line" (CVar "prim_templateLine"),CoreDecl "" (CInt 0),CoreDecl "Template.lines" (CVar "prim_templateLines"),CoreDecl "" (CInt 0),CoreDecl "Template.block" (CVar "prim_templateBlock"),CoreDecl "" (CInt 0),CoreDecl "Template.append" (CVar "prim_templateAppend"),CoreDecl "" (CInt 0),CoreDecl "Template.join" (CVar "prim_templateJoin"),CoreDecl "" (CInt 0),CoreDecl "Template.vcat" (CVar "prim_templateVcat"),CoreDecl "" (CInt 0),CoreDecl "Template.hcat" (CVar "prim_templateHcat"),CoreDecl "" (CInt 0),CoreDecl "Template.indent" (CVar "prim_templateIndent"),CoreDecl "" (CInt 0),CoreDecl "Template.ensureNL" (CVar "prim_templateEnsureNL"),CoreDecl "" (CInt 0),CoreDecl "Template.render" (CVar "prim_templateRender"),CoreDecl "" (CInt 0),CoreDecl "" (CInt 0),CoreDecl "" (CInt 0),CoreDecl "" (CInt 0),CoreDecl "" (CInt 0),CoreDecl "" (CInt 0),CoreDecl "" (CInt 0),CoreDecl "" (CInt 0),CoreDecl "" (CInt 0),CoreDecl "" (CInt 0),CoreDecl "" (CInt 0),CoreDecl "" (CInt 0),CoreDecl "" (CInt 0),CoreDecl "" (CInt 0),CoreDecl "" (CInt 0),CoreDecl "Lune.Json.Decode.decodeValue" (CLam [PVar "decoder",PVar "json"] (CApp (CVar "decoder") (CVar "json"))),CoreDecl "" (CInt 0),CoreDecl "Lune.Json.Decode.succeed" (CLam [PVar "value"] (CLam [PWildcard] (CApp (CVar "Lune.Prelude.Ok") (CVar "value")))),CoreDecl "" (CInt 0),CoreDecl "Lune.Json.Decode.fail" (CLam [PVar "message"] (CLam [PWildcard] (CApp (CVar "Lune.Prelude.Err") (CRecord [("message",CVar "message"),("path",CVar "Lune.Prelude.Nil")])))),CoreDecl "" (CInt 0),CoreDecl "Lune.Json.Decode.bool" (CLam [PVar "json"] (CCase (CApp (CVar "prim_jsonToBool") (CVar "json")) [CoreAlt (PCon "Lune.Prelude.Ok" [PVar "b"]) (CApp (CVar "Lune.Prelude.Ok") (CVar "b")),CoreAlt (PCon "Lune.Prelude.Err" [PVar "msg"]) (CApp (CVar "Lune.Prelude.Err") (CRecord [("message",CVar "msg"),("path",CVar "Lune.Prelude.Nil")]))])),CoreDecl "" (CInt 0),CoreDecl "Lune.Json.Decode.int" (CLam [PVar "json"] (CCase (CApp (CVar "prim_jsonToInt") (CVar "json")) [CoreAlt (PCon "Lune.Prelude.Ok" [PVar "n"]) (CApp (CVar "Lune.Prelude.Ok") (CVar "n")),CoreAlt (PCon "Lune.Prelude.Err" [PVar "msg"]) (CApp (CVar "Lune.Prelude.Err") (CRecord [("message",CVar "msg"),("path",CVar "Lune.Prelude.Nil")]))])),CoreDecl "" (CInt 0),CoreDecl "Lune.Json.Decode.float" (CLam [PVar "json"] (CCase (CApp (CVar "prim_jsonToFloat") (CVar "json")) [CoreAlt (PCon "Lune.Prelude.Ok" [PVar "f"]) (CApp (CVar "Lune.Prelude.Ok") (CVar "f")),CoreAlt (PCon "Lune.Prelude.Err" [PVar "msg"]) (CApp (CVar "Lune.Prelude.Err") (CRecord [("message",CVar "msg"),("path",CVar "Lune.Prelude.Nil")]))])),CoreDecl "" (CInt 0),CoreDecl "Lune.Json.Decode.string" (CLam [PVar "json"] (CCase (CApp (CVar "prim_jsonToString") (CVar "json")) [CoreAlt (PCon "Lune.Prelude.Ok" [PVar "s"]) (CApp (CVar "Lune.Prelude.Ok") (CVar "s")),CoreAlt (PCon "Lune.Prelude.Err" [PVar "msg"]) (CApp (CVar "Lune.Prelude.Err") (CRecord [("message",CVar "msg"),("path",CVar "Lune.Prelude.Nil")]))])),CoreDecl "" (CInt 0),CoreDecl "Lune.Json.Decode.null" (CLam [PVar "defaultValue"] (CLam [PVar "json"] (CCase (CApp (CVar "prim_jsonIsNull") (CVar "json")) [CoreAlt (PCon "Lune.Prelude.True" []) (CApp (CVar "Lune.Prelude.Ok") (CVar "defaultValue")),CoreAlt (PCon "Lune.Prelude.False" []) (CApp (CVar "Lune.Prelude.Err") (CRecord [("message",CString "expected null"),("path",CVar "Lune.Prelude.Nil")]))]))),CoreDecl "" (CInt 0),CoreDecl "Lune.Json.Decode.list" (CLam [PVar "elemDecoder"] (CLam [PVar "json"] (CCase (CApp (CVar "prim_jsonToArray") (CVar "json")) [CoreAlt (PCon "Lune.Prelude.Err" [PVar "msg"]) (CApp (CVar "Lune.Prelude.Err") (CRecord [("message",CVar "msg"),("path",CVar "Lune.Prelude.Nil")])),CoreAlt (PCon "Lune.Prelude.Ok" [PVar "elements"]) (CApp (CApp (CApp (CVar "Lune.Json.Decode.decodeList") (CVar "elemDecoder")) (CInt 0)) (CVar "elements"))]))),CoreDecl "" (CInt 0),CoreDecl "Lune.Json.Decode.decodeList" (CLam [PVar "decoder",PVar "idx",PVar "elements"] (CCase (CVar "elements") [CoreAlt (PCon "Lune.Prelude.Nil" []) (CApp (CVar "Lune.Prelude.Ok") (CVar "Lune.Prelude.Nil")),CoreAlt (PCon "Lune.Prelude.Cons" [PVar "x",PVar "xs"]) (CCase (CApp (CVar "decoder") (CVar "x")) [CoreAlt (PCon "Lune.Prelude.Err" [PVar "err"]) (CApp (CVar "Lune.Prelude.Err") (CApp (CApp (CVar "Lune.Json.Decode.prependPath") (CApp (CVar "Lune.Json.Decode.Index") (CVar "idx"))) (CVar "err"))),CoreAlt (PCon "Lune.Prelude.Ok" [PVar "a"]) (CCase (CApp (CApp (CApp (CVar "Lune.Json.Decode.decodeList") (CVar "decoder")) (CApp (CApp (CVar "Lune.Int.add") (CVar "idx")) (CInt 1))) (CVar "xs")) [CoreAlt (PCon "Lune.Prelude.Err" [PVar "err"]) (CApp (CVar "Lune.Prelude.Err") (CVar "err")),CoreAlt (PCon "Lune.Prelude.Ok" [PVar "rest"]) (CApp (CVar "Lune.Prelude.Ok") (CApp (CApp (CVar "Lune.Prelude.Cons") (CVar "a")) (CVar "rest")))])])])),CoreDecl "" (CInt 0),CoreDecl "Lune.Json.Decode.maybe" (CLam [PVar "decoder"] (CLam [PVar "json"] (CCase (CApp (CVar "prim_jsonIsNull") (CVar "json")) [CoreAlt (PCon "Lune.Prelude.True" []) (CApp (CVar "Lune.Prelude.Ok") (CVar "Lune.Prelude.Nothing")),CoreAlt (PCon "Lune.Prelude.False" []) (CCase (CApp (CVar "decoder") (CVar "json")) [CoreAlt (PCon "Lune.Prelude.Ok" [PVar "a"]) (CApp (CVar "Lune.Prelude.Ok") (CApp (CVar "Lune.Prelude.Just") (CVar "a"))),CoreAlt (PCon "Lune.Prelude.Err" [PVar "err"]) (CApp (CVar "Lune.Prelude.Err") (CVar "err"))])]))),CoreDecl "" (CInt 0),CoreDecl "Lune.Json.Decode.field" (CLam [PVar "name",PVar "decoder"] (CLam [PVar "json"] (CCase (CApp (CApp (CVar "prim_jsonGetField") (CVar "name")) (CVar "json")) [CoreAlt (PCon "Lune.Prelude.Err" [PVar "msg"]) (CApp (CVar "Lune.Prelude.Err") (CRecord [("message",CVar "msg"),("path",CApp (CApp (CVar "Lune.Prelude.Cons") (CApp (CVar "Lune.Json.Decode.Field") (CVar "name"))) (CVar "Lune.Prelude.Nil"))])),CoreAlt (PCon "Lune.Prelude.Ok" [PVar "fieldJson"]) (CCase (CApp (CVar "decoder") (CVar "fieldJson")) [CoreAlt (PCon "Lune.Prelude.Err" [PVar "err"]) (CApp (CVar "Lune.Prelude.Err") (CApp (CApp (CVar "Lune.Json.Decode.prependPath") (CApp (CVar "Lune.Json.Decode.Field") (CVar "name"))) (CVar "err"))),CoreAlt (PCon "Lune.Prelude.Ok" [PVar "a"]) (CApp (CVar "Lune.Prelude.Ok") (CVar "a"))])]))),CoreDecl "" (CInt 0),CoreDecl "Lune.Json.Decode.index" (CLam [PVar "idx",PVar "decoder"] (CLam [PVar "json"] (CCase (CApp (CApp (CVar "prim_jsonGetIndex") (CVar "idx")) (CVar "json")) [CoreAlt (PCon "Lune.Prelude.Err" [PVar "msg"]) (CApp (CVar "Lune.Prelude.Err") (CRecord [("message",CVar "msg"),("path",CApp (CApp (CVar "Lune.Prelude.Cons") (CApp (CVar "Lune.Json.Decode.Index") (CVar "idx"))) (CVar "Lune.Prelude.Nil"))])),CoreAlt (PCon "Lune.Prelude.Ok" [PVar "elemJson"]) (CCase (CApp (CVar "decoder") (CVar "elemJson")) [CoreAlt (PCon "Lune.Prelude.Err" [PVar "err"]) (CApp (CVar "Lune.Prelude.Err") (CApp (CApp (CVar "Lune.Json.Decode.prependPath") (CApp (CVar "Lune.Json.Decode.Index") (CVar "idx"))) (CVar "err"))),CoreAlt (PCon "Lune.Prelude.Ok" [PVar "a"]) (CApp (CVar "Lune.Prelude.Ok") (CVar "a"))])]))),CoreDecl "" (CInt 0),CoreDecl "Lune.Json.Decode.at" (CLam [PVar "path",PVar "decoder"] (CCase (CVar "path") [CoreAlt (PCon "Lune.Prelude.Nil" []) (CVar "decoder"),CoreAlt (PCon "Lune.Prelude.Cons" [PVar "name",PVar "rest"]) (CApp (CApp (CVar "Lune.Json.Decode.field") (CVar "name")) (CApp (CApp (CVar "Lune.Json.Decode.at") (CVar "rest")) (CVar "decoder")))])),CoreDecl "" (CInt 0),CoreDecl "Lune.Json.Decode.map" (CLam [PVar "f",PVar "decoder"] (CLam [PVar "json"] (CCase (CApp (CVar "decoder") (CVar "json")) [CoreAlt (PCon "Lune.Prelude.Err" [PVar "err"]) (CApp (CVar "Lune.Prelude.Err") (CVar "err")),CoreAlt (PCon "Lune.Prelude.Ok" [PVar "a"]) (CApp (CVar "Lune.Prelude.Ok") (CApp (CVar "f") (CVar "a")))]))),CoreDecl "" (CInt 0),CoreDecl "Lune.Json.Decode.map2" (CLam [PVar "f",PVar "decoderA",PVar "decoderB"] (CLam [PVar "json"] (CCase (CApp (CVar "decoderA") (CVar "json")) [CoreAlt (PCon "Lune.Prelude.Err" [PVar "err"]) (CApp (CVar "Lune.Prelude.Err") (CVar "err")),CoreAlt (PCon "Lune.Prelude.Ok" [PVar "a"]) (CCase (CApp (CVar "decoderB") (CVar "json")) [CoreAlt (PCon "Lune.Prelude.Err" [PVar "err"]) (CApp (CVar "Lune.Prelude.Err") (CVar "err")),CoreAlt (PCon "Lune.Prelude.Ok" [PVar "b"]) (CApp (CVar "Lune.Prelude.Ok") (CApp (CApp (CVar "f") (CVar "a")) (CVar "b")))])]))),CoreDecl "" (CInt 0),CoreDecl "Lune.Json.Decode.map3" (CLam [PVar "f",PVar "da",PVar "db",PVar "dc"] (CLam [PVar "json"] (CCase (CApp (CVar "da") (CVar "json")) [CoreAlt (PCon "Lune.Prelude.Err" [PVar "err"]) (CApp (CVar "Lune.Prelude.Err") (CVar "err")),CoreAlt (PCon "Lune.Prelude.Ok" [PVar "a"]) (CCase (CApp (CVar "db") (CVar "json")) [CoreAlt (PCon "Lune.Prelude.Err" [PVar "err"]) (CApp (CVar "Lune.Prelude.Err") (CVar "err")),CoreAlt (PCon "Lune.Prelude.Ok" [PVar "b"]) (CCase (CApp (CVar "dc") (CVar "json")) [CoreAlt (PCon "Lune.Prelude.Err" [PVar "err"]) (CApp (CVar "Lune.Prelude.Err") (CVar "err")),CoreAlt (PCon "Lune.Prelude.Ok" [PVar "c"]) (CApp (CVar "Lune.Prelude.Ok") (CApp (CApp (CApp (CVar "f") (CVar "a")) (CVar "b")) (CVar "c")))])])]))),CoreDecl "" (CInt 0),CoreDecl "Lune.Json.Decode.map4" (CLam [PVar "f",PVar "da",PVar "db",PVar "dc",PVar "dd"] (CLam [PVar "json"] (CCase (CApp (CVar "da") (CVar "json")) [CoreAlt (PCon "Lune.Prelude.Err" [PVar "err"]) (CApp (CVar "Lune.Prelude.Err") (CVar "err")),CoreAlt (PCon "Lune.Prelude.Ok" [PVar "a"]) (CCase (CApp (CVar "db") (CVar "json")) [CoreAlt (PCon "Lune.Prelude.Err" [PVar "err"]) (CApp (CVar "Lune.Prelude.Err") (CVar "err")),CoreAlt (PCon "Lune.Prelude.Ok" [PVar "b"]) (CCase (CApp (CVar "dc") (CVar "json")) [CoreAlt (PCon "Lune.Prelude.Err" [PVar "err"]) (CApp (CVar "Lune.Prelude.Err") (CVar "err")),CoreAlt (PCon "Lune.Prelude.Ok" [PVar "c"]) (CCase (CApp (CVar "dd") (CVar "json")) [CoreAlt (PCon "Lune.Prelude.Err" [PVar "err"]) (CApp (CVar "Lune.Prelude.Err") (CVar "err")),CoreAlt (PCon "Lune.Prelude.Ok" [PVar "d"]) (CApp (CVar "Lune.Prelude.Ok") (CApp (CApp (CApp (CApp (CVar "f") (CVar "a")) (CVar "b")) (CVar "c")) (CVar "d")))])])])]))),CoreDecl "" (CInt 0),CoreDecl "Lune.Json.Decode.map5" (CLam [PVar "fn",PVar "da",PVar "db",PVar "dc",PVar "dd",PVar "de"] (CLam [PVar "json"] (CCase (CApp (CVar "da") (CVar "json")) [CoreAlt (PCon "Lune.Prelude.Err" [PVar "err"]) (CApp (CVar "Lune.Prelude.Err") (CVar "err")),CoreAlt (PCon "Lune.Prelude.Ok" [PVar "a"]) (CCase (CApp (CVar "db") (CVar "json")) [CoreAlt (PCon "Lune.Prelude.Err" [PVar "err"]) (CApp (CVar "Lune.Prelude.Err") (CVar "err")),CoreAlt (PCon "Lune.Prelude.Ok" [PVar "b"]) (CCase (CApp (CVar "dc") (CVar "json")) [CoreAlt (PCon "Lune.Prelude.Err" [PVar "err"]) (CApp (CVar "Lune.Prelude.Err") (CVar "err")),CoreAlt (PCon "Lune.Prelude.Ok" [PVar "c"]) (CCase (CApp (CVar "dd") (CVar "json")) [CoreAlt (PCon "Lune.Prelude.Err" [PVar "err"]) (CApp (CVar "Lune.Prelude.Err") (CVar "err")),CoreAlt (PCon "Lune.Prelude.Ok" [PVar "d"]) (CCase (CApp (CVar "de") (CVar "json")) [CoreAlt (PCon "Lune.Prelude.Err" [PVar "err"]) (CApp (CVar "Lune.Prelude.Err") (CVar "err")),CoreAlt (PCon "Lune.Prelude.Ok" [PVar "e"]) (CApp (CVar "Lune.Prelude.Ok") (CApp (CApp (CApp (CApp (CApp (CVar "fn") (CVar "a")) (CVar "b")) (CVar "c")) (CVar "d")) (CVar "e")))])])])])]))),CoreDecl "" (CInt 0),CoreDecl "Lune.Json.Decode.andThen" (CLam [PVar "continuation",PVar "decoder"] (CLam [PVar "json"] (CCase (CApp (CVar "decoder") (CVar "json")) [CoreAlt (PCon "Lune.Prelude.Err" [PVar "err"]) (CApp (CVar "Lune.Prelude.Err") (CVar "err")),CoreAlt (PCon "Lune.Prelude.Ok" [PVar "a"]) (CApp (CApp (CVar "continuation") (CVar "a")) (CVar "json"))]))),CoreDecl "" (CInt 0),CoreDecl "Lune.Json.Decode.oneOf" (CLam [PVar "decoders"] (CLam [PVar "json"] (CApp (CApp (CApp (CVar "Lune.Json.Decode.tryDecoders") (CVar "decoders")) (CRecord [("message",CString "oneOf: no decoders provided"),("path",CVar "Lune.Prelude.Nil")])) (CVar "json")))),CoreDecl "" (CInt 0),CoreDecl "Lune.Json.Decode.tryDecoders" (CLam [PVar "decoders",PVar "lastErr",PVar "json"] (CCase (CVar "decoders") [CoreAlt (PCon "Lune.Prelude.Nil" []) (CApp (CVar "Lune.Prelude.Err") (CVar "lastErr")),CoreAlt (PCon "Lune.Prelude.Cons" [PVar "decoder",PVar "rest"]) (CCase (CApp (CVar "decoder") (CVar "json")) [CoreAlt (PCon "Lune.Prelude.Ok" [PVar "a"]) (CApp (CVar "Lune.Prelude.Ok") (CVar "a")),CoreAlt (PCon "Lune.Prelude.Err" [PVar "err"]) (CApp (CApp (CApp (CVar "Lune.Json.Decode.tryDecoders") (CVar "rest")) (CVar "err")) (CVar "json"))])])),CoreDecl "" (CInt 0),CoreDecl "Lune.Json.Decode.prependPath" (CLam [PVar "item",PVar "err"] (CRecord [("message",CSelect (CVar "err") "message"),("path",CApp (CApp (CVar "Lune.Prelude.Cons") (CVar "item")) (CSelect (CVar "err") "path"))])),CoreDecl "" (CInt 0),CoreDecl "" (CInt 0),CoreDecl "Json.decode" (CLam [PVar "$dictJson.Decode0",PVar "s"] (CCase (CApp (CVar "Lune.Json.parse") (CVar "s")) [CoreAlt (PCon "Lune.Prelude.Err" [PVar "msg"]) (CApp (CVar "Lune.Prelude.Err") (CVar "msg")),CoreAlt (PCon "Lune.Prelude.Ok" [PVar "json"]) (CCase (CApp (CApp (CVar "Lune.Json.Decode.decodeValue") (CSelect (CVar "$dictJson.Decode0") "decoder")) (CVar "json")) [CoreAlt (PCon "Lune.Prelude.Ok" [PVar "a"]) (CApp (CVar "Lune.Prelude.Ok") (CVar "a")),CoreAlt (PCon "Lune.Prelude.Err" [PVar "err"]) (CApp (CVar "Lune.Prelude.Err") (CSelect (CVar "err") "message"))])])),CoreDecl "" (CInt 0),CoreDecl "" (CInt 0),CoreDecl "" (CInt 0),CoreDecl "" (CInt 0),CoreDecl "" (CInt 0),CoreDecl "" (CInt 0),CoreDecl "" (CInt 0),CoreDecl "Nova.openrouter" (CVar "Nova.OpenRouter"),CoreDecl "" (CInt 0),CoreDecl "Nova.ollama" (CVar "Nova.Ollama"),CoreDecl "" (CInt 0),CoreDecl "" (CInt 0),CoreDecl "" (CInt 0),CoreDecl "" (CInt 0),CoreDecl "" (CInt 0),CoreDecl "" (CInt 0),CoreDecl "" (CInt 0),CoreDecl "" (CInt 0),CoreDecl "" (CInt 0),CoreDecl "Nova.defaultClient" (CRecord [("openrouter",CRecord [("baseUrl",CString "https://openrouter.ai/api/v1"),("apiKey",CVar "Lune.Prelude.Nothing"),("appName",CVar "Lune.Prelude.Nothing")]),("ollama",CRecord [("baseUrl",CString "http://localhost:11434")])]),CoreDecl "" (CInt 0),CoreDecl "Nova.withOpenRouterKey" (CLam [PVar "key",PVar "client"] (CRecord [("openrouter",CRecord [("baseUrl",CSelect (CSelect (CVar "client") "openrouter") "baseUrl"),("apiKey",CApp (CVar "Lune.Prelude.Just") (CVar "key")),("appName",CSelect (CSelect (CVar "client") "openrouter") "appName")]),("ollama",CSelect (CVar "client") "ollama")])),CoreDecl "" (CInt 0),CoreDecl "Nova.withOpenRouterBaseUrl" (CLam [PVar "url",PVar "client"] (CRecord [("openrouter",CRecord [("baseUrl",CVar "url"),("apiKey",CSelect (CSelect (CVar "client") "openrouter") "apiKey"),("appName",CSelect (CSelect (CVar "client") "openrouter") "appName")]),("ollama",CSelect (CVar "client") "ollama")])),CoreDecl "" (CInt 0),CoreDecl "Nova.withOllamaBaseUrl" (CLam [PVar "url",PVar "client"] (CRecord [("openrouter",CSelect (CVar "client") "openrouter"),("ollama",CRecord [("baseUrl",CVar "url")])])),CoreDecl "" (CInt 0),CoreDecl "Nova.openrouterModel" (CLam [PVar "id"] (CRecord [("provider",CVar "Nova.OpenRouter"),("id",CVar "id")])),CoreDecl "" (CInt 0),CoreDecl "Nova.ollamaModel" (CLam [PVar "id"] (CRecord [("provider",CVar "Nova.Ollama"),("id",CVar "id")])),CoreDecl "" (CInt 0),CoreDecl "Nova.toolPreamble" (CTemplate True [CTemplateText "You must output exactly one JSON value and nothing else.\n\nRules:\n- Output ONLY valid JSON.\n- No markdown.\n- No code fences.\n- No prose or explanations.\n- No leading or trailing text.\n- Do not add extra keys beyond the requested schema."]),CoreDecl "" (CInt 0),CoreDecl "Nova.toolPostamble" (CTemplate True [CTemplateText "Output ONLY JSON now."]),CoreDecl "" (CInt 0),CoreDecl "Nova.ask" (CLam [PVar "client",PVar "req"] (CCase (CSelect (CSelect (CVar "req") "model") "provider") [CoreAlt (PCon "Nova.OpenRouter" []) (CApp (CApp (CApp (CVar "Nova.callOpenRouter") (CSelect (CVar "client") "openrouter")) (CSelect (CSelect (CVar "req") "model") "id")) (CApp (CVar "Template.render") (CSelect (CVar "req") "prompt"))),CoreAlt (PCon "Nova.Ollama" []) (CApp (CApp (CApp (CVar "Nova.callOllama") (CSelect (CVar "client") "ollama")) (CSelect (CSelect (CVar "req") "model") "id")) (CApp (CVar "Template.render") (CSelect (CVar "req") "prompt")))])),CoreDecl "" (CInt 0),CoreDecl "Nova.json" (CLam [PVar "$dictJson.Decode0",PVar "client",PVar "req"] (CApp (CApp (CVar "prim_ioBind") (CApp (CApp (CVar "Nova.ask") (CVar "client")) (CVar "req"))) (CLam [PVar "r"] (CCase (CVar "r") [CoreAlt (PCon "Lune.Prelude.Err" [PVar "e"]) (CApp (CVar "prim_ioPure") (CApp (CVar "Lune.Prelude.Err") (CVar "e"))),CoreAlt (PCon "Lune.Prelude.Ok" [PVar "resp"]) (CCase (CApp (CApp (CVar "Json.decode") (CVar "$dictJson.Decode0")) (CSelect (CVar "resp") "text")) [CoreAlt (PCon "Lune.Prelude.Ok" [PVar "a"]) (CApp (CVar "prim_ioPure") (CApp (CVar "Lune.Prelude.Ok") (CVar "a"))),CoreAlt (PCon "Lune.Prelude.Err" [PVar "msg"]) (CApp (CVar "prim_ioPure") (CApp (CVar "Lune.Prelude.Err") (CApp (CVar "Nova.DecodeError") (CVar "msg"))))])])))),CoreDecl "" (CInt 0),CoreDecl "Nova.tool" (CLam [PVar "$dictJson.Decode0",PVar "client",PVar "req"] (CLet "req2" (CLam [PVar "$letDictSemigroup0",PVar "$letDictSemigroup1"] (CLet "$r" (CVar "req") (CRecord [("model",CSelect (CVar "$r") "model"),("prompt",CApp (CApp (CSelect (CVar "$letDictSemigroup1") "<>") (CApp (CApp (CSelect (CVar "$letDictSemigroup1") "<>") (CVar "Nova.toolPreamble")) (CSelect (CVar "req") "prompt"))) (CVar "Nova.toolPostamble"))]))) (CApp (CApp (CVar "prim_ioBind") (CApp (CApp (CVar "Nova.ask") (CVar "client")) (CApp (CApp (CVar "req2") (CVar "$dictSemigroup_Template")) (CVar "$dictSemigroup_Template")))) (CLam [PVar "r"] (CCase (CVar "r") [CoreAlt (PCon "Lune.Prelude.Err" [PVar "e"]) (CApp (CVar "prim_ioPure") (CApp (CVar "Lune.Prelude.Err") (CVar "e"))),CoreAlt (PCon "Lune.Prelude.Ok" [PVar "resp"]) (CCase (CApp (CVar "Nova.extractJson") (CSelect (CVar "resp") "text")) [CoreAlt (PCon "Lune.Prelude.Err" [PVar "msg"]) (CApp (CVar "prim_ioPure") (CApp (CVar "Lune.Prelude.Err") (CApp (CVar "Nova.DecodeError") (CVar "msg")))),CoreAlt (PCon "Lune.Prelude.Ok" [PVar "rawJson"]) (CCase (CApp (CApp (CVar "Json.decode") (CVar "$dictJson.Decode0")) (CVar "rawJson")) [CoreAlt (PCon "Lune.Prelude.Ok" [PVar "a"]) (CApp (CVar "prim_ioPure") (CApp (CVar "Lune.Prelude.Ok") (CVar "a"))),CoreAlt (PCon "Lune.Prelude.Err" [PVar "msg"]) (CApp (CVar "prim_ioPure") (CApp (CVar "Lune.Prelude.Err") (CApp (CVar "Nova.DecodeError") (CVar "msg"))))])])]))))),CoreDecl "" (CInt 0),CoreDecl "Nova.extractJson" (CLam [PVar "s"] (CApp (CVar "Nova.extractJsonTrimmed") (CApp (CVar "Lune.String.trim") (CVar "s")))),CoreDecl "" (CInt 0),CoreDecl "Nova.extractJsonTrimmed" (CLam [PVar "t"] (CCase (CApp (CVar "Nova.startsLikeJsonContainer") (CVar "t")) [CoreAlt (PCon "Lune.Prelude.True" []) (CCase (CApp (CVar "Nova.validateJson") (CVar "t")) [CoreAlt (PCon "Lune.Prelude.Ok" [PWildcard]) (CApp (CVar "Lune.Prelude.Ok") (CVar "t")),CoreAlt (PCon "Lune.Prelude.Err" [PWildcard]) (CApp (CVar "Nova.extractViaSlice") (CVar "t"))]),CoreAlt (PCon "Lune.Prelude.False" []) (CApp (CVar "Nova.extractViaSlice") (CVar "t"))])),CoreDecl "" (CInt 0),CoreDecl "Nova.startsLikeJsonContainer" (CLam [PVar "t"] (CCase (CApp (CApp (CVar "Lune.String.startsWith") (CString "{")) (CVar "t")) [CoreAlt (PCon "Lune.Prelude.True" []) (CVar "Lune.Prelude.True"),CoreAlt (PCon "Lune.Prelude.False" []) (CApp (CApp (CVar "Lune.String.startsWith") (CString "[")) (CVar "t"))])),CoreDecl "" (CInt 0),CoreDecl "Nova.extractViaSlice" (CLam [PVar "t"] (CCase (CApp (CVar "Nova.findJsonSlice") (CVar "t")) [CoreAlt (PCon "Lune.Prelude.Err" [PWildcard]) (CApp (CVar "Lune.Prelude.Err") (CApp (CApp (CVar "Lune.String.append") (CString "Could not find JSON in response: ")) (CApp (CApp (CVar "Nova.snippet") (CInt 240)) (CVar "t")))),CoreAlt (PCon "Lune.Prelude.Ok" [PVar "raw"]) (CCase (CApp (CVar "Nova.validateJson") (CVar "raw")) [CoreAlt (PCon "Lune.Prelude.Ok" [PWildcard]) (CApp (CVar "Lune.Prelude.Ok") (CVar "raw")),CoreAlt (PCon "Lune.Prelude.Err" [PWildcard]) (CApp (CVar "Lune.Prelude.Err") (CApp (CApp (CVar "Lune.String.append") (CString "Could not parse JSON in response: ")) (CApp (CApp (CVar "Nova.snippet") (CInt 240)) (CVar "raw"))))])])),CoreDecl "" (CInt 0),CoreDecl "Nova.validateJson" (CLam [PVar "raw"] (CApp (CVar "Lune.Json.parse") (CVar "raw"))),CoreDecl "" (CInt 0),CoreDecl "Nova.findJsonSlice" (CLam [PVar "t"] (CCase (CApp (CVar "Nova.firstJsonStart") (CVar "t")) [CoreAlt (PCon "Lune.Prelude.Nothing" []) (CApp (CVar "Lune.Prelude.Err") (CString "no start")),CoreAlt (PCon "Lune.Prelude.Just" [PVar "start"]) (CCase (CApp (CVar "Nova.lastJsonEnd") (CVar "t")) [CoreAlt (PCon "Lune.Prelude.Nothing" []) (CApp (CVar "Lune.Prelude.Err") (CString "no end")),CoreAlt (PCon "Lune.Prelude.Just" [PVar "end"]) (CCase (CApp (CApp (CVar "Nova.ltInt") (CVar "start")) (CVar "end")) [CoreAlt (PCon "Lune.Prelude.True" []) (CApp (CVar "Lune.Prelude.Ok") (CApp (CApp (CApp (CVar "Nova.sliceInclusive") (CVar "start")) (CVar "end")) (CVar "t"))),CoreAlt (PCon "Lune.Prelude.False" []) (CApp (CVar "Lune.Prelude.Err") (CString "invalid slice"))])])])),CoreDecl "" (CInt 0),CoreDecl "Nova.firstJsonStart" (CLam [PVar "t"] (CApp (CApp (CVar "Nova.minMaybe") (CApp (CApp (CVar "Lune.String.indexOf") (CString "{")) (CVar "t"))) (CApp (CApp (CVar "Lune.String.indexOf") (CString "[")) (CVar "t")))),CoreDecl "" (CInt 0),CoreDecl "Nova.lastJsonEnd" (CLam [PVar "t"] (CApp (CApp (CVar "Nova.maxMaybe") (CApp (CApp (CVar "Nova.lastIndexOfChar") (CApp (CVar "prim_intToChar") (CInt 125))) (CVar "t"))) (CApp (CApp (CVar "Nova.lastIndexOfChar") (CApp (CVar "prim_intToChar") (CInt 93))) (CVar "t")))),CoreDecl "" (CInt 0),CoreDecl "Nova.lastIndexOfChar" (CLam [PVar "c",PVar "s"] (CApp (CApp (CApp (CApp (CVar "Nova.lastIndexOfCharGo") (CVar "c")) (CApp (CVar "Lune.String.toChars") (CVar "s"))) (CInt 0)) (CVar "Lune.Prelude.Nothing"))),CoreDecl "" (CInt 0),CoreDecl "Nova.lastIndexOfCharGo" (CLam [PVar "c",PVar "chars",PVar "idx",PVar "last"] (CCase (CVar "chars") [CoreAlt (PCon "Lune.Prelude.Nil" []) (CVar "last"),CoreAlt (PCon "Lune.Prelude.Cons" [PVar "x",PVar "xs"]) (CCase (CApp (CApp (CVar "prim_eqInt") (CApp (CVar "prim_charToInt") (CVar "x"))) (CApp (CVar "prim_charToInt") (CVar "c"))) [CoreAlt (PCon "Lune.Prelude.True" []) (CApp (CApp (CApp (CApp (CVar "Nova.lastIndexOfCharGo") (CVar "c")) (CVar "xs")) (CApp (CApp (CVar "Lune.Int.add") (CVar "idx")) (CInt 1))) (CApp (CVar "Lune.Prelude.Just") (CVar "idx"))),CoreAlt (PCon "Lune.Prelude.False" []) (CApp (CApp (CApp (CApp (CVar "Nova.lastIndexOfCharGo") (CVar "c")) (CVar "xs")) (CApp (CApp (CVar "Lune.Int.add") (CVar "idx")) (CInt 1))) (CVar "last"))])])),CoreDecl "" (CInt 0),CoreDecl "Nova.minMaybe" (CLam [PVar "a",PVar "b"] (CCase (CVar "a") [CoreAlt (PCon "Lune.Prelude.Nothing" []) (CVar "b"),CoreAlt (PCon "Lune.Prelude.Just" [PVar "x"]) (CCase (CVar "b") [CoreAlt (PCon "Lune.Prelude.Nothing" []) (CVar "a"),CoreAlt (PCon "Lune.Prelude.Just" [PVar "y"]) (CCase (CApp (CApp (CVar "prim_leInt") (CVar "x")) (CVar "y")) [CoreAlt (PCon "Lune.Prelude.True" []) (CApp (CVar "Lune.Prelude.Just") (CVar "x")),CoreAlt (PCon "Lune.Prelude.False" []) (CApp (CVar "Lune.Prelude.Just") (CVar "y"))])])])),CoreDecl "" (CInt 0),CoreDecl "Nova.maxMaybe" (CLam [PVar "a",PVar "b"] (CCase (CVar "a") [CoreAlt (PCon "Lune.Prelude.Nothing" []) (CVar "b"),CoreAlt (PCon "Lune.Prelude.Just" [PVar "x"]) (CCase (CVar "b") [CoreAlt (PCon "Lune.Prelude.Nothing" []) (CVar "a"),CoreAlt (PCon "Lune.Prelude.Just" [PVar "y"]) (CCase (CApp (CApp (CVar "prim_leInt") (CVar "x")) (CVar "y")) [CoreAlt (PCon "Lune.Prelude.True" []) (CApp (CVar "Lune.Prelude.Just") (CVar "y")),CoreAlt (PCon "Lune.Prelude.False" []) (CApp (CVar "Lune.Prelude.Just") (CVar "x"))])])])),CoreDecl "" (CInt 0),CoreDecl "Nova.sliceInclusive" (CLam [PVar "start",PVar "end",PVar "s"] (CLet "len" (CApp (CApp (CVar "Lune.Int.add") (CApp (CApp (CVar "Lune.Int.sub") (CVar "end")) (CVar "start"))) (CInt 1)) (CApp (CApp (CVar "Lune.String.take") (CVar "len")) (CApp (CApp (CVar "Lune.String.drop") (CVar "start")) (CVar "s"))))),CoreDecl "" (CInt 0),CoreDecl "Nova.ltInt" (CLam [PVar "a",PVar "b"] (CCase (CApp (CApp (CVar "prim_leInt") (CVar "a")) (CVar "b")) [CoreAlt (PCon "Lune.Prelude.True" []) (CCase (CApp (CApp (CVar "prim_eqInt") (CVar "a")) (CVar "b")) [CoreAlt (PCon "Lune.Prelude.True" []) (CVar "Lune.Prelude.False"),CoreAlt (PCon "Lune.Prelude.False" []) (CVar "Lune.Prelude.True")]),CoreAlt (PCon "Lune.Prelude.False" []) (CVar "Lune.Prelude.False")])),CoreDecl "" (CInt 0),CoreDecl "Nova.snippet" (CLam [PVar "n",PVar "s"] (CCase (CApp (CApp (CVar "prim_leInt") (CApp (CVar "Lune.String.length") (CVar "s"))) (CVar "n")) [CoreAlt (PCon "Lune.Prelude.True" []) (CVar "s"),CoreAlt (PCon "Lune.Prelude.False" []) (CApp (CApp (CVar "Lune.String.append") (CApp (CApp (CVar "Lune.String.take") (CVar "n")) (CVar "s"))) (CString "\8230"))])),CoreDecl "" (CInt 0),CoreDecl "Nova.callOpenRouter" (CLam [PVar "cfg",PWildcard,PWildcard] (CCase (CSelect (CVar "cfg") "apiKey") [CoreAlt (PCon "Lune.Prelude.Nothing" []) (CApp (CVar "prim_ioPure") (CApp (CVar "Lune.Prelude.Err") (CVar "Nova.Unauthorized"))),CoreAlt (PCon "Lune.Prelude.Just" [PWildcard]) (CApp (CVar "prim_ioPure") (CApp (CVar "Lune.Prelude.Err") (CApp (CVar "Nova.ProviderError") (CString "OpenRouter: HTTP client not implemented (v0)."))))])),CoreDecl "" (CInt 0),CoreDecl "Nova.callOllama" (CLam [PVar "cfg",PVar "modelId",PVar "prompt"] (CCase (CApp (CApp (CVar "Lune.String.startsWith") (CString "mock://")) (CSelect (CVar "cfg") "baseUrl")) [CoreAlt (PCon "Lune.Prelude.True" []) (CApp (CVar "prim_ioPure") (CApp (CApp (CVar "Nova.mockOllama") (CVar "modelId")) (CVar "prompt"))),CoreAlt (PCon "Lune.Prelude.False" []) (CApp (CVar "prim_ioPure") (CApp (CVar "Lune.Prelude.Err") (CApp (CVar "Nova.ProviderError") (CString "Ollama: HTTP client not implemented (v0)."))))])),CoreDecl "" (CInt 0),CoreDecl "Nova.mockOllama" (CLam [PVar "modelId",PVar "prompt"] (CCase (CApp (CApp (CVar "Lune.String.eq") (CVar "modelId")) (CString "mock-tool-wrapper")) [CoreAlt (PCon "Lune.Prelude.True" []) (CLet "pre" (CApp (CApp (CVar "Nova.countOccurrences") (CString "You must output exactly one JSON value and nothing else.")) (CVar "prompt")) (CLet "post" (CApp (CApp (CVar "Nova.countOccurrences") (CString "Output ONLY JSON now.")) (CVar "prompt")) (CApp (CVar "Lune.Prelude.Ok") (CRecord [("text",CApp (CApp (CVar "Lune.String.append") (CApp (CApp (CVar "Lune.String.append") (CString "[")) (CApp (CVar "Lune.String.fromInt") (CVar "pre")))) (CApp (CApp (CVar "Lune.String.append") (CApp (CApp (CVar "Lune.String.append") (CString ",")) (CApp (CVar "Lune.String.fromInt") (CVar "post")))) (CString "]"))),("usage",CVar "Lune.Prelude.Nothing")])))),CoreAlt (PCon "Lune.Prelude.False" []) (CCase (CApp (CApp (CVar "Lune.String.eq") (CVar "modelId")) (CString "mock-pure")) [CoreAlt (PCon "Lune.Prelude.True" []) (CApp (CVar "Lune.Prelude.Ok") (CRecord [("text",CString "{\"n\":1}"),("usage",CVar "Lune.Prelude.Nothing")])),CoreAlt (PCon "Lune.Prelude.False" []) (CCase (CApp (CApp (CVar "Lune.String.eq") (CVar "modelId")) (CString "mock-prose-prefix")) [CoreAlt (PCon "Lune.Prelude.True" []) (CApp (CVar "Lune.Prelude.Ok") (CRecord [("text",CString "Sure.\n{\"n\":1}"),("usage",CVar "Lune.Prelude.Nothing")])),CoreAlt (PCon "Lune.Prelude.False" []) (CCase (CApp (CApp (CVar "Lune.String.eq") (CVar "modelId")) (CString "mock-prose-suffix")) [CoreAlt (PCon "Lune.Prelude.True" []) (CApp (CVar "Lune.Prelude.Ok") (CRecord [("text",CString "{\"n\":1}\nThanks!"),("usage",CVar "Lune.Prelude.Nothing")])),CoreAlt (PCon "Lune.Prelude.False" []) (CCase (CApp (CApp (CVar "Lune.String.eq") (CVar "modelId")) (CString "mock-invalid")) [CoreAlt (PCon "Lune.Prelude.True" []) (CApp (CVar "Lune.Prelude.Ok") (CRecord [("text",CString "Ok: {not json}"),("usage",CVar "Lune.Prelude.Nothing")])),CoreAlt (PCon "Lune.Prelude.False" []) (CCase (CApp (CApp (CVar "Lune.String.eq") (CVar "modelId")) (CString "mock-no-json")) [CoreAlt (PCon "Lune.Prelude.True" []) (CApp (CVar "Lune.Prelude.Ok") (CRecord [("text",CString "No JSON here."),("usage",CVar "Lune.Prelude.Nothing")])),CoreAlt (PCon "Lune.Prelude.False" []) (CApp (CVar "Lune.Prelude.Err") (CApp (CVar "Nova.ProviderError") (CString "Unknown mock model id.")))])])])])])])),CoreDecl "" (CInt 0),CoreDecl "Nova.countOccurrences" (CLam [PVar "needle",PVar "haystack"] (CCase (CApp (CVar "Lune.String.isEmpty") (CVar "needle")) [CoreAlt (PCon "Lune.Prelude.True" []) (CInt 0),CoreAlt (PCon "Lune.Prelude.False" []) (CApp (CApp (CApp (CApp (CVar "Nova.countOccurrencesFrom") (CVar "needle")) (CApp (CVar "Lune.String.length") (CVar "needle"))) (CInt 0)) (CVar "haystack"))])),CoreDecl "" (CInt 0),CoreDecl "Nova.countOccurrencesFrom" (CLam [PVar "needle",PVar "needleLen",PVar "acc",PVar "s"] (CCase (CApp (CApp (CVar "Lune.String.indexOf") (CVar "needle")) (CVar "s")) [CoreAlt (PCon "Lune.Prelude.Nothing" []) (CVar "acc"),CoreAlt (PCon "Lune.Prelude.Just" [PVar "i"]) (CLet "next" (CApp (CApp (CVar "Lune.String.drop") (CApp (CApp (CVar "Lune.Int.add") (CVar "i")) (CVar "needleLen"))) (CVar "s")) (CApp (CApp (CApp (CApp (CVar "Nova.countOccurrencesFrom") (CVar "needle")) (CVar "needleLen")) (CApp (CApp (CVar "Lune.Int.add") (CVar "acc")) (CInt 1))) (CVar "next")))])),CoreDecl "" (CInt 0),CoreDecl "NovaDemo.showProvider" (CLam [PVar "p"] (CCase (CVar "p") [CoreAlt (PCon "Nova.OpenRouter" []) (CString "openrouter"),CoreAlt (PCon "Nova.Ollama" []) (CString "ollama")])),CoreDecl "" (CInt 0),CoreDecl "NovaDemo.showModel" (CLam [PVar "m"] (CApp (CApp (CVar "Lune.String.append") (CApp (CVar "NovaDemo.showProvider") (CSelect (CVar "m") "provider"))) (CApp (CApp (CVar "Lune.String.append") (CString ":")) (CSelect (CVar "m") "id")))),CoreDecl "" (CInt 0),CoreDecl "NovaDemo.showError" (CLam [PVar "e"] (CCase (CVar "e") [CoreAlt (PCon "Nova.NetworkError" [PVar "msg"]) (CApp (CApp (CVar "Lune.String.append") (CString "NetworkError ")) (CVar "msg")),CoreAlt (PCon "Nova.RateLimited" []) (CString "RateLimited"),CoreAlt (PCon "Nova.Unauthorized" []) (CString "Unauthorized"),CoreAlt (PCon "Nova.BadRequest" [PVar "msg"]) (CApp (CApp (CVar "Lune.String.append") (CString "BadRequest ")) (CVar "msg")),CoreAlt (PCon "Nova.ProviderError" [PVar "msg"]) (CApp (CApp (CVar "Lune.String.append") (CString "ProviderError ")) (CVar "msg")),CoreAlt (PCon "Nova.DecodeError" [PVar "msg"]) (CApp (CApp (CVar "Lune.String.append") (CString "DecodeError ")) (CVar "msg"))])),CoreDecl "" (CInt 0),CoreDecl "NovaDemo.showAskResult" (CLam [PVar "r"] (CCase (CVar "r") [CoreAlt (PCon "Lune.Prelude.Err" [PVar "e"]) (CApp (CVar "NovaDemo.showError") (CVar "e")),CoreAlt (PCon "Lune.Prelude.Ok" [PVar "resp"]) (CSelect (CVar "resp") "text")])),CoreDecl "" (CInt 0),CoreDecl "NovaDemo.showJsonResult" (CLam [PVar "r"] (CCase (CVar "r") [CoreAlt (PCon "Lune.Prelude.Err" [PVar "e"]) (CApp (CVar "NovaDemo.showError") (CVar "e")),CoreAlt (PCon "Lune.Prelude.Ok" [PVar "j"]) (CApp (CVar "Lune.Json.stringify") (CVar "j"))])),CoreDecl "" (CInt 0),CoreDecl "NovaDemo.main" (CLet "client" (CApp (CApp (CVar "Nova.withOllamaBaseUrl") (CString "mock://")) (CVar "Nova.defaultClient")) (CApp (CApp (CSelect (CVar "$dictMonad_Task") "then") (CApp (CVar "Lune.IO.println") (CString "model_builders_openrouter:"))) (CLet "m1" (CApp (CVar "Nova.openrouterModel") (CString "x")) (CApp (CApp (CSelect (CVar "$dictMonad_Task") "then") (CApp (CVar "Lune.IO.println") (CApp (CVar "NovaDemo.showModel") (CVar "m1")))) (CApp (CApp (CSelect (CVar "$dictMonad_Task") "then") (CApp (CVar "Lune.IO.println") (CString "model_builders_ollama:"))) (CLet "m2" (CApp (CVar "Nova.ollamaModel") (CString "y")) (CApp (CApp (CSelect (CVar "$dictMonad_Task") "then") (CApp (CVar "Lune.IO.println") (CApp (CVar "NovaDemo.showModel") (CVar "m2")))) (CApp (CApp (CSelect (CVar "$dictMonad_Task") "then") (CApp (CVar "Lune.IO.println") (CString "routing_openrouter_missing_key:"))) (CApp (CApp (CSelect (CVar "$dictMonad_Task") "andThen") (CApp (CVar "Lune.Task.fromIO") (CApp (CApp (CVar "Nova.ask") (CVar "client")) (CRecord [("model",CVar "m1"),("prompt",CTemplate True [CTemplateText "hi"])])))) (CLam [PVar "r1"] (CApp (CApp (CSelect (CVar "$dictMonad_Task") "then") (CApp (CVar "Lune.IO.println") (CApp (CVar "NovaDemo.showAskResult") (CVar "r1")))) (CApp (CApp (CSelect (CVar "$dictMonad_Task") "then") (CApp (CVar "Lune.IO.println") (CString "routing_ollama_mock:"))) (CApp (CApp (CSelect (CVar "$dictMonad_Task") "andThen") (CApp (CVar "Lune.Task.fromIO") (CApp (CApp (CVar "Nova.ask") (CVar "client")) (CRecord [("model",CApp (CVar "Nova.ollamaModel") (CString "mock-pure")),("prompt",CTemplate True [CTemplateText "hi"])])))) (CLam [PVar "r2"] (CApp (CApp (CSelect (CVar "$dictMonad_Task") "then") (CApp (CVar "Lune.IO.println") (CApp (CVar "NovaDemo.showAskResult") (CVar "r2")))) (CApp (CApp (CSelect (CVar "$dictMonad_Task") "then") (CApp (CVar "Lune.IO.println") (CString "tool_wrapper_counts:"))) (CApp (CApp (CSelect (CVar "$dictMonad_Task") "andThen") (CApp (CVar "Lune.Task.fromIO") (CApp (CApp (CApp (CVar "Nova.tool") (CVar "$dictJson.Decode_Json")) (CVar "client")) (CRecord [("model",CApp (CVar "Nova.ollamaModel") (CString "mock-tool-wrapper")),("prompt",CTemplate True [CTemplateText "user"])])))) (CLam [PVar "countsR"] (CApp (CApp (CSelect (CVar "$dictMonad_Task") "then") (CApp (CVar "Lune.IO.println") (CApp (CVar "NovaDemo.showJsonResult") (CVar "countsR")))) (CApp (CApp (CSelect (CVar "$dictMonad_Task") "then") (CApp (CVar "Lune.IO.println") (CString "json_pure:"))) (CApp (CApp (CSelect (CVar "$dictMonad_Task") "andThen") (CApp (CVar "Lune.Task.fromIO") (CApp (CApp (CApp (CVar "Nova.json") (CVar "$dictJson.Decode_Json")) (CVar "client")) (CRecord [("model",CApp (CVar "Nova.ollamaModel") (CString "mock-pure")),("prompt",CTemplate True [CTemplateText "p"])])))) (CLam [PVar "jp"] (CApp (CApp (CSelect (CVar "$dictMonad_Task") "then") (CApp (CVar "Lune.IO.println") (CApp (CVar "NovaDemo.showJsonResult") (CVar "jp")))) (CApp (CApp (CSelect (CVar "$dictMonad_Task") "then") (CApp (CVar "Lune.IO.println") (CString "tool_pure:"))) (CApp (CApp (CSelect (CVar "$dictMonad_Task") "andThen") (CApp (CVar "Lune.Task.fromIO") (CApp (CApp (CApp (CVar "Nova.tool") (CVar "$dictJson.Decode_Json")) (CVar "client")) (CRecord [("model",CApp (CVar "Nova.ollamaModel") (CString "mock-pure")),("prompt",CTemplate True [CTemplateText "p"])])))) (CLam [PVar "tp"] (CApp (CApp (CSelect (CVar "$dictMonad_Task") "then") (CApp (CVar "Lune.IO.println") (CApp (CVar "NovaDemo.showJsonResult") (CVar "tp")))) (CApp (CApp (CSelect (CVar "$dictMonad_Task") "then") (CApp (CVar "Lune.IO.println") (CString "json_prose_prefix:"))) (CApp (CApp (CSelect (CVar "$dictMonad_Task") "andThen") (CApp (CVar "Lune.Task.fromIO") (CApp (CApp (CApp (CVar "Nova.json") (CVar "$dictJson.Decode_Json")) (CVar "client")) (CRecord [("model",CApp (CVar "Nova.ollamaModel") (CString "mock-prose-prefix")),("prompt",CTemplate True [CTemplateText "p"])])))) (CLam [PVar "jpp"] (CApp (CApp (CSelect (CVar "$dictMonad_Task") "then") (CApp (CVar "Lune.IO.println") (CApp (CVar "NovaDemo.showJsonResult") (CVar "jpp")))) (CApp (CApp (CSelect (CVar "$dictMonad_Task") "then") (CApp (CVar "Lune.IO.println") (CString "tool_prose_prefix:"))) (CApp (CApp (CSelect (CVar "$dictMonad_Task") "andThen") (CApp (CVar "Lune.Task.fromIO") (CApp (CApp (CApp (CVar "Nova.tool") (CVar "$dictJson.Decode_Json")) (CVar "client")) (CRecord [("model",CApp (CVar "Nova.ollamaModel") (CString "mock-prose-prefix")),("prompt",CTemplate True [CTemplateText "p"])])))) (CLam [PVar "tpp"] (CApp (CApp (CSelect (CVar "$dictMonad_Task") "then") (CApp (CVar "Lune.IO.println") (CApp (CVar "NovaDemo.showJsonResult") (CVar "tpp")))) (CApp (CApp (CSelect (CVar "$dictMonad_Task") "then") (CApp (CVar "Lune.IO.println") (CString "json_prose_suffix:"))) (CApp (CApp (CSelect (CVar "$dictMonad_Task") "andThen") (CApp (CVar "Lune.Task.fromIO") (CApp (CApp (CApp (CVar "Nova.json") (CVar "$dictJson.Decode_Json")) (CVar "client")) (CRecord [("model",CApp (CVar "Nova.ollamaModel") (CString "mock-prose-suffix")),("prompt",CTemplate True [CTemplateText "p"])])))) (CLam [PVar "jps"] (CApp (CApp (CSelect (CVar "$dictMonad_Task") "then") (CApp (CVar "Lune.IO.println") (CApp (CVar "NovaDemo.showJsonResult") (CVar "jps")))) (CApp (CApp (CSelect (CVar "$dictMonad_Task") "then") (CApp (CVar "Lune.IO.println") (CString "tool_prose_suffix:"))) (CApp (CApp (CSelect (CVar "$dictMonad_Task") "andThen") (CApp (CVar "Lune.Task.fromIO") (CApp (CApp (CApp (CVar "Nova.tool") (CVar "$dictJson.Decode_Json")) (CVar "client")) (CRecord [("model",CApp (CVar "Nova.ollamaModel") (CString "mock-prose-suffix")),("prompt",CTemplate True [CTemplateText "p"])])))) (CLam [PVar "tps"] (CApp (CApp (CSelect (CVar "$dictMonad_Task") "then") (CApp (CVar "Lune.IO.println") (CApp (CVar "NovaDemo.showJsonResult") (CVar "tps")))) (CApp (CApp (CSelect (CVar "$dictMonad_Task") "then") (CApp (CVar "Lune.IO.println") (CString "tool_invalid:"))) (CApp (CApp (CSelect (CVar "$dictMonad_Task") "andThen") (CApp (CVar "Lune.Task.fromIO") (CApp (CApp (CApp (CVar "Nova.tool") (CVar "$dictJson.Decode_Json")) (CVar "client")) (CRecord [("model",CApp (CVar "Nova.ollamaModel") (CString "mock-invalid")),("prompt",CTemplate True [CTemplateText "p"])])))) (CLam [PVar "ti"] (CApp (CApp (CSelect (CVar "$dictMonad_Task") "then") (CApp (CVar "Lune.IO.println") (CApp (CVar "NovaDemo.showJsonResult") (CVar "ti")))) (CApp (CApp (CSelect (CVar "$dictMonad_Task") "then") (CApp (CVar "Lune.IO.println") (CString "tool_no_json:"))) (CApp (CApp (CSelect (CVar "$dictMonad_Task") "andThen") (CApp (CVar "Lune.Task.fromIO") (CApp (CApp (CApp (CVar "Nova.tool") (CVar "$dictJson.Decode_Json")) (CVar "client")) (CRecord [("model",CApp (CVar "Nova.ollamaModel") (CString "mock-no-json")),("prompt",CTemplate True [CTemplateText "p"])])))) (CLam [PVar "tn"] (CApp (CVar "Lune.IO.println") (CApp (CVar "NovaDemo.showJsonResult") (CVar "tn")))))))))))))))))))))))))))))))))))))))))))))))))))))]}
