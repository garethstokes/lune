CoreModule {coreName = "ApiServer", coreDecls = [CoreDecl "$dictFunctor_IO" (CRecord [("map",CLam [PVar "f",PVar "ma"] (CApp (CApp (CVar "$primIOBind") (CVar "ma")) (CLam [PVar "a"] (CApp (CVar "$primIOPure") (CApp (CVar "f") (CVar "a"))))))]),CoreDecl "$dictApplicative_IO" (CRecord [("$superFunctor",CVar "$dictFunctor_IO"),("pure",CVar "$primIOPure"),("apply",CLam [PVar "mf",PVar "ma"] (CApp (CApp (CVar "$primIOBind") (CVar "mf")) (CLam [PVar "f"] (CApp (CApp (CVar "$primIOBind") (CVar "ma")) (CLam [PVar "a"] (CApp (CVar "$primIOPure") (CApp (CVar "f") (CVar "a"))))))))]),CoreDecl "$dictMonad_IO" (CRecord [("$superApplicative",CVar "$dictApplicative_IO"),("andThen",CVar "$primIOBind"),("then",CVar "$primIOThen")]),CoreDecl "$dictFunctor_Task" (CRecord [("map",CLam [PVar "f",PVar "ta"] (CCase (CVar "ta") [CoreAlt (PCon "Lune.Prelude.Task" [Located {locSpan = Span {spanStartLine = 0, spanStartCol = 0, spanEndLine = 0, spanEndCol = 0}, locComments = Comments {commentsLeading = [], commentsTrailing = [], commentsInner = []}, locValue = PVar "io"}]) (CApp (CVar "Lune.Prelude.Task") (CApp (CApp (CVar "$primIOBind") (CVar "io")) (CLam [PVar "r"] (CCase (CVar "r") [CoreAlt (PCon "Lune.Prelude.Err" [Located {locSpan = Span {spanStartLine = 0, spanStartCol = 0, spanEndLine = 0, spanEndCol = 0}, locComments = Comments {commentsLeading = [], commentsTrailing = [], commentsInner = []}, locValue = PVar "e"}]) (CApp (CVar "$primIOPure") (CApp (CVar "Lune.Prelude.Err") (CVar "e"))),CoreAlt (PCon "Lune.Prelude.Ok" [Located {locSpan = Span {spanStartLine = 0, spanStartCol = 0, spanEndLine = 0, spanEndCol = 0}, locComments = Comments {commentsLeading = [], commentsTrailing = [], commentsInner = []}, locValue = PVar "a"}]) (CApp (CVar "$primIOPure") (CApp (CVar "Lune.Prelude.Ok") (CApp (CVar "f") (CVar "a"))))]))))]))]),CoreDecl "$dictApplicative_Task" (CRecord [("$superFunctor",CVar "$dictFunctor_Task"),("pure",CLam [PVar "a"] (CApp (CVar "Lune.Prelude.Task") (CApp (CVar "$primIOPure") (CApp (CVar "Lune.Prelude.Ok") (CVar "a"))))),("apply",CLam [PVar "tf",PVar "ta"] (CCase (CVar "tf") [CoreAlt (PCon "Lune.Prelude.Task" [Located {locSpan = Span {spanStartLine = 0, spanStartCol = 0, spanEndLine = 0, spanEndCol = 0}, locComments = Comments {commentsLeading = [], commentsTrailing = [], commentsInner = []}, locValue = PVar "ioF"}]) (CCase (CVar "ta") [CoreAlt (PCon "Lune.Prelude.Task" [Located {locSpan = Span {spanStartLine = 0, spanStartCol = 0, spanEndLine = 0, spanEndCol = 0}, locComments = Comments {commentsLeading = [], commentsTrailing = [], commentsInner = []}, locValue = PVar "ioA"}]) (CApp (CVar "Lune.Prelude.Task") (CApp (CApp (CVar "$primIOBind") (CVar "ioF")) (CLam [PVar "rf"] (CCase (CVar "rf") [CoreAlt (PCon "Lune.Prelude.Err" [Located {locSpan = Span {spanStartLine = 0, spanStartCol = 0, spanEndLine = 0, spanEndCol = 0}, locComments = Comments {commentsLeading = [], commentsTrailing = [], commentsInner = []}, locValue = PVar "e"}]) (CApp (CVar "$primIOPure") (CApp (CVar "Lune.Prelude.Err") (CVar "e"))),CoreAlt (PCon "Lune.Prelude.Ok" [Located {locSpan = Span {spanStartLine = 0, spanStartCol = 0, spanEndLine = 0, spanEndCol = 0}, locComments = Comments {commentsLeading = [], commentsTrailing = [], commentsInner = []}, locValue = PVar "f"}]) (CApp (CApp (CVar "$primIOBind") (CVar "ioA")) (CLam [PVar "ra"] (CCase (CVar "ra") [CoreAlt (PCon "Lune.Prelude.Err" [Located {locSpan = Span {spanStartLine = 0, spanStartCol = 0, spanEndLine = 0, spanEndCol = 0}, locComments = Comments {commentsLeading = [], commentsTrailing = [], commentsInner = []}, locValue = PVar "e"}]) (CApp (CVar "$primIOPure") (CApp (CVar "Lune.Prelude.Err") (CVar "e"))),CoreAlt (PCon "Lune.Prelude.Ok" [Located {locSpan = Span {spanStartLine = 0, spanStartCol = 0, spanEndLine = 0, spanEndCol = 0}, locComments = Comments {commentsLeading = [], commentsTrailing = [], commentsInner = []}, locValue = PVar "a"}]) (CApp (CVar "$primIOPure") (CApp (CVar "Lune.Prelude.Ok") (CApp (CVar "f") (CVar "a"))))])))]))))])]))]),CoreDecl "$dictMonad_Task" (CRecord [("$superApplicative",CVar "$dictApplicative_Task"),("andThen",CLam [PVar "ta",PVar "k"] (CCase (CVar "ta") [CoreAlt (PCon "Lune.Prelude.Task" [Located {locSpan = Span {spanStartLine = 0, spanStartCol = 0, spanEndLine = 0, spanEndCol = 0}, locComments = Comments {commentsLeading = [], commentsTrailing = [], commentsInner = []}, locValue = PVar "io"}]) (CApp (CVar "Lune.Prelude.Task") (CApp (CApp (CVar "$primIOBind") (CVar "io")) (CLam [PVar "r"] (CCase (CVar "r") [CoreAlt (PCon "Lune.Prelude.Err" [Located {locSpan = Span {spanStartLine = 0, spanStartCol = 0, spanEndLine = 0, spanEndCol = 0}, locComments = Comments {commentsLeading = [], commentsTrailing = [], commentsInner = []}, locValue = PVar "e"}]) (CApp (CVar "$primIOPure") (CApp (CVar "Lune.Prelude.Err") (CVar "e"))),CoreAlt (PCon "Lune.Prelude.Ok" [Located {locSpan = Span {spanStartLine = 0, spanStartCol = 0, spanEndLine = 0, spanEndCol = 0}, locComments = Comments {commentsLeading = [], commentsTrailing = [], commentsInner = []}, locValue = PVar "a"}]) (CCase (CApp (CVar "k") (CVar "a")) [CoreAlt (PCon "Lune.Prelude.Task" [Located {locSpan = Span {spanStartLine = 0, spanStartCol = 0, spanEndLine = 0, spanEndCol = 0}, locComments = Comments {commentsLeading = [], commentsTrailing = [], commentsInner = []}, locValue = PVar "io2"}]) (CVar "io2")])]))))])),("then",CLam [PVar "ta",PVar "tb"] (CCase (CVar "ta") [CoreAlt (PCon "Lune.Prelude.Task" [Located {locSpan = Span {spanStartLine = 0, spanStartCol = 0, spanEndLine = 0, spanEndCol = 0}, locComments = Comments {commentsLeading = [], commentsTrailing = [], commentsInner = []}, locValue = PVar "ioA"}]) (CApp (CVar "Lune.Prelude.Task") (CApp (CApp (CVar "$primIOBind") (CVar "ioA")) (CLam [PVar "r"] (CCase (CVar "r") [CoreAlt (PCon "Lune.Prelude.Err" [Located {locSpan = Span {spanStartLine = 0, spanStartCol = 0, spanEndLine = 0, spanEndCol = 0}, locComments = Comments {commentsLeading = [], commentsTrailing = [], commentsInner = []}, locValue = PVar "e"}]) (CApp (CVar "$primIOPure") (CApp (CVar "Lune.Prelude.Err") (CVar "e"))),CoreAlt (PCon "Lune.Prelude.Ok" [Located {locSpan = Span {spanStartLine = 0, spanStartCol = 0, spanEndLine = 0, spanEndCol = 0}, locComments = Comments {commentsLeading = [], commentsTrailing = [], commentsInner = []}, locValue = PWildcard}]) (CCase (CVar "tb") [CoreAlt (PCon "Lune.Prelude.Task" [Located {locSpan = Span {spanStartLine = 0, spanStartCol = 0, spanEndLine = 0, spanEndCol = 0}, locComments = Comments {commentsLeading = [], commentsTrailing = [], commentsInner = []}, locValue = PVar "ioB"}]) (CVar "ioB")])]))))]))]),CoreDecl "$dictFunctor_Result" (CRecord [("map",CLam [PVar "f",PVar "r"] (CCase (CVar "r") [CoreAlt (PCon "Lune.Prelude.Err" [Located {locSpan = Span {spanStartLine = 0, spanStartCol = 0, spanEndLine = 0, spanEndCol = 0}, locComments = Comments {commentsLeading = [], commentsTrailing = [], commentsInner = []}, locValue = PVar "e"}]) (CApp (CVar "Lune.Prelude.Err") (CVar "e")),CoreAlt (PCon "Lune.Prelude.Ok" [Located {locSpan = Span {spanStartLine = 0, spanStartCol = 0, spanEndLine = 0, spanEndCol = 0}, locComments = Comments {commentsLeading = [], commentsTrailing = [], commentsInner = []}, locValue = PVar "a"}]) (CApp (CVar "Lune.Prelude.Ok") (CApp (CVar "f") (CVar "a")))]))]),CoreDecl "$dictApplicative_Result" (CRecord [("$superFunctor",CVar "$dictFunctor_Result"),("pure",CLam [PVar "a"] (CApp (CVar "Lune.Prelude.Ok") (CVar "a"))),("apply",CLam [PVar "rf",PVar "ra"] (CCase (CVar "rf") [CoreAlt (PCon "Lune.Prelude.Err" [Located {locSpan = Span {spanStartLine = 0, spanStartCol = 0, spanEndLine = 0, spanEndCol = 0}, locComments = Comments {commentsLeading = [], commentsTrailing = [], commentsInner = []}, locValue = PVar "e"}]) (CApp (CVar "Lune.Prelude.Err") (CVar "e")),CoreAlt (PCon "Lune.Prelude.Ok" [Located {locSpan = Span {spanStartLine = 0, spanStartCol = 0, spanEndLine = 0, spanEndCol = 0}, locComments = Comments {commentsLeading = [], commentsTrailing = [], commentsInner = []}, locValue = PVar "f"}]) (CCase (CVar "ra") [CoreAlt (PCon "Lune.Prelude.Err" [Located {locSpan = Span {spanStartLine = 0, spanStartCol = 0, spanEndLine = 0, spanEndCol = 0}, locComments = Comments {commentsLeading = [], commentsTrailing = [], commentsInner = []}, locValue = PVar "e"}]) (CApp (CVar "Lune.Prelude.Err") (CVar "e")),CoreAlt (PCon "Lune.Prelude.Ok" [Located {locSpan = Span {spanStartLine = 0, spanStartCol = 0, spanEndLine = 0, spanEndCol = 0}, locComments = Comments {commentsLeading = [], commentsTrailing = [], commentsInner = []}, locValue = PVar "a"}]) (CApp (CVar "Lune.Prelude.Ok") (CApp (CVar "f") (CVar "a")))])]))]),CoreDecl "$dictMonad_Result" (CRecord [("$superApplicative",CVar "$dictApplicative_Result"),("andThen",CLam [PVar "m",PVar "k"] (CCase (CVar "m") [CoreAlt (PCon "Lune.Prelude.Ok" [Located {locSpan = Span {spanStartLine = 0, spanStartCol = 0, spanEndLine = 0, spanEndCol = 0}, locComments = Comments {commentsLeading = [], commentsTrailing = [], commentsInner = []}, locValue = PVar "a"}]) (CApp (CVar "k") (CVar "a")),CoreAlt (PCon "Lune.Prelude.Err" [Located {locSpan = Span {spanStartLine = 0, spanStartCol = 0, spanEndLine = 0, spanEndCol = 0}, locComments = Comments {commentsLeading = [], commentsTrailing = [], commentsInner = []}, locValue = PVar "e"}]) (CApp (CVar "Lune.Prelude.Err") (CVar "e"))])),("then",CLam [PVar "ra",PVar "rb"] (CCase (CVar "ra") [CoreAlt (PCon "Lune.Prelude.Ok" [Located {locSpan = Span {spanStartLine = 0, spanStartCol = 0, spanEndLine = 0, spanEndCol = 0}, locComments = Comments {commentsLeading = [], commentsTrailing = [], commentsInner = []}, locValue = PWildcard}]) (CVar "rb"),CoreAlt (PCon "Lune.Prelude.Err" [Located {locSpan = Span {spanStartLine = 0, spanStartCol = 0, spanEndLine = 0, spanEndCol = 0}, locComments = Comments {commentsLeading = [], commentsTrailing = [], commentsInner = []}, locValue = PVar "e"}]) (CApp (CVar "Lune.Prelude.Err") (CVar "e"))]))]),CoreDecl "$dictFunctor_STM" (CRecord [("map",CLam [PVar "f",PVar "ma"] (CApp (CApp (CVar "$primSTMBind") (CVar "ma")) (CLam [PVar "a"] (CApp (CVar "$primSTMPure") (CApp (CVar "f") (CVar "a"))))))]),CoreDecl "$dictApplicative_STM" (CRecord [("$superFunctor",CVar "$dictFunctor_STM"),("pure",CVar "$primSTMPure"),("apply",CLam [PVar "mf",PVar "ma"] (CApp (CApp (CVar "$primSTMBind") (CVar "mf")) (CLam [PVar "f"] (CApp (CApp (CVar "$primSTMBind") (CVar "ma")) (CLam [PVar "a"] (CApp (CVar "$primSTMPure") (CApp (CVar "f") (CVar "a"))))))))]),CoreDecl "$dictMonad_STM" (CRecord [("$superApplicative",CVar "$dictApplicative_STM"),("andThen",CVar "$primSTMBind"),("then",CLam [PVar "ma",PVar "mb"] (CApp (CApp (CVar "$primSTMBind") (CVar "ma")) (CLam [PWildcard] (CVar "mb"))))]),CoreDecl "" (CInt 0),CoreDecl "" (CInt 0),CoreDecl "Lune.Prelude.unit" (CVar "Lune.Prelude.Unit"),CoreDecl "" (CInt 0),CoreDecl "" (CInt 0),CoreDecl "" (CInt 0),CoreDecl "" (CInt 0),CoreDecl "" (CInt 0),CoreDecl "" (CInt 0),CoreDecl "" (CInt 0),CoreDecl "" (CInt 0),CoreDecl "" (CInt 0),CoreDecl "" (CInt 0),CoreDecl "" (CInt 0),CoreDecl "" (CInt 0),CoreDecl "" (CInt 0),CoreDecl "Lune.Prelude.fst" (CLam [PVar "p"] (CCase (CVar "p") [CoreAlt (PCon "Lune.Prelude.Pair" [Located {locSpan = Span {spanStartLine = 76, spanStartCol = 10, spanEndLine = 76, spanEndCol = 12}, locComments = Comments {commentsLeading = [], commentsTrailing = [], commentsInner = []}, locValue = PVar "x"},Located {locSpan = Span {spanStartLine = 76, spanStartCol = 12, spanEndLine = 76, spanEndCol = 14}, locComments = Comments {commentsLeading = [], commentsTrailing = [], commentsInner = []}, locValue = PWildcard}]) (CVar "x")])),CoreDecl "" (CInt 0),CoreDecl "Lune.Prelude.snd" (CLam [PVar "p"] (CCase (CVar "p") [CoreAlt (PCon "Lune.Prelude.Pair" [Located {locSpan = Span {spanStartLine = 81, spanStartCol = 10, spanEndLine = 81, spanEndCol = 12}, locComments = Comments {commentsLeading = [], commentsTrailing = [], commentsInner = []}, locValue = PWildcard},Located {locSpan = Span {spanStartLine = 81, spanStartCol = 12, spanEndLine = 81, spanEndCol = 14}, locComments = Comments {commentsLeading = [], commentsTrailing = [], commentsInner = []}, locValue = PVar "y"}]) (CVar "y")])),CoreDecl "" (CInt 0),CoreDecl "" (CInt 0),CoreDecl "" (CInt 0),CoreDecl "" (CInt 0),CoreDecl "" (CInt 0),CoreDecl "" (CInt 0),CoreDecl "" (CInt 0),CoreDecl "" (CInt 0),CoreDecl "" (CInt 0),CoreDecl "" (CInt 0),CoreDecl "" (CInt 0),CoreDecl "" (CInt 0),CoreDecl "Lune.Json.parse" (CVar "prim_jsonParse"),CoreDecl "" (CInt 0),CoreDecl "Lune.Json.stringify" (CVar "prim_jsonStringify"),CoreDecl "" (CInt 0),CoreDecl "" (CInt 0),CoreDecl "" (CInt 0),CoreDecl "" (CInt 0),CoreDecl "Lune.Http.response" (CLam [PVar "status",PVar "body"] (CRecord [("status",CVar "status"),("headers",CVar "Lune.Prelude.Nil"),("body",CVar "body")])),CoreDecl "" (CInt 0),CoreDecl "Lune.Http.jsonResponse" (CLam [PVar "status",PVar "json"] (CRecord [("status",CVar "status"),("headers",CApp (CApp (CVar "Lune.Prelude.Cons") (CRecord [("key",CString "Content-Type"),("value",CString "application/json")])) (CVar "Lune.Prelude.Nil")),("body",CApp (CVar "prim_jsonStringify") (CVar "json"))])),CoreDecl "" (CInt 0),CoreDecl "Lune.Http.ok" (CLam [PVar "body"] (CApp (CApp (CVar "Lune.Http.response") (CInt 200)) (CVar "body"))),CoreDecl "" (CInt 0),CoreDecl "Lune.Http.created" (CLam [PVar "body"] (CApp (CApp (CVar "Lune.Http.response") (CInt 201)) (CVar "body"))),CoreDecl "" (CInt 0),CoreDecl "Lune.Http.noContent" (CRecord [("status",CInt 204),("headers",CVar "Lune.Prelude.Nil"),("body",CString "")]),CoreDecl "" (CInt 0),CoreDecl "Lune.Http.badRequest" (CLam [PVar "body"] (CApp (CApp (CVar "Lune.Http.response") (CInt 400)) (CVar "body"))),CoreDecl "" (CInt 0),CoreDecl "Lune.Http.unauthorized" (CLam [PVar "body"] (CApp (CApp (CVar "Lune.Http.response") (CInt 401)) (CVar "body"))),CoreDecl "" (CInt 0),CoreDecl "Lune.Http.forbidden" (CLam [PVar "body"] (CApp (CApp (CVar "Lune.Http.response") (CInt 403)) (CVar "body"))),CoreDecl "" (CInt 0),CoreDecl "Lune.Http.notFound" (CLam [PVar "body"] (CApp (CApp (CVar "Lune.Http.response") (CInt 404)) (CVar "body"))),CoreDecl "" (CInt 0),CoreDecl "Lune.Http.conflict" (CLam [PVar "body"] (CApp (CApp (CVar "Lune.Http.response") (CInt 409)) (CVar "body"))),CoreDecl "" (CInt 0),CoreDecl "Lune.Http.serverError" (CLam [PVar "body"] (CApp (CApp (CVar "Lune.Http.response") (CInt 500)) (CVar "body"))),CoreDecl "" (CInt 0),CoreDecl "Lune.Http.redirect" (CLam [PVar "url"] (CRecord [("status",CInt 302),("headers",CApp (CApp (CVar "Lune.Prelude.Cons") (CRecord [("key",CString "Location"),("value",CVar "url")])) (CVar "Lune.Prelude.Nil")),("body",CString "")])),CoreDecl "" (CInt 0),CoreDecl "Lune.Http.jsonOk" (CLam [PVar "json"] (CApp (CApp (CVar "Lune.Http.jsonResponse") (CInt 200)) (CVar "json"))),CoreDecl "" (CInt 0),CoreDecl "Lune.Http.jsonCreated" (CLam [PVar "json"] (CApp (CApp (CVar "Lune.Http.jsonResponse") (CInt 201)) (CVar "json"))),CoreDecl "" (CInt 0),CoreDecl "Lune.Http.withHeader" (CLam [PVar "key",PVar "value",PVar "resp"] (CRecord [("status",CSelect (CVar "resp") "status"),("headers",CApp (CApp (CVar "Lune.Prelude.Cons") (CRecord [("key",CVar "key"),("value",CVar "value")])) (CSelect (CVar "resp") "headers")),("body",CSelect (CVar "resp") "body")])),CoreDecl "" (CInt 0),CoreDecl "" (CInt 0),CoreDecl "Lune.IO.pure" (CLam [PVar "a"] (CApp (CVar "prim_ioPure") (CVar "a"))),CoreDecl "" (CInt 0),CoreDecl "Lune.IO.andThen" (CLam [PVar "io",PVar "f"] (CApp (CApp (CVar "prim_ioBind") (CVar "io")) (CVar "f"))),CoreDecl "" (CInt 0),CoreDecl "Lune.IO.println" (CLam [PVar "s"] (CApp (CVar "Lune.Prelude.Task") (CApp (CApp (CVar "Lune.IO.andThen") (CApp (CVar "prim_putStrLn") (CVar "s"))) (CLam [PVar "u"] (CApp (CVar "Lune.IO.pure") (CApp (CVar "Lune.Prelude.Ok") (CVar "u"))))))),CoreDecl "" (CInt 0),CoreDecl "Lune.IO.readLine" (CApp (CVar "Lune.Prelude.Task") (CApp (CApp (CVar "Lune.IO.andThen") (CVar "prim_readLine")) (CLam [PVar "s"] (CApp (CVar "Lune.IO.pure") (CApp (CVar "Lune.Prelude.Ok") (CVar "s")))))),CoreDecl "" (CInt 0),CoreDecl "Lune.IO.readInt" (CApp (CVar "Lune.Prelude.Task") (CApp (CApp (CVar "Lune.IO.andThen") (CVar "prim_readInt")) (CLam [PVar "n"] (CApp (CVar "Lune.IO.pure") (CApp (CVar "Lune.Prelude.Ok") (CVar "n")))))),CoreDecl "" (CInt 0),CoreDecl "Lune.IO.sleepMs" (CLam [PVar "ms"] (CApp (CVar "Lune.Prelude.Task") (CApp (CApp (CVar "Lune.IO.andThen") (CApp (CVar "prim_sleepMs") (CVar "ms"))) (CLam [PVar "u"] (CApp (CVar "Lune.IO.pure") (CApp (CVar "Lune.Prelude.Ok") (CVar "u"))))))),CoreDecl "" (CInt 0),CoreDecl "Lune.IO.readFile" (CLam [PVar "path"] (CApp (CVar "Lune.Prelude.Task") (CApp (CVar "prim_readFile") (CVar "path")))),CoreDecl "" (CInt 0),CoreDecl "Lune.IO.writeFile" (CLam [PVar "path",PVar "contents"] (CApp (CVar "Lune.Prelude.Task") (CApp (CApp (CVar "prim_writeFile") (CVar "path")) (CVar "contents")))),CoreDecl "" (CInt 0),CoreDecl "" (CInt 0),CoreDecl "Lune.Fiber.spawn" (CLam [PVar "task"] (CCase (CVar "task") [CoreAlt (PCon "Lune.Prelude.Task" [Located {locSpan = Span {spanStartLine = 24, spanStartCol = 10, spanEndLine = 24, spanEndCol = 13}, locComments = Comments {commentsLeading = [], commentsTrailing = [], commentsInner = []}, locValue = PVar "io"}]) (CApp (CVar "Lune.Prelude.Task") (CApp (CApp (CVar "Lune.IO.andThen") (CApp (CVar "prim_spawn") (CVar "io"))) (CLam [PVar "fib"] (CApp (CVar "Lune.IO.pure") (CApp (CVar "Lune.Prelude.Ok") (CVar "fib"))))))])),CoreDecl "" (CInt 0),CoreDecl "Lune.Fiber.await" (CLam [PVar "fib"] (CApp (CVar "Lune.Prelude.Task") (CApp (CVar "prim_await") (CVar "fib")))),CoreDecl "" (CInt 0),CoreDecl "Lune.Fiber.awaitAny" (CLam [PVar "a",PVar "b"] (CApp (CVar "Lune.Prelude.Task") (CApp (CApp (CVar "prim_awaitAny") (CVar "a")) (CVar "b")))),CoreDecl "" (CInt 0),CoreDecl "Lune.Fiber.yield" (CApp (CVar "Lune.Prelude.Task") (CApp (CApp (CVar "Lune.IO.andThen") (CVar "prim_yield")) (CLam [PVar "u"] (CApp (CVar "Lune.IO.pure") (CApp (CVar "Lune.Prelude.Ok") (CVar "u")))))),CoreDecl "" (CInt 0),CoreDecl "" (CInt 0),CoreDecl "Lune.Task.succeed" (CLam [PVar "a"] (CApp (CVar "Lune.Prelude.Task") (CApp (CVar "Lune.IO.pure") (CApp (CVar "Lune.Prelude.Ok") (CVar "a"))))),CoreDecl "" (CInt 0),CoreDecl "Lune.Task.fail" (CLam [PVar "e"] (CApp (CVar "Lune.Prelude.Task") (CApp (CVar "Lune.IO.pure") (CApp (CVar "Lune.Prelude.Err") (CVar "e"))))),CoreDecl "" (CInt 0),CoreDecl "Lune.Task.fromIO" (CLam [PVar "io"] (CApp (CVar "Lune.Prelude.Task") (CApp (CApp (CVar "Lune.IO.andThen") (CVar "io")) (CLam [PVar "a"] (CApp (CVar "Lune.IO.pure") (CApp (CVar "Lune.Prelude.Ok") (CVar "a"))))))),CoreDecl "" (CInt 0),CoreDecl "Lune.Task.fromResult" (CLam [PVar "r"] (CCase (CVar "r") [CoreAlt (PCon "Lune.Prelude.Ok" [Located {locSpan = Span {spanStartLine = 45, spanStartCol = 8, spanEndLine = 45, spanEndCol = 10}, locComments = Comments {commentsLeading = [], commentsTrailing = [], commentsInner = []}, locValue = PVar "a"}]) (CApp (CVar "Lune.Task.succeed") (CVar "a")),CoreAlt (PCon "Lune.Prelude.Err" [Located {locSpan = Span {spanStartLine = 46, spanStartCol = 9, spanEndLine = 46, spanEndCol = 11}, locComments = Comments {commentsLeading = [], commentsTrailing = [], commentsInner = []}, locValue = PVar "e"}]) (CApp (CVar "Lune.Task.fail") (CVar "e"))])),CoreDecl "" (CInt 0),CoreDecl "Lune.Task.map" (CLam [PVar "f",PVar "task"] (CCase (CVar "task") [CoreAlt (PCon "Lune.Prelude.Task" [Located {locSpan = Span {spanStartLine = 51, spanStartCol = 10, spanEndLine = 51, spanEndCol = 13}, locComments = Comments {commentsLeading = [], commentsTrailing = [], commentsInner = []}, locValue = PVar "io"}]) (CApp (CVar "Lune.Prelude.Task") (CApp (CApp (CVar "Lune.IO.andThen") (CVar "io")) (CLam [PVar "r"] (CCase (CVar "r") [CoreAlt (PCon "Lune.Prelude.Err" [Located {locSpan = Span {spanStartLine = 55, spanStartCol = 19, spanEndLine = 55, spanEndCol = 21}, locComments = Comments {commentsLeading = [], commentsTrailing = [], commentsInner = []}, locValue = PVar "e"}]) (CApp (CVar "Lune.IO.pure") (CApp (CVar "Lune.Prelude.Err") (CVar "e"))),CoreAlt (PCon "Lune.Prelude.Ok" [Located {locSpan = Span {spanStartLine = 56, spanStartCol = 18, spanEndLine = 56, spanEndCol = 20}, locComments = Comments {commentsLeading = [], commentsTrailing = [], commentsInner = []}, locValue = PVar "a"}]) (CApp (CVar "Lune.IO.pure") (CApp (CVar "Lune.Prelude.Ok") (CApp (CVar "f") (CVar "a"))))]))))])),CoreDecl "" (CInt 0),CoreDecl "Lune.Task.andThen" (CLam [PVar "task",PVar "k"] (CCase (CVar "task") [CoreAlt (PCon "Lune.Prelude.Task" [Located {locSpan = Span {spanStartLine = 63, spanStartCol = 10, spanEndLine = 63, spanEndCol = 13}, locComments = Comments {commentsLeading = [], commentsTrailing = [], commentsInner = []}, locValue = PVar "io"}]) (CApp (CVar "Lune.Prelude.Task") (CApp (CApp (CVar "Lune.IO.andThen") (CVar "io")) (CLam [PVar "r"] (CCase (CVar "r") [CoreAlt (PCon "Lune.Prelude.Err" [Located {locSpan = Span {spanStartLine = 67, spanStartCol = 19, spanEndLine = 67, spanEndCol = 21}, locComments = Comments {commentsLeading = [], commentsTrailing = [], commentsInner = []}, locValue = PVar "e"}]) (CApp (CVar "Lune.IO.pure") (CApp (CVar "Lune.Prelude.Err") (CVar "e"))),CoreAlt (PCon "Lune.Prelude.Ok" [Located {locSpan = Span {spanStartLine = 68, spanStartCol = 18, spanEndLine = 68, spanEndCol = 20}, locComments = Comments {commentsLeading = [], commentsTrailing = [], commentsInner = []}, locValue = PVar "a"}]) (CCase (CApp (CVar "k") (CVar "a")) [CoreAlt (PCon "Lune.Prelude.Task" [Located {locSpan = Span {spanStartLine = 70, spanStartCol = 24, spanEndLine = 70, spanEndCol = 28}, locComments = Comments {commentsLeading = [], commentsTrailing = [], commentsInner = []}, locValue = PVar "io2"}]) (CVar "io2")])]))))])),CoreDecl "" (CInt 0),CoreDecl "Lune.Task.then" (CLam [PVar "ta",PVar "tb"] (CApp (CApp (CVar "Lune.Task.andThen") (CVar "ta")) (CLam [PWildcard] (CVar "tb")))),CoreDecl "" (CInt 0),CoreDecl "Lune.Task.mapError" (CLam [PVar "f",PVar "task"] (CCase (CVar "task") [CoreAlt (PCon "Lune.Prelude.Task" [Located {locSpan = Span {spanStartLine = 81, spanStartCol = 10, spanEndLine = 81, spanEndCol = 13}, locComments = Comments {commentsLeading = [], commentsTrailing = [], commentsInner = []}, locValue = PVar "io"}]) (CApp (CVar "Lune.Prelude.Task") (CApp (CApp (CVar "Lune.IO.andThen") (CVar "io")) (CLam [PVar "r"] (CCase (CVar "r") [CoreAlt (PCon "Lune.Prelude.Err" [Located {locSpan = Span {spanStartLine = 85, spanStartCol = 19, spanEndLine = 85, spanEndCol = 21}, locComments = Comments {commentsLeading = [], commentsTrailing = [], commentsInner = []}, locValue = PVar "e"}]) (CApp (CVar "Lune.IO.pure") (CApp (CVar "Lune.Prelude.Err") (CApp (CVar "f") (CVar "e")))),CoreAlt (PCon "Lune.Prelude.Ok" [Located {locSpan = Span {spanStartLine = 86, spanStartCol = 18, spanEndLine = 86, spanEndCol = 20}, locComments = Comments {commentsLeading = [], commentsTrailing = [], commentsInner = []}, locValue = PVar "a"}]) (CApp (CVar "Lune.IO.pure") (CApp (CVar "Lune.Prelude.Ok") (CVar "a")))]))))])),CoreDecl "" (CInt 0),CoreDecl "Lune.Task.onError" (CLam [PVar "task",PVar "handler"] (CCase (CVar "task") [CoreAlt (PCon "Lune.Prelude.Task" [Located {locSpan = Span {spanStartLine = 93, spanStartCol = 10, spanEndLine = 93, spanEndCol = 13}, locComments = Comments {commentsLeading = [], commentsTrailing = [], commentsInner = []}, locValue = PVar "io"}]) (CApp (CVar "Lune.Prelude.Task") (CApp (CApp (CVar "Lune.IO.andThen") (CVar "io")) (CLam [PVar "r"] (CCase (CVar "r") [CoreAlt (PCon "Lune.Prelude.Ok" [Located {locSpan = Span {spanStartLine = 97, spanStartCol = 18, spanEndLine = 97, spanEndCol = 20}, locComments = Comments {commentsLeading = [], commentsTrailing = [], commentsInner = []}, locValue = PVar "a"}]) (CApp (CVar "Lune.IO.pure") (CApp (CVar "Lune.Prelude.Ok") (CVar "a"))),CoreAlt (PCon "Lune.Prelude.Err" [Located {locSpan = Span {spanStartLine = 98, spanStartCol = 19, spanEndLine = 98, spanEndCol = 21}, locComments = Comments {commentsLeading = [], commentsTrailing = [], commentsInner = []}, locValue = PVar "e"}]) (CCase (CApp (CVar "handler") (CVar "e")) [CoreAlt (PCon "Lune.Prelude.Task" [Located {locSpan = Span {spanStartLine = 100, spanStartCol = 24, spanEndLine = 100, spanEndCol = 28}, locComments = Comments {commentsLeading = [], commentsTrailing = [], commentsInner = []}, locValue = PVar "io2"}]) (CVar "io2")])]))))])),CoreDecl "" (CInt 0),CoreDecl "Lune.Task.attempt" (CLam [PVar "task"] (CCase (CVar "task") [CoreAlt (PCon "Lune.Prelude.Task" [Located {locSpan = Span {spanStartLine = 107, spanStartCol = 10, spanEndLine = 107, spanEndCol = 13}, locComments = Comments {commentsLeading = [], commentsTrailing = [], commentsInner = []}, locValue = PVar "io"}]) (CVar "io")])),CoreDecl "" (CInt 0),CoreDecl "Lune.Task.result" (CLam [PVar "task"] (CApp (CApp (CVar "Lune.Task.onError") (CApp (CApp (CVar "Lune.Task.map") (CVar "Lune.Prelude.Ok")) (CVar "task"))) (CLam [PVar "e"] (CApp (CVar "Lune.Task.succeed") (CApp (CVar "Lune.Prelude.Err") (CVar "e")))))),CoreDecl "" (CInt 0),CoreDecl "Lune.Task.withTimeout" (CLam [PVar "timeoutMs",PVar "task"] (CApp (CApp (CSelect (CVar "$dictMonad_Task") "andThen") (CApp (CVar "Lune.Fiber.spawn") (CApp (CApp (CVar "Lune.Task.map") (CVar "Lune.Prelude.Ok")) (CVar "task")))) (CLam [PVar "t1"] (CApp (CApp (CSelect (CVar "$dictMonad_Task") "andThen") (CApp (CVar "Lune.Fiber.spawn") (CApp (CApp (CVar "Lune.Task.then") (CApp (CVar "Lune.IO.sleepMs") (CVar "timeoutMs"))) (CApp (CVar "Lune.Task.succeed") (CApp (CVar "Lune.Prelude.Err") (CVar "Lune.Task.Timeout")))))) (CLam [PVar "t2"] (CApp (CApp (CVar "Lune.Fiber.awaitAny") (CVar "t1")) (CVar "t2"))))))),CoreDecl "" (CInt 0),CoreDecl "" (CInt 0),CoreDecl "Lune.Bytes.empty" (CVar "prim_bytesEmpty"),CoreDecl "" (CInt 0),CoreDecl "Lune.Bytes.fromList" (CVar "prim_bytesFromList"),CoreDecl "" (CInt 0),CoreDecl "Lune.Bytes.toList" (CVar "prim_bytesToList"),CoreDecl "" (CInt 0),CoreDecl "Lune.Bytes.fromString" (CVar "prim_bytesFromString"),CoreDecl "" (CInt 0),CoreDecl "Lune.Bytes.toString" (CVar "prim_bytesToString"),CoreDecl "" (CInt 0),CoreDecl "Lune.Bytes.length" (CVar "prim_bytesLength"),CoreDecl "" (CInt 0),CoreDecl "Lune.Bytes.concat" (CVar "prim_bytesConcat"),CoreDecl "" (CInt 0),CoreDecl "Lune.Bytes.slice" (CVar "prim_bytesSlice"),CoreDecl "" (CInt 0),CoreDecl "Lune.Bytes.packInt32BE" (CVar "prim_bytesPackInt32BE"),CoreDecl "" (CInt 0),CoreDecl "Lune.Bytes.unpackInt32BE" (CVar "prim_bytesUnpackInt32BE"),CoreDecl "" (CInt 0),CoreDecl "Lune.Bytes.packInt16BE" (CVar "prim_bytesPackInt16BE"),CoreDecl "" (CInt 0),CoreDecl "Lune.Bytes.unpackInt16BE" (CVar "prim_bytesUnpackInt16BE"),CoreDecl "" (CInt 0),CoreDecl "" (CInt 0),CoreDecl "" (CInt 0),CoreDecl "Lune.Net.Socket.listen" (CLam [PVar "port"] (CApp (CVar "Lune.Prelude.Task") (CApp (CVar "prim_tcpListen") (CVar "port")))),CoreDecl "" (CInt 0),CoreDecl "Lune.Net.Socket.accept" (CLam [PVar "sock"] (CApp (CVar "Lune.Prelude.Task") (CApp (CVar "prim_tcpAccept") (CVar "sock")))),CoreDecl "" (CInt 0),CoreDecl "Lune.Net.Socket.connect" (CLam [PVar "host",PVar "port"] (CApp (CVar "Lune.Prelude.Task") (CApp (CApp (CVar "prim_tcpConnect") (CVar "host")) (CVar "port")))),CoreDecl "" (CInt 0),CoreDecl "Lune.Net.Socket.recv" (CLam [PVar "conn"] (CApp (CVar "Lune.Prelude.Task") (CApp (CVar "prim_connRecv") (CVar "conn")))),CoreDecl "" (CInt 0),CoreDecl "Lune.Net.Socket.send" (CLam [PVar "conn",PVar "msg"] (CApp (CVar "Lune.Prelude.Task") (CApp (CApp (CVar "prim_connSend") (CVar "conn")) (CVar "msg")))),CoreDecl "" (CInt 0),CoreDecl "Lune.Net.Socket.recvBytes" (CLam [PVar "conn",PVar "n"] (CApp (CVar "Lune.Prelude.Task") (CApp (CApp (CVar "prim_connRecvBytes") (CVar "conn")) (CVar "n")))),CoreDecl "" (CInt 0),CoreDecl "Lune.Net.Socket.sendBytes" (CLam [PVar "conn",PVar "bytes"] (CApp (CVar "Lune.Prelude.Task") (CApp (CApp (CVar "prim_connSendBytes") (CVar "conn")) (CVar "bytes")))),CoreDecl "" (CInt 0),CoreDecl "Lune.Net.Socket.closeConn" (CLam [PVar "conn"] (CApp (CVar "Lune.Prelude.Task") (CApp (CVar "prim_connClose") (CVar "conn")))),CoreDecl "" (CInt 0),CoreDecl "Lune.Net.Socket.closeSocket" (CLam [PVar "sock"] (CApp (CVar "Lune.Prelude.Task") (CApp (CVar "prim_socketClose") (CVar "sock")))),CoreDecl "" (CInt 0),CoreDecl "Lune.Char.toInt" (CVar "prim_charToInt"),CoreDecl "" (CInt 0),CoreDecl "Lune.Char.fromInt" (CVar "prim_intToChar"),CoreDecl "" (CInt 0),CoreDecl "Lune.Char.toLower" (CLam [PVar "c"] (CCase (CApp (CApp (CVar "prim_and") (CApp (CApp (CVar "prim_geInt") (CApp (CVar "Lune.Char.toInt") (CVar "c"))) (CInt 65))) (CApp (CApp (CVar "prim_leInt") (CApp (CVar "Lune.Char.toInt") (CVar "c"))) (CInt 90))) [CoreAlt (PCon "Lune.Prelude.True" []) (CApp (CVar "Lune.Char.fromInt") (CApp (CApp (CVar "prim_addInt") (CApp (CVar "Lune.Char.toInt") (CVar "c"))) (CInt 32))),CoreAlt (PCon "Lune.Prelude.False" []) (CVar "c")])),CoreDecl "" (CInt 0),CoreDecl "Lune.Char.toUpper" (CLam [PVar "c"] (CCase (CApp (CApp (CVar "prim_and") (CApp (CApp (CVar "prim_geInt") (CApp (CVar "Lune.Char.toInt") (CVar "c"))) (CInt 97))) (CApp (CApp (CVar "prim_leInt") (CApp (CVar "Lune.Char.toInt") (CVar "c"))) (CInt 122))) [CoreAlt (PCon "Lune.Prelude.True" []) (CApp (CVar "Lune.Char.fromInt") (CApp (CApp (CVar "prim_subInt") (CApp (CVar "Lune.Char.toInt") (CVar "c"))) (CInt 32))),CoreAlt (PCon "Lune.Prelude.False" []) (CVar "c")])),CoreDecl "" (CInt 0),CoreDecl "Lune.Char.isSpace" (CLam [PVar "c"] (CCase (CApp (CApp (CVar "prim_eqInt") (CApp (CVar "Lune.Char.toInt") (CVar "c"))) (CInt 32)) [CoreAlt (PCon "Lune.Prelude.True" []) (CVar "Lune.Prelude.True"),CoreAlt (PCon "Lune.Prelude.False" []) (CCase (CApp (CApp (CVar "prim_eqInt") (CApp (CVar "Lune.Char.toInt") (CVar "c"))) (CInt 9)) [CoreAlt (PCon "Lune.Prelude.True" []) (CVar "Lune.Prelude.True"),CoreAlt (PCon "Lune.Prelude.False" []) (CCase (CApp (CApp (CVar "prim_eqInt") (CApp (CVar "Lune.Char.toInt") (CVar "c"))) (CInt 10)) [CoreAlt (PCon "Lune.Prelude.True" []) (CVar "Lune.Prelude.True"),CoreAlt (PCon "Lune.Prelude.False" []) (CCase (CApp (CApp (CVar "prim_eqInt") (CApp (CVar "Lune.Char.toInt") (CVar "c"))) (CInt 13)) [CoreAlt (PCon "Lune.Prelude.True" []) (CVar "Lune.Prelude.True"),CoreAlt (PCon "Lune.Prelude.False" []) (CVar "Lune.Prelude.False")])])])])),CoreDecl "" (CInt 0),CoreDecl "Lune.Char.isDigit" (CLam [PVar "c"] (CApp (CApp (CVar "prim_and") (CApp (CApp (CVar "prim_geInt") (CApp (CVar "Lune.Char.toInt") (CVar "c"))) (CInt 48))) (CApp (CApp (CVar "prim_leInt") (CApp (CVar "Lune.Char.toInt") (CVar "c"))) (CInt 57)))),CoreDecl "" (CInt 0),CoreDecl "Lune.Char.eq" (CLam [PVar "a",PVar "b"] (CApp (CApp (CVar "prim_eqInt") (CApp (CVar "Lune.Char.toInt") (CVar "a"))) (CApp (CVar "Lune.Char.toInt") (CVar "b")))),CoreDecl "" (CInt 0),CoreDecl "Lune.String.append" (CVar "prim_appendString"),CoreDecl "" (CInt 0),CoreDecl "Lune.String.eq" (CVar "prim_eqString"),CoreDecl "" (CInt 0),CoreDecl "Lune.String.fromInt" (CVar "prim_showInt"),CoreDecl "" (CInt 0),CoreDecl "Lune.String.fromFloat" (CVar "prim_showFloat"),CoreDecl "" (CInt 0),CoreDecl "Lune.String.toInt" (CVar "prim_parseInt"),CoreDecl "" (CInt 0),CoreDecl "Lune.String.toChars" (CVar "prim_stringToChars"),CoreDecl "" (CInt 0),CoreDecl "Lune.String.fromChars" (CVar "prim_charsToString"),CoreDecl "" (CInt 0),CoreDecl "Lune.String.fromChar" (CLam [PVar "c"] (CApp (CVar "Lune.String.fromChars") (CApp (CApp (CVar "Lune.Prelude.Cons") (CVar "c")) (CVar "Lune.Prelude.Nil")))),CoreDecl "" (CInt 0),CoreDecl "Lune.String.length" (CLam [PVar "s"] (CApp (CVar "Lune.String.listLength") (CApp (CVar "Lune.String.toChars") (CVar "s")))),CoreDecl "" (CInt 0),CoreDecl "Lune.String.isEmpty" (CLam [PVar "s"] (CCase (CApp (CVar "Lune.String.toChars") (CVar "s")) [CoreAlt (PCon "Lune.Prelude.Nil" []) (CVar "Lune.Prelude.True"),CoreAlt PWildcard (CVar "Lune.Prelude.False")])),CoreDecl "" (CInt 0),CoreDecl "Lune.String.toLower" (CLam [PVar "s"] (CApp (CVar "Lune.String.fromChars") (CApp (CApp (CVar "Lune.String.listMap") (CVar "Lune.Char.toLower")) (CApp (CVar "Lune.String.toChars") (CVar "s"))))),CoreDecl "" (CInt 0),CoreDecl "Lune.String.toUpper" (CLam [PVar "s"] (CApp (CVar "Lune.String.fromChars") (CApp (CApp (CVar "Lune.String.listMap") (CVar "Lune.Char.toUpper")) (CApp (CVar "Lune.String.toChars") (CVar "s"))))),CoreDecl "" (CInt 0),CoreDecl "Lune.String.startsWith" (CLam [PVar "prefix",PVar "s"] (CApp (CApp (CVar "Lune.String.charsStartsWith") (CApp (CVar "Lune.String.toChars") (CVar "prefix"))) (CApp (CVar "Lune.String.toChars") (CVar "s")))),CoreDecl "" (CInt 0),CoreDecl "Lune.String.endsWith" (CLam [PVar "suffix",PVar "s"] (CApp (CApp (CVar "Lune.String.charsStartsWith") (CApp (CVar "Lune.String.listReverse") (CApp (CVar "Lune.String.toChars") (CVar "suffix")))) (CApp (CVar "Lune.String.listReverse") (CApp (CVar "Lune.String.toChars") (CVar "s"))))),CoreDecl "" (CInt 0),CoreDecl "Lune.String.contains" (CLam [PVar "needle",PVar "haystack"] (CApp (CApp (CVar "Lune.String.charsContains") (CApp (CVar "Lune.String.toChars") (CVar "needle"))) (CApp (CVar "Lune.String.toChars") (CVar "haystack")))),CoreDecl "" (CInt 0),CoreDecl "Lune.String.split" (CLam [PVar "delimiter",PVar "s"] (CCase (CApp (CVar "Lune.String.isEmpty") (CVar "delimiter")) [CoreAlt (PCon "Lune.Prelude.True" []) (CApp (CApp (CVar "Lune.Prelude.Cons") (CVar "s")) (CVar "Lune.Prelude.Nil")),CoreAlt (PCon "Lune.Prelude.False" []) (CApp (CApp (CApp (CVar "Lune.String.splitHelper") (CApp (CVar "Lune.String.toChars") (CVar "delimiter"))) (CApp (CVar "Lune.String.toChars") (CVar "s"))) (CVar "Lune.Prelude.Nil"))])),CoreDecl "" (CInt 0),CoreDecl "Lune.String.join" (CLam [PVar "sep",PVar "parts"] (CCase (CVar "parts") [CoreAlt (PCon "Lune.Prelude.Nil" []) (CString ""),CoreAlt (PCon "Lune.Prelude.Cons" [Located {locSpan = Span {spanStartLine = 80, spanStartCol = 10, spanEndLine = 80, spanEndCol = 16}, locComments = Comments {commentsLeading = [], commentsTrailing = [], commentsInner = []}, locValue = PVar "first"},Located {locSpan = Span {spanStartLine = 80, spanStartCol = 16, spanEndLine = 80, spanEndCol = 21}, locComments = Comments {commentsLeading = [], commentsTrailing = [], commentsInner = []}, locValue = PVar "rest"}]) (CApp (CApp (CApp (CVar "Lune.String.listFoldl") (CLam [PVar "acc",PVar "x"] (CApp (CApp (CVar "Lune.String.append") (CApp (CApp (CVar "Lune.String.append") (CVar "acc")) (CVar "sep"))) (CVar "x")))) (CVar "first")) (CVar "rest"))])),CoreDecl "" (CInt 0),CoreDecl "Lune.String.trim" (CLam [PVar "s"] (CApp (CVar "Lune.String.trimLeft") (CApp (CVar "Lune.String.trimRight") (CVar "s")))),CoreDecl "" (CInt 0),CoreDecl "Lune.String.trimLeft" (CLam [PVar "s"] (CApp (CVar "Lune.String.fromChars") (CApp (CApp (CVar "Lune.String.dropWhileChars") (CVar "Lune.Char.isSpace")) (CApp (CVar "Lune.String.toChars") (CVar "s"))))),CoreDecl "" (CInt 0),CoreDecl "Lune.String.trimRight" (CLam [PVar "s"] (CApp (CVar "Lune.String.fromChars") (CApp (CVar "Lune.String.listReverse") (CApp (CApp (CVar "Lune.String.dropWhileChars") (CVar "Lune.Char.isSpace")) (CApp (CVar "Lune.String.listReverse") (CApp (CVar "Lune.String.toChars") (CVar "s"))))))),CoreDecl "" (CInt 0),CoreDecl "Lune.String.drop" (CLam [PVar "n",PVar "s"] (CApp (CVar "Lune.String.fromChars") (CApp (CApp (CVar "Lune.String.listDrop") (CVar "n")) (CApp (CVar "Lune.String.toChars") (CVar "s"))))),CoreDecl "" (CInt 0),CoreDecl "Lune.String.take" (CLam [PVar "n",PVar "s"] (CApp (CVar "Lune.String.fromChars") (CApp (CApp (CVar "Lune.String.listTake") (CVar "n")) (CApp (CVar "Lune.String.toChars") (CVar "s"))))),CoreDecl "" (CInt 0),CoreDecl "Lune.String.indexOf" (CLam [PVar "needle",PVar "haystack"] (CApp (CApp (CApp (CVar "Lune.String.indexOfHelper") (CApp (CVar "Lune.String.toChars") (CVar "needle"))) (CApp (CVar "Lune.String.toChars") (CVar "haystack"))) (CInt 0))),CoreDecl "" (CInt 0),CoreDecl "Lune.String.lines" (CLam [PVar "s"] (CApp (CApp (CVar "Lune.String.split") (CString "\n")) (CVar "s"))),CoreDecl "" (CInt 0),CoreDecl "Lune.String.unlines" (CLam [PVar "ls"] (CApp (CApp (CVar "Lune.String.join") (CString "\n")) (CVar "ls"))),CoreDecl "" (CInt 0),CoreDecl "Lune.String.words" (CLam [PVar "s"] (CApp (CApp (CApp (CVar "Lune.String.wordsFromChars") (CApp (CVar "Lune.String.toChars") (CVar "s"))) (CVar "Lune.Prelude.Nil")) (CVar "Lune.Prelude.Nil"))),CoreDecl "" (CInt 0),CoreDecl "Lune.String.wordsFromChars" (CLam [PVar "chars",PVar "currentRev",PVar "accRev"] (CCase (CVar "chars") [CoreAlt (PCon "Lune.Prelude.Nil" []) (CCase (CVar "currentRev") [CoreAlt (PCon "Lune.Prelude.Nil" []) (CApp (CVar "Lune.String.listReverse") (CVar "accRev")),CoreAlt PWildcard (CApp (CVar "Lune.String.listReverse") (CApp (CApp (CVar "Lune.Prelude.Cons") (CApp (CVar "Lune.String.fromChars") (CApp (CVar "Lune.String.listReverse") (CVar "currentRev")))) (CVar "accRev")))]),CoreAlt (PCon "Lune.Prelude.Cons" [Located {locSpan = Span {spanStartLine = 118, spanStartCol = 10, spanEndLine = 118, spanEndCol = 12}, locComments = Comments {commentsLeading = [], commentsTrailing = [], commentsInner = []}, locValue = PVar "c"},Located {locSpan = Span {spanStartLine = 118, spanStartCol = 12, spanEndLine = 118, spanEndCol = 17}, locComments = Comments {commentsLeading = [], commentsTrailing = [], commentsInner = []}, locValue = PVar "rest"}]) (CCase (CApp (CVar "Lune.Char.isSpace") (CVar "c")) [CoreAlt (PCon "Lune.Prelude.True" []) (CCase (CVar "currentRev") [CoreAlt (PCon "Lune.Prelude.Nil" []) (CApp (CApp (CApp (CVar "Lune.String.wordsFromChars") (CVar "rest")) (CVar "Lune.Prelude.Nil")) (CVar "accRev")),CoreAlt PWildcard (CApp (CApp (CApp (CVar "Lune.String.wordsFromChars") (CVar "rest")) (CVar "Lune.Prelude.Nil")) (CApp (CApp (CVar "Lune.Prelude.Cons") (CApp (CVar "Lune.String.fromChars") (CApp (CVar "Lune.String.listReverse") (CVar "currentRev")))) (CVar "accRev")))]),CoreAlt (PCon "Lune.Prelude.False" []) (CApp (CApp (CApp (CVar "Lune.String.wordsFromChars") (CVar "rest")) (CApp (CApp (CVar "Lune.Prelude.Cons") (CVar "c")) (CVar "currentRev"))) (CVar "accRev"))])])),CoreDecl "" (CInt 0),CoreDecl "Lune.String.sumInts" (CLam [PVar "xs"] (CApp (CApp (CApp (CVar "Lune.String.listFoldl") (CVar "Lune.String.sumIntsStep")) (CApp (CVar "Lune.Prelude.Ok") (CInt 0))) (CVar "xs"))),CoreDecl "" (CInt 0),CoreDecl "Lune.String.sumIntsStep" (CLam [PVar "acc",PVar "s"] (CCase (CVar "acc") [CoreAlt (PCon "Lune.Prelude.Err" [Located {locSpan = Span {spanStartLine = 133, spanStartCol = 9, spanEndLine = 133, spanEndCol = 13}, locComments = Comments {commentsLeading = [], commentsTrailing = [], commentsInner = []}, locValue = PVar "msg"}]) (CApp (CVar "Lune.Prelude.Err") (CVar "msg")),CoreAlt (PCon "Lune.Prelude.Ok" [Located {locSpan = Span {spanStartLine = 134, spanStartCol = 8, spanEndLine = 134, spanEndCol = 10}, locComments = Comments {commentsLeading = [], commentsTrailing = [], commentsInner = []}, locValue = PVar "n"}]) (CCase (CApp (CVar "Lune.String.toInt") (CVar "s")) [CoreAlt (PCon "Lune.Prelude.Err" [Located {locSpan = Span {spanStartLine = 136, spanStartCol = 13, spanEndLine = 136, spanEndCol = 17}, locComments = Comments {commentsLeading = [], commentsTrailing = [], commentsInner = []}, locValue = PVar "msg"}]) (CApp (CVar "Lune.Prelude.Err") (CVar "msg")),CoreAlt (PCon "Lune.Prelude.Ok" [Located {locSpan = Span {spanStartLine = 137, spanStartCol = 12, spanEndLine = 137, spanEndCol = 14}, locComments = Comments {commentsLeading = [], commentsTrailing = [], commentsInner = []}, locValue = PVar "m"}]) (CApp (CVar "Lune.Prelude.Ok") (CApp (CApp (CVar "prim_addInt") (CVar "n")) (CVar "m")))])])),CoreDecl "" (CInt 0),CoreDecl "Lune.String.charsStartsWith" (CLam [PVar "prefix",PVar "str"] (CCase (CVar "prefix") [CoreAlt (PCon "Lune.Prelude.Nil" []) (CVar "Lune.Prelude.True"),CoreAlt (PCon "Lune.Prelude.Cons" [Located {locSpan = Span {spanStartLine = 145, spanStartCol = 10, spanEndLine = 145, spanEndCol = 12}, locComments = Comments {commentsLeading = [], commentsTrailing = [], commentsInner = []}, locValue = PVar "p"},Located {locSpan = Span {spanStartLine = 145, spanStartCol = 12, spanEndLine = 145, spanEndCol = 15}, locComments = Comments {commentsLeading = [], commentsTrailing = [], commentsInner = []}, locValue = PVar "ps"}]) (CCase (CVar "str") [CoreAlt (PCon "Lune.Prelude.Nil" []) (CVar "Lune.Prelude.False"),CoreAlt (PCon "Lune.Prelude.Cons" [Located {locSpan = Span {spanStartLine = 148, spanStartCol = 14, spanEndLine = 148, spanEndCol = 16}, locComments = Comments {commentsLeading = [], commentsTrailing = [], commentsInner = []}, locValue = PVar "s"},Located {locSpan = Span {spanStartLine = 148, spanStartCol = 16, spanEndLine = 148, spanEndCol = 19}, locComments = Comments {commentsLeading = [], commentsTrailing = [], commentsInner = []}, locValue = PVar "ss"}]) (CCase (CApp (CApp (CVar "Lune.Char.eq") (CVar "p")) (CVar "s")) [CoreAlt (PCon "Lune.Prelude.True" []) (CApp (CApp (CVar "Lune.String.charsStartsWith") (CVar "ps")) (CVar "ss")),CoreAlt (PCon "Lune.Prelude.False" []) (CVar "Lune.Prelude.False")])])])),CoreDecl "" (CInt 0),CoreDecl "Lune.String.charsContains" (CLam [PVar "needle",PVar "haystack"] (CCase (CVar "needle") [CoreAlt (PCon "Lune.Prelude.Nil" []) (CVar "Lune.Prelude.True"),CoreAlt PWildcard (CCase (CVar "haystack") [CoreAlt (PCon "Lune.Prelude.Nil" []) (CVar "Lune.Prelude.False"),CoreAlt (PCon "Lune.Prelude.Cons" [Located {locSpan = Span {spanStartLine = 160, spanStartCol = 14, spanEndLine = 160, spanEndCol = 16}, locComments = Comments {commentsLeading = [], commentsTrailing = [], commentsInner = []}, locValue = PWildcard},Located {locSpan = Span {spanStartLine = 160, spanStartCol = 16, spanEndLine = 160, spanEndCol = 21}, locComments = Comments {commentsLeading = [], commentsTrailing = [], commentsInner = []}, locValue = PVar "rest"}]) (CCase (CApp (CApp (CVar "Lune.String.charsStartsWith") (CVar "needle")) (CVar "haystack")) [CoreAlt (PCon "Lune.Prelude.True" []) (CVar "Lune.Prelude.True"),CoreAlt (PCon "Lune.Prelude.False" []) (CApp (CApp (CVar "Lune.String.charsContains") (CVar "needle")) (CVar "rest"))])])])),CoreDecl "" (CInt 0),CoreDecl "Lune.String.splitHelper" (CLam [PVar "delim",PVar "chars",PVar "acc"] (CCase (CVar "chars") [CoreAlt (PCon "Lune.Prelude.Nil" []) (CApp (CApp (CVar "Lune.Prelude.Cons") (CApp (CVar "Lune.String.fromChars") (CApp (CVar "Lune.String.listReverse") (CVar "acc")))) (CVar "Lune.Prelude.Nil")),CoreAlt (PCon "Lune.Prelude.Cons" [Located {locSpan = Span {spanStartLine = 169, spanStartCol = 10, spanEndLine = 169, spanEndCol = 12}, locComments = Comments {commentsLeading = [], commentsTrailing = [], commentsInner = []}, locValue = PVar "c"},Located {locSpan = Span {spanStartLine = 169, spanStartCol = 12, spanEndLine = 169, spanEndCol = 17}, locComments = Comments {commentsLeading = [], commentsTrailing = [], commentsInner = []}, locValue = PVar "rest"}]) (CCase (CApp (CApp (CVar "Lune.String.charsStartsWith") (CVar "delim")) (CVar "chars")) [CoreAlt (PCon "Lune.Prelude.True" []) (CApp (CApp (CVar "Lune.Prelude.Cons") (CApp (CVar "Lune.String.fromChars") (CApp (CVar "Lune.String.listReverse") (CVar "acc")))) (CApp (CApp (CApp (CVar "Lune.String.splitHelper") (CVar "delim")) (CApp (CApp (CVar "Lune.String.listDrop") (CApp (CVar "Lune.String.listLength") (CVar "delim"))) (CVar "chars"))) (CVar "Lune.Prelude.Nil"))),CoreAlt (PCon "Lune.Prelude.False" []) (CApp (CApp (CApp (CVar "Lune.String.splitHelper") (CVar "delim")) (CVar "rest")) (CApp (CApp (CVar "Lune.Prelude.Cons") (CVar "c")) (CVar "acc")))])])),CoreDecl "" (CInt 0),CoreDecl "Lune.String.indexOfHelper" (CLam [PVar "needle",PVar "haystack",PVar "idx"] (CCase (CVar "needle") [CoreAlt (PCon "Lune.Prelude.Nil" []) (CApp (CVar "Lune.Prelude.Just") (CVar "idx")),CoreAlt PWildcard (CCase (CVar "haystack") [CoreAlt (PCon "Lune.Prelude.Nil" []) (CVar "Lune.Prelude.Nothing"),CoreAlt (PCon "Lune.Prelude.Cons" [Located {locSpan = Span {spanStartLine = 184, spanStartCol = 14, spanEndLine = 184, spanEndCol = 16}, locComments = Comments {commentsLeading = [], commentsTrailing = [], commentsInner = []}, locValue = PWildcard},Located {locSpan = Span {spanStartLine = 184, spanStartCol = 16, spanEndLine = 184, spanEndCol = 21}, locComments = Comments {commentsLeading = [], commentsTrailing = [], commentsInner = []}, locValue = PVar "rest"}]) (CCase (CApp (CApp (CVar "Lune.String.charsStartsWith") (CVar "needle")) (CVar "haystack")) [CoreAlt (PCon "Lune.Prelude.True" []) (CApp (CVar "Lune.Prelude.Just") (CVar "idx")),CoreAlt (PCon "Lune.Prelude.False" []) (CApp (CApp (CApp (CVar "Lune.String.indexOfHelper") (CVar "needle")) (CVar "rest")) (CApp (CApp (CVar "prim_addInt") (CVar "idx")) (CInt 1)))])])])),CoreDecl "" (CInt 0),CoreDecl "Lune.String.dropWhileChars" (CLam [PVar "pred",PVar "chars"] (CCase (CVar "chars") [CoreAlt (PCon "Lune.Prelude.Nil" []) (CVar "Lune.Prelude.Nil"),CoreAlt (PCon "Lune.Prelude.Cons" [Located {locSpan = Span {spanStartLine = 193, spanStartCol = 10, spanEndLine = 193, spanEndCol = 12}, locComments = Comments {commentsLeading = [], commentsTrailing = [], commentsInner = []}, locValue = PVar "c"},Located {locSpan = Span {spanStartLine = 193, spanStartCol = 12, spanEndLine = 193, spanEndCol = 17}, locComments = Comments {commentsLeading = [], commentsTrailing = [], commentsInner = []}, locValue = PVar "rest"}]) (CCase (CApp (CVar "pred") (CVar "c")) [CoreAlt (PCon "Lune.Prelude.True" []) (CApp (CApp (CVar "Lune.String.dropWhileChars") (CVar "pred")) (CVar "rest")),CoreAlt (PCon "Lune.Prelude.False" []) (CApp (CApp (CVar "Lune.Prelude.Cons") (CVar "c")) (CVar "rest"))])])),CoreDecl "" (CInt 0),CoreDecl "Lune.String.listLength" (CLam [PVar "xs"] (CCase (CVar "xs") [CoreAlt (PCon "Lune.Prelude.Nil" []) (CInt 0),CoreAlt (PCon "Lune.Prelude.Cons" [Located {locSpan = Span {spanStartLine = 202, spanStartCol = 10, spanEndLine = 202, spanEndCol = 12}, locComments = Comments {commentsLeading = [], commentsTrailing = [], commentsInner = []}, locValue = PWildcard},Located {locSpan = Span {spanStartLine = 202, spanStartCol = 12, spanEndLine = 202, spanEndCol = 17}, locComments = Comments {commentsLeading = [], commentsTrailing = [], commentsInner = []}, locValue = PVar "rest"}]) (CApp (CApp (CVar "prim_addInt") (CInt 1)) (CApp (CVar "Lune.String.listLength") (CVar "rest")))])),CoreDecl "" (CInt 0),CoreDecl "Lune.String.listMap" (CLam [PVar "f",PVar "xs"] (CCase (CVar "xs") [CoreAlt (PCon "Lune.Prelude.Nil" []) (CVar "Lune.Prelude.Nil"),CoreAlt (PCon "Lune.Prelude.Cons" [Located {locSpan = Span {spanStartLine = 208, spanStartCol = 10, spanEndLine = 208, spanEndCol = 12}, locComments = Comments {commentsLeading = [], commentsTrailing = [], commentsInner = []}, locValue = PVar "x"},Located {locSpan = Span {spanStartLine = 208, spanStartCol = 12, spanEndLine = 208, spanEndCol = 17}, locComments = Comments {commentsLeading = [], commentsTrailing = [], commentsInner = []}, locValue = PVar "rest"}]) (CApp (CApp (CVar "Lune.Prelude.Cons") (CApp (CVar "f") (CVar "x"))) (CApp (CApp (CVar "Lune.String.listMap") (CVar "f")) (CVar "rest")))])),CoreDecl "" (CInt 0),CoreDecl "Lune.String.listReverse" (CLam [PVar "xs"] (CApp (CApp (CVar "Lune.String.listReverseHelper") (CVar "xs")) (CVar "Lune.Prelude.Nil"))),CoreDecl "" (CInt 0),CoreDecl "Lune.String.listReverseHelper" (CLam [PVar "xs",PVar "acc"] (CCase (CVar "xs") [CoreAlt (PCon "Lune.Prelude.Nil" []) (CVar "acc"),CoreAlt (PCon "Lune.Prelude.Cons" [Located {locSpan = Span {spanStartLine = 217, spanStartCol = 10, spanEndLine = 217, spanEndCol = 12}, locComments = Comments {commentsLeading = [], commentsTrailing = [], commentsInner = []}, locValue = PVar "x"},Located {locSpan = Span {spanStartLine = 217, spanStartCol = 12, spanEndLine = 217, spanEndCol = 17}, locComments = Comments {commentsLeading = [], commentsTrailing = [], commentsInner = []}, locValue = PVar "rest"}]) (CApp (CApp (CVar "Lune.String.listReverseHelper") (CVar "rest")) (CApp (CApp (CVar "Lune.Prelude.Cons") (CVar "x")) (CVar "acc")))])),CoreDecl "" (CInt 0),CoreDecl "Lune.String.listDrop" (CLam [PVar "n",PVar "xs"] (CCase (CApp (CApp (CVar "prim_leInt") (CVar "n")) (CInt 0)) [CoreAlt (PCon "Lune.Prelude.True" []) (CVar "xs"),CoreAlt (PCon "Lune.Prelude.False" []) (CCase (CVar "xs") [CoreAlt (PCon "Lune.Prelude.Nil" []) (CVar "Lune.Prelude.Nil"),CoreAlt (PCon "Lune.Prelude.Cons" [Located {locSpan = Span {spanStartLine = 226, spanStartCol = 14, spanEndLine = 226, spanEndCol = 16}, locComments = Comments {commentsLeading = [], commentsTrailing = [], commentsInner = []}, locValue = PWildcard},Located {locSpan = Span {spanStartLine = 226, spanStartCol = 16, spanEndLine = 226, spanEndCol = 21}, locComments = Comments {commentsLeading = [], commentsTrailing = [], commentsInner = []}, locValue = PVar "rest"}]) (CApp (CApp (CVar "Lune.String.listDrop") (CApp (CApp (CVar "prim_subInt") (CVar "n")) (CInt 1))) (CVar "rest"))])])),CoreDecl "" (CInt 0),CoreDecl "Lune.String.listTake" (CLam [PVar "n",PVar "xs"] (CCase (CApp (CApp (CVar "prim_leInt") (CVar "n")) (CInt 0)) [CoreAlt (PCon "Lune.Prelude.True" []) (CVar "Lune.Prelude.Nil"),CoreAlt (PCon "Lune.Prelude.False" []) (CCase (CVar "xs") [CoreAlt (PCon "Lune.Prelude.Nil" []) (CVar "Lune.Prelude.Nil"),CoreAlt (PCon "Lune.Prelude.Cons" [Located {locSpan = Span {spanStartLine = 235, spanStartCol = 14, spanEndLine = 235, spanEndCol = 16}, locComments = Comments {commentsLeading = [], commentsTrailing = [], commentsInner = []}, locValue = PVar "x"},Located {locSpan = Span {spanStartLine = 235, spanStartCol = 16, spanEndLine = 235, spanEndCol = 21}, locComments = Comments {commentsLeading = [], commentsTrailing = [], commentsInner = []}, locValue = PVar "rest"}]) (CApp (CApp (CVar "Lune.Prelude.Cons") (CVar "x")) (CApp (CApp (CVar "Lune.String.listTake") (CApp (CApp (CVar "prim_subInt") (CVar "n")) (CInt 1))) (CVar "rest")))])])),CoreDecl "" (CInt 0),CoreDecl "Lune.String.listFoldl" (CLam [PVar "f",PVar "acc",PVar "xs"] (CCase (CVar "xs") [CoreAlt (PCon "Lune.Prelude.Nil" []) (CVar "acc"),CoreAlt (PCon "Lune.Prelude.Cons" [Located {locSpan = Span {spanStartLine = 241, spanStartCol = 10, spanEndLine = 241, spanEndCol = 12}, locComments = Comments {commentsLeading = [], commentsTrailing = [], commentsInner = []}, locValue = PVar "x"},Located {locSpan = Span {spanStartLine = 241, spanStartCol = 12, spanEndLine = 241, spanEndCol = 17}, locComments = Comments {commentsLeading = [], commentsTrailing = [], commentsInner = []}, locValue = PVar "rest"}]) (CApp (CApp (CApp (CVar "Lune.String.listFoldl") (CVar "f")) (CApp (CApp (CVar "f") (CVar "acc")) (CVar "x"))) (CVar "rest"))])),CoreDecl "" (CInt 0),CoreDecl "Lune.Http.Internal.parseHttpRequest" (CLam [PVar "raw"] (CCase (CApp (CApp (CVar "Lune.Http.Internal.listMap") (CVar "Lune.Http.Internal.stripCR")) (CApp (CVar "Lune.String.lines") (CVar "raw"))) [CoreAlt (PCon "Lune.Prelude.Nil" []) (CApp (CVar "Lune.Prelude.Err") (CString "empty request")),CoreAlt (PCon "Lune.Prelude.Cons" [Located {locSpan = Span {spanStartLine = 16, spanStartCol = 10, spanEndLine = 16, spanEndCol = 22}, locComments = Comments {commentsLeading = [], commentsTrailing = [], commentsInner = []}, locValue = PVar "requestLine"},Located {locSpan = Span {spanStartLine = 16, spanStartCol = 22, spanEndLine = 16, spanEndCol = 27}, locComments = Comments {commentsLeading = [], commentsTrailing = [], commentsInner = []}, locValue = PVar "rest"}]) (CCase (CApp (CVar "Lune.Http.Internal.parseRequestLine") (CVar "requestLine")) [CoreAlt (PCon "Lune.Prelude.Err" [Located {locSpan = Span {spanStartLine = 18, spanStartCol = 13, spanEndLine = 18, spanEndCol = 15}, locComments = Comments {commentsLeading = [], commentsTrailing = [], commentsInner = []}, locValue = PVar "e"}]) (CApp (CVar "Lune.Prelude.Err") (CVar "e")),CoreAlt (PCon "Lune.Prelude.Ok" [Located {locSpan = Span {spanStartLine = 19, spanStartCol = 12, spanEndLine = 19, spanEndCol = 15}, locComments = Comments {commentsLeading = [], commentsTrailing = [], commentsInner = []}, locValue = PVar "mp"}]) (CApp (CApp (CVar "Lune.Http.Internal.buildRequest") (CVar "mp")) (CVar "rest"))])])),CoreDecl "" (CInt 0),CoreDecl "Lune.Http.Internal.buildRequest" (CLam [PVar "mp",PVar "rest"] (CApp (CApp (CVar "Lune.Http.Internal.buildFromParsed") (CVar "mp")) (CApp (CVar "Lune.Http.Internal.splitHeadersBody") (CVar "rest")))),CoreDecl "" (CInt 0),CoreDecl "Lune.Http.Internal.buildFromParsed" (CLam [PVar "mp",PVar "hb"] (CApp (CVar "Lune.Prelude.Ok") (CRecord [("method",CSelect (CVar "mp") "method"),("path",CSelect (CVar "mp") "path"),("headers",CSelect (CVar "hb") "headers"),("body",CApp (CVar "Lune.String.trim") (CSelect (CVar "hb") "body"))]))),CoreDecl "" (CInt 0),CoreDecl "Lune.Http.Internal.formatHttpResponse" (CLam [PVar "resp"] (CApp (CApp (CVar "Lune.String.join") (CString "\n")) (CApp (CApp (CVar "Lune.Http.Internal.listAppend") (CApp (CApp (CVar "Lune.Prelude.Cons") (CApp (CApp (CVar "Lune.String.append") (CString "HTTP/1.1 ")) (CApp (CApp (CVar "Lune.String.append") (CApp (CVar "Lune.String.fromInt") (CSelect (CVar "resp") "status"))) (CApp (CApp (CVar "Lune.String.append") (CString " ")) (CApp (CVar "Lune.Http.Internal.statusText") (CSelect (CVar "resp") "status")))))) (CApp (CApp (CVar "Lune.Prelude.Cons") (CApp (CApp (CVar "Lune.String.append") (CString "Content-Length: ")) (CApp (CVar "Lune.String.fromInt") (CApp (CVar "Lune.String.length") (CSelect (CVar "resp") "body"))))) (CApp (CApp (CVar "Lune.Http.Internal.listMap") (CVar "Lune.Http.Internal.formatHeader")) (CSelect (CVar "resp") "headers"))))) (CApp (CApp (CVar "Lune.Prelude.Cons") (CString "")) (CApp (CApp (CVar "Lune.Prelude.Cons") (CSelect (CVar "resp") "body")) (CVar "Lune.Prelude.Nil")))))),CoreDecl "" (CInt 0),CoreDecl "Lune.Http.Internal.statusText" (CLam [PVar "code"] (CCase (CApp (CApp (CVar "prim_eqInt") (CVar "code")) (CInt 200)) [CoreAlt (PCon "Lune.Prelude.True" []) (CString "OK"),CoreAlt (PCon "Lune.Prelude.False" []) (CCase (CApp (CApp (CVar "prim_eqInt") (CVar "code")) (CInt 201)) [CoreAlt (PCon "Lune.Prelude.True" []) (CString "Created"),CoreAlt (PCon "Lune.Prelude.False" []) (CCase (CApp (CApp (CVar "prim_eqInt") (CVar "code")) (CInt 204)) [CoreAlt (PCon "Lune.Prelude.True" []) (CString "No Content"),CoreAlt (PCon "Lune.Prelude.False" []) (CCase (CApp (CApp (CVar "prim_eqInt") (CVar "code")) (CInt 400)) [CoreAlt (PCon "Lune.Prelude.True" []) (CString "Bad Request"),CoreAlt (PCon "Lune.Prelude.False" []) (CCase (CApp (CApp (CVar "prim_eqInt") (CVar "code")) (CInt 401)) [CoreAlt (PCon "Lune.Prelude.True" []) (CString "Unauthorized"),CoreAlt (PCon "Lune.Prelude.False" []) (CCase (CApp (CApp (CVar "prim_eqInt") (CVar "code")) (CInt 403)) [CoreAlt (PCon "Lune.Prelude.True" []) (CString "Forbidden"),CoreAlt (PCon "Lune.Prelude.False" []) (CCase (CApp (CApp (CVar "prim_eqInt") (CVar "code")) (CInt 404)) [CoreAlt (PCon "Lune.Prelude.True" []) (CString "Not Found"),CoreAlt (PCon "Lune.Prelude.False" []) (CCase (CApp (CApp (CVar "prim_eqInt") (CVar "code")) (CInt 409)) [CoreAlt (PCon "Lune.Prelude.True" []) (CString "Conflict"),CoreAlt (PCon "Lune.Prelude.False" []) (CCase (CApp (CApp (CVar "prim_eqInt") (CVar "code")) (CInt 500)) [CoreAlt (PCon "Lune.Prelude.True" []) (CString "Internal Server Error"),CoreAlt (PCon "Lune.Prelude.False" []) (CString "Unknown")])])])])])])])])])),CoreDecl "" (CInt 0),CoreDecl "Lune.Http.Internal.parseMethod" (CLam [PVar "m"] (CCase (CApp (CApp (CVar "Lune.String.eq") (CApp (CVar "Lune.String.toUpper") (CVar "m"))) (CString "GET")) [CoreAlt (PCon "Lune.Prelude.True" []) (CVar "Lune.Http.GET"),CoreAlt (PCon "Lune.Prelude.False" []) (CCase (CApp (CApp (CVar "Lune.String.eq") (CApp (CVar "Lune.String.toUpper") (CVar "m"))) (CString "POST")) [CoreAlt (PCon "Lune.Prelude.True" []) (CVar "Lune.Http.POST"),CoreAlt (PCon "Lune.Prelude.False" []) (CCase (CApp (CApp (CVar "Lune.String.eq") (CApp (CVar "Lune.String.toUpper") (CVar "m"))) (CString "PUT")) [CoreAlt (PCon "Lune.Prelude.True" []) (CVar "Lune.Http.PUT"),CoreAlt (PCon "Lune.Prelude.False" []) (CCase (CApp (CApp (CVar "Lune.String.eq") (CApp (CVar "Lune.String.toUpper") (CVar "m"))) (CString "PATCH")) [CoreAlt (PCon "Lune.Prelude.True" []) (CVar "Lune.Http.PATCH"),CoreAlt (PCon "Lune.Prelude.False" []) (CCase (CApp (CApp (CVar "Lune.String.eq") (CApp (CVar "Lune.String.toUpper") (CVar "m"))) (CString "DELETE")) [CoreAlt (PCon "Lune.Prelude.True" []) (CVar "Lune.Http.DELETE"),CoreAlt (PCon "Lune.Prelude.False" []) (CVar "Lune.Http.GET")])])])])])),CoreDecl "" (CInt 0),CoreDecl "Lune.Http.Internal.parseRequestLine" (CLam [PVar "line"] (CCase (CApp (CVar "Lune.Http.Internal.splitOnSpace") (CVar "line")) [CoreAlt (PCon "Lune.Prelude.Cons" [Located {locSpan = Span {spanStartLine = 98, spanStartCol = 10, spanEndLine = 98, spanEndCol = 20}, locComments = Comments {commentsLeading = [], commentsTrailing = [], commentsInner = []}, locValue = PVar "methodStr"},Located {locSpan = Span {spanStartLine = 98, spanStartCol = 20, spanEndLine = 98, spanEndCol = 34}, locComments = Comments {commentsLeading = [], commentsTrailing = [], commentsInner = []}, locValue = PCon "Lune.Prelude.Cons" [Located {locSpan = Span {spanStartLine = 98, spanStartCol = 26, spanEndLine = 98, spanEndCol = 31}, locComments = Comments {commentsLeading = [], commentsTrailing = [], commentsInner = []}, locValue = PVar "path"},Located {locSpan = Span {spanStartLine = 98, spanStartCol = 31, spanEndLine = 98, spanEndCol = 32}, locComments = Comments {commentsLeading = [], commentsTrailing = [], commentsInner = []}, locValue = PWildcard}]}]) (CApp (CVar "Lune.Prelude.Ok") (CRecord [("method",CApp (CVar "Lune.Http.Internal.parseMethod") (CVar "methodStr")),("path",CVar "path")])),CoreAlt PWildcard (CApp (CVar "Lune.Prelude.Err") (CString "invalid request line"))])),CoreDecl "" (CInt 0),CoreDecl "Lune.Http.Internal.splitHeadersBody" (CLam [PVar "ls"] (CApp (CApp (CVar "Lune.Http.Internal.splitHBHelper") (CVar "ls")) (CVar "Lune.Prelude.Nil"))),CoreDecl "" (CInt 0),CoreDecl "Lune.Http.Internal.splitHBHelper" (CLam [PVar "ls",PVar "acc"] (CCase (CVar "ls") [CoreAlt (PCon "Lune.Prelude.Nil" []) (CRecord [("headers",CApp (CVar "Lune.Http.Internal.listReverse") (CVar "acc")),("body",CString "")]),CoreAlt (PCon "Lune.Prelude.Cons" [Located {locSpan = Span {spanStartLine = 110, spanStartCol = 10, spanEndLine = 110, spanEndCol = 15}, locComments = Comments {commentsLeading = [], commentsTrailing = [], commentsInner = []}, locValue = PVar "line"},Located {locSpan = Span {spanStartLine = 110, spanStartCol = 15, spanEndLine = 110, spanEndCol = 20}, locComments = Comments {commentsLeading = [], commentsTrailing = [], commentsInner = []}, locValue = PVar "rest"}]) (CCase (CApp (CVar "Lune.String.isEmpty") (CApp (CVar "Lune.String.trim") (CVar "line"))) [CoreAlt (PCon "Lune.Prelude.True" []) (CRecord [("headers",CApp (CVar "Lune.Http.Internal.listReverse") (CVar "acc")),("body",CApp (CApp (CVar "Lune.String.join") (CString "\n")) (CVar "rest"))]),CoreAlt (PCon "Lune.Prelude.False" []) (CCase (CApp (CVar "Lune.Http.Internal.parseHeaderLine") (CVar "line")) [CoreAlt (PCon "Lune.Prelude.Nothing" []) (CApp (CApp (CVar "Lune.Http.Internal.splitHBHelper") (CVar "rest")) (CVar "acc")),CoreAlt (PCon "Lune.Prelude.Just" [Located {locSpan = Span {spanStartLine = 116, spanStartCol = 18, spanEndLine = 116, spanEndCol = 25}, locComments = Comments {commentsLeading = [], commentsTrailing = [], commentsInner = []}, locValue = PVar "header"}]) (CApp (CApp (CVar "Lune.Http.Internal.splitHBHelper") (CVar "rest")) (CApp (CApp (CVar "Lune.Prelude.Cons") (CVar "header")) (CVar "acc")))])])])),CoreDecl "" (CInt 0),CoreDecl "Lune.Http.Internal.parseHeaderLine" (CLam [PVar "line"] (CCase (CApp (CApp (CVar "Lune.String.indexOf") (CString ":")) (CVar "line")) [CoreAlt (PCon "Lune.Prelude.Nothing" []) (CVar "Lune.Prelude.Nothing"),CoreAlt (PCon "Lune.Prelude.Just" [Located {locSpan = Span {spanStartLine = 122, spanStartCol = 10, spanEndLine = 122, spanEndCol = 14}, locComments = Comments {commentsLeading = [], commentsTrailing = [], commentsInner = []}, locValue = PVar "idx"}]) (CApp (CVar "Lune.Prelude.Just") (CRecord [("key",CApp (CVar "Lune.String.trim") (CApp (CApp (CVar "Lune.String.take") (CVar "idx")) (CVar "line"))),("value",CApp (CVar "Lune.String.trim") (CApp (CApp (CVar "Lune.String.drop") (CApp (CApp (CVar "prim_addInt") (CVar "idx")) (CInt 1))) (CVar "line")))]))])),CoreDecl "" (CInt 0),CoreDecl "Lune.Http.Internal.formatHeader" (CLam [PVar "h"] (CApp (CApp (CVar "Lune.String.append") (CSelect (CVar "h") "key")) (CApp (CApp (CVar "Lune.String.append") (CString ": ")) (CSelect (CVar "h") "value")))),CoreDecl "" (CInt 0),CoreDecl "Lune.Http.Internal.splitOnSpace" (CLam [PVar "s"] (CApp (CApp (CVar "Lune.String.split") (CString " ")) (CVar "s"))),CoreDecl "" (CInt 0),CoreDecl "Lune.Http.Internal.stripCR" (CLam [PVar "s"] (CCase (CApp (CApp (CVar "Lune.String.endsWith") (CString "\r")) (CVar "s")) [CoreAlt (PCon "Lune.Prelude.True" []) (CApp (CApp (CVar "Lune.String.take") (CApp (CApp (CVar "prim_subInt") (CApp (CVar "Lune.String.length") (CVar "s"))) (CInt 1))) (CVar "s")),CoreAlt (PCon "Lune.Prelude.False" []) (CVar "s")])),CoreDecl "" (CInt 0),CoreDecl "Lune.Http.Internal.listMap" (CLam [PVar "f",PVar "xs"] (CCase (CVar "xs") [CoreAlt (PCon "Lune.Prelude.Nil" []) (CVar "Lune.Prelude.Nil"),CoreAlt (PCon "Lune.Prelude.Cons" [Located {locSpan = Span {spanStartLine = 143, spanStartCol = 10, spanEndLine = 143, spanEndCol = 12}, locComments = Comments {commentsLeading = [], commentsTrailing = [], commentsInner = []}, locValue = PVar "x"},Located {locSpan = Span {spanStartLine = 143, spanStartCol = 12, spanEndLine = 143, spanEndCol = 17}, locComments = Comments {commentsLeading = [], commentsTrailing = [], commentsInner = []}, locValue = PVar "rest"}]) (CApp (CApp (CVar "Lune.Prelude.Cons") (CApp (CVar "f") (CVar "x"))) (CApp (CApp (CVar "Lune.Http.Internal.listMap") (CVar "f")) (CVar "rest")))])),CoreDecl "" (CInt 0),CoreDecl "Lune.Http.Internal.listReverse" (CLam [PVar "xs"] (CApp (CApp (CVar "Lune.Http.Internal.listReverseHelper") (CVar "xs")) (CVar "Lune.Prelude.Nil"))),CoreDecl "" (CInt 0),CoreDecl "Lune.Http.Internal.listReverseHelper" (CLam [PVar "xs",PVar "acc"] (CCase (CVar "xs") [CoreAlt (PCon "Lune.Prelude.Nil" []) (CVar "acc"),CoreAlt (PCon "Lune.Prelude.Cons" [Located {locSpan = Span {spanStartLine = 152, spanStartCol = 10, spanEndLine = 152, spanEndCol = 12}, locComments = Comments {commentsLeading = [], commentsTrailing = [], commentsInner = []}, locValue = PVar "x"},Located {locSpan = Span {spanStartLine = 152, spanStartCol = 12, spanEndLine = 152, spanEndCol = 17}, locComments = Comments {commentsLeading = [], commentsTrailing = [], commentsInner = []}, locValue = PVar "rest"}]) (CApp (CApp (CVar "Lune.Http.Internal.listReverseHelper") (CVar "rest")) (CApp (CApp (CVar "Lune.Prelude.Cons") (CVar "x")) (CVar "acc")))])),CoreDecl "" (CInt 0),CoreDecl "Lune.Http.Internal.listAppend" (CLam [PVar "xs",PVar "ys"] (CCase (CVar "xs") [CoreAlt (PCon "Lune.Prelude.Nil" []) (CVar "ys"),CoreAlt (PCon "Lune.Prelude.Cons" [Located {locSpan = Span {spanStartLine = 158, spanStartCol = 10, spanEndLine = 158, spanEndCol = 12}, locComments = Comments {commentsLeading = [], commentsTrailing = [], commentsInner = []}, locValue = PVar "x"},Located {locSpan = Span {spanStartLine = 158, spanStartCol = 12, spanEndLine = 158, spanEndCol = 17}, locComments = Comments {commentsLeading = [], commentsTrailing = [], commentsInner = []}, locValue = PVar "rest"}]) (CApp (CApp (CVar "Lune.Prelude.Cons") (CVar "x")) (CApp (CApp (CVar "Lune.Http.Internal.listAppend") (CVar "rest")) (CVar "ys")))])),CoreDecl "" (CInt 0),CoreDecl "" (CInt 0),CoreDecl "Lune.Http.Server.serve" (CLam [PVar "port",PVar "handler"] (CApp (CApp (CSelect (CVar "$dictMonad_Task") "andThen") (CApp (CVar "Lune.IO.println") (CApp (CApp (CVar "Lune.String.append") (CString "Starting HTTP server on port ")) (CApp (CVar "Lune.String.fromInt") (CVar "port"))))) (CLam [PWildcard] (CApp (CApp (CVar "Lune.Task.onError") (CApp (CApp (CSelect (CVar "$dictMonad_Task") "andThen") (CApp (CVar "Lune.Net.Socket.listen") (CVar "port"))) (CLam [PVar "sock"] (CApp (CApp (CVar "Lune.Http.Server.acceptLoop") (CVar "sock")) (CVar "handler"))))) (CLam [PWildcard] (CApp (CVar "Lune.IO.println") (CString "Failed to start server"))))))),CoreDecl "" (CInt 0),CoreDecl "Lune.Http.Server.acceptLoop" (CLam [PVar "sock",PVar "handler"] (CApp (CApp (CVar "Lune.Task.onError") (CApp (CApp (CSelect (CVar "$dictMonad_Task") "andThen") (CApp (CVar "Lune.Net.Socket.accept") (CVar "sock"))) (CLam [PVar "conn"] (CApp (CApp (CSelect (CVar "$dictMonad_Task") "andThen") (CApp (CApp (CVar "Lune.Http.Server.handleConnection") (CVar "conn")) (CVar "handler"))) (CLam [PWildcard] (CApp (CApp (CVar "Lune.Http.Server.acceptLoop") (CVar "sock")) (CVar "handler"))))))) (CLam [PWildcard] (CApp (CVar "Lune.IO.println") (CString "Accept failed, stopping server"))))),CoreDecl "" (CInt 0),CoreDecl "Lune.Http.Server.handleConnection" (CLam [PVar "conn",PVar "handler"] (CApp (CApp (CVar "Lune.Task.onError") (CApp (CApp (CSelect (CVar "$dictMonad_Task") "andThen") (CApp (CVar "Lune.Net.Socket.recv") (CVar "conn"))) (CLam [PVar "rawRequest"] (CCase (CApp (CVar "Lune.Http.Internal.parseHttpRequest") (CVar "rawRequest")) [CoreAlt (PCon "Lune.Prelude.Err" [Located {locSpan = Span {spanStartLine = 44, spanStartCol = 13, spanEndLine = 44, spanEndCol = 15}, locComments = Comments {commentsLeading = [], commentsTrailing = [], commentsInner = []}, locValue = PWildcard}]) (CApp (CApp (CSelect (CVar "$dictMonad_Task") "andThen") (CApp (CApp (CVar "Lune.Task.onError") (CApp (CApp (CVar "Lune.Net.Socket.send") (CVar "conn")) (CString "HTTP/1.1 400 Bad Request\r\n\r\n"))) (CLam [PWildcard] (CApp (CVar "Lune.Task.succeed") (CVar "Lune.Prelude.unit"))))) (CLam [PWildcard] (CApp (CApp (CSelect (CVar "$dictMonad_Task") "andThen") (CApp (CApp (CVar "Lune.Task.onError") (CApp (CVar "Lune.Net.Socket.closeConn") (CVar "conn"))) (CLam [PWildcard] (CApp (CVar "Lune.Task.succeed") (CVar "Lune.Prelude.unit"))))) (CLam [PWildcard] (CApp (CVar "Lune.Task.succeed") (CVar "Lune.Prelude.unit")))))),CoreAlt (PCon "Lune.Prelude.Ok" [Located {locSpan = Span {spanStartLine = 49, spanStartCol = 12, spanEndLine = 49, spanEndCol = 20}, locComments = Comments {commentsLeading = [], commentsTrailing = [], commentsInner = []}, locValue = PVar "request"}]) (CApp (CApp (CSelect (CVar "$dictMonad_Task") "andThen") (CApp (CVar "handler") (CVar "request"))) (CLam [PVar "response"] (CLet "rawResponse" (CApp (CVar "Lune.Http.Internal.formatHttpResponse") (CVar "response")) (CApp (CApp (CSelect (CVar "$dictMonad_Task") "andThen") (CApp (CApp (CVar "Lune.Task.onError") (CApp (CApp (CVar "Lune.Net.Socket.send") (CVar "conn")) (CVar "rawResponse"))) (CLam [PWildcard] (CApp (CVar "Lune.Task.succeed") (CVar "Lune.Prelude.unit"))))) (CLam [PWildcard] (CApp (CApp (CSelect (CVar "$dictMonad_Task") "andThen") (CApp (CApp (CVar "Lune.Task.onError") (CApp (CVar "Lune.Net.Socket.closeConn") (CVar "conn"))) (CLam [PWildcard] (CApp (CVar "Lune.Task.succeed") (CVar "Lune.Prelude.unit"))))) (CLam [PWildcard] (CApp (CVar "Lune.Task.succeed") (CVar "Lune.Prelude.unit")))))))))])))) (CLam [PWildcard] (CApp (CApp (CSelect (CVar "$dictMonad_Task") "andThen") (CApp (CApp (CVar "Lune.Task.onError") (CApp (CVar "Lune.Net.Socket.closeConn") (CVar "conn"))) (CLam [PWildcard] (CApp (CVar "Lune.Task.succeed") (CVar "Lune.Prelude.unit"))))) (CLam [PWildcard] (CApp (CVar "Lune.Task.succeed") (CVar "Lune.Prelude.unit"))))))),CoreDecl "" (CInt 0),CoreDecl "Lune.Int.add" (CVar "prim_addInt"),CoreDecl "" (CInt 0),CoreDecl "Lune.Int.sub" (CVar "prim_subInt"),CoreDecl "" (CInt 0),CoreDecl "Lune.Int.mul" (CVar "prim_mulInt"),CoreDecl "" (CInt 0),CoreDecl "Lune.Int.div" (CVar "prim_divInt"),CoreDecl "" (CInt 0),CoreDecl "Lune.Int.mod" (CVar "prim_modInt"),CoreDecl "" (CInt 0),CoreDecl "Lune.Int.eq" (CVar "prim_eqInt"),CoreDecl "" (CInt 0),CoreDecl "Lune.Int.gte" (CVar "prim_geInt"),CoreDecl "" (CInt 0),CoreDecl "Lune.Int.lte" (CVar "prim_leInt"),CoreDecl "" (CInt 0),CoreDecl "Lune.Int.max" (CLam [PVar "a",PVar "b"] (CCase (CApp (CApp (CVar "prim_geInt") (CVar "a")) (CVar "b")) [CoreAlt (PCon "Lune.Prelude.True" []) (CVar "a"),CoreAlt (PCon "Lune.Prelude.False" []) (CVar "b")])),CoreDecl "" (CInt 0),CoreDecl "Lune.Int.min" (CLam [PVar "a",PVar "b"] (CCase (CApp (CApp (CVar "prim_leInt") (CVar "a")) (CVar "b")) [CoreAlt (PCon "Lune.Prelude.True" []) (CVar "a"),CoreAlt (PCon "Lune.Prelude.False" []) (CVar "b")])),CoreDecl "" (CInt 0),CoreDecl "" (CInt 0),CoreDecl "" (CInt 0),CoreDecl "" (CInt 0),CoreDecl "Lune.Json.Decode.decodeValue" (CLam [PVar "decoder",PVar "json"] (CApp (CVar "decoder") (CVar "json"))),CoreDecl "" (CInt 0),CoreDecl "Lune.Json.Decode.succeed" (CLam [PVar "value"] (CLam [PWildcard] (CApp (CVar "Lune.Prelude.Ok") (CVar "value")))),CoreDecl "" (CInt 0),CoreDecl "Lune.Json.Decode.fail" (CLam [PVar "message"] (CLam [PWildcard] (CApp (CVar "Lune.Prelude.Err") (CRecord [("message",CVar "message"),("path",CVar "Lune.Prelude.Nil")])))),CoreDecl "" (CInt 0),CoreDecl "Lune.Json.Decode.bool" (CLam [PVar "json"] (CCase (CApp (CVar "prim_jsonToBool") (CVar "json")) [CoreAlt (PCon "Lune.Prelude.Ok" [Located {locSpan = Span {spanStartLine = 38, spanStartCol = 10, spanEndLine = 38, spanEndCol = 12}, locComments = Comments {commentsLeading = [], commentsTrailing = [], commentsInner = []}, locValue = PVar "b"}]) (CApp (CVar "Lune.Prelude.Ok") (CVar "b")),CoreAlt (PCon "Lune.Prelude.Err" [Located {locSpan = Span {spanStartLine = 39, spanStartCol = 11, spanEndLine = 39, spanEndCol = 15}, locComments = Comments {commentsLeading = [], commentsTrailing = [], commentsInner = []}, locValue = PVar "msg"}]) (CApp (CVar "Lune.Prelude.Err") (CRecord [("message",CVar "msg"),("path",CVar "Lune.Prelude.Nil")]))])),CoreDecl "" (CInt 0),CoreDecl "Lune.Json.Decode.int" (CLam [PVar "json"] (CCase (CApp (CVar "prim_jsonToInt") (CVar "json")) [CoreAlt (PCon "Lune.Prelude.Ok" [Located {locSpan = Span {spanStartLine = 45, spanStartCol = 10, spanEndLine = 45, spanEndCol = 12}, locComments = Comments {commentsLeading = [], commentsTrailing = [], commentsInner = []}, locValue = PVar "n"}]) (CApp (CVar "Lune.Prelude.Ok") (CVar "n")),CoreAlt (PCon "Lune.Prelude.Err" [Located {locSpan = Span {spanStartLine = 46, spanStartCol = 11, spanEndLine = 46, spanEndCol = 15}, locComments = Comments {commentsLeading = [], commentsTrailing = [], commentsInner = []}, locValue = PVar "msg"}]) (CApp (CVar "Lune.Prelude.Err") (CRecord [("message",CVar "msg"),("path",CVar "Lune.Prelude.Nil")]))])),CoreDecl "" (CInt 0),CoreDecl "Lune.Json.Decode.float" (CLam [PVar "json"] (CCase (CApp (CVar "prim_jsonToFloat") (CVar "json")) [CoreAlt (PCon "Lune.Prelude.Ok" [Located {locSpan = Span {spanStartLine = 52, spanStartCol = 10, spanEndLine = 52, spanEndCol = 12}, locComments = Comments {commentsLeading = [], commentsTrailing = [], commentsInner = []}, locValue = PVar "f"}]) (CApp (CVar "Lune.Prelude.Ok") (CVar "f")),CoreAlt (PCon "Lune.Prelude.Err" [Located {locSpan = Span {spanStartLine = 53, spanStartCol = 11, spanEndLine = 53, spanEndCol = 15}, locComments = Comments {commentsLeading = [], commentsTrailing = [], commentsInner = []}, locValue = PVar "msg"}]) (CApp (CVar "Lune.Prelude.Err") (CRecord [("message",CVar "msg"),("path",CVar "Lune.Prelude.Nil")]))])),CoreDecl "" (CInt 0),CoreDecl "Lune.Json.Decode.string" (CLam [PVar "json"] (CCase (CApp (CVar "prim_jsonToString") (CVar "json")) [CoreAlt (PCon "Lune.Prelude.Ok" [Located {locSpan = Span {spanStartLine = 59, spanStartCol = 10, spanEndLine = 59, spanEndCol = 12}, locComments = Comments {commentsLeading = [], commentsTrailing = [], commentsInner = []}, locValue = PVar "s"}]) (CApp (CVar "Lune.Prelude.Ok") (CVar "s")),CoreAlt (PCon "Lune.Prelude.Err" [Located {locSpan = Span {spanStartLine = 60, spanStartCol = 11, spanEndLine = 60, spanEndCol = 15}, locComments = Comments {commentsLeading = [], commentsTrailing = [], commentsInner = []}, locValue = PVar "msg"}]) (CApp (CVar "Lune.Prelude.Err") (CRecord [("message",CVar "msg"),("path",CVar "Lune.Prelude.Nil")]))])),CoreDecl "" (CInt 0),CoreDecl "Lune.Json.Decode.null" (CLam [PVar "defaultValue"] (CLam [PVar "json"] (CCase (CApp (CVar "prim_jsonIsNull") (CVar "json")) [CoreAlt (PCon "Lune.Prelude.True" []) (CApp (CVar "Lune.Prelude.Ok") (CVar "defaultValue")),CoreAlt (PCon "Lune.Prelude.False" []) (CApp (CVar "Lune.Prelude.Err") (CRecord [("message",CString "expected null"),("path",CVar "Lune.Prelude.Nil")]))]))),CoreDecl "" (CInt 0),CoreDecl "Lune.Json.Decode.list" (CLam [PVar "elemDecoder"] (CLam [PVar "json"] (CCase (CApp (CVar "prim_jsonToArray") (CVar "json")) [CoreAlt (PCon "Lune.Prelude.Err" [Located {locSpan = Span {spanStartLine = 73, spanStartCol = 11, spanEndLine = 73, spanEndCol = 15}, locComments = Comments {commentsLeading = [], commentsTrailing = [], commentsInner = []}, locValue = PVar "msg"}]) (CApp (CVar "Lune.Prelude.Err") (CRecord [("message",CVar "msg"),("path",CVar "Lune.Prelude.Nil")])),CoreAlt (PCon "Lune.Prelude.Ok" [Located {locSpan = Span {spanStartLine = 74, spanStartCol = 10, spanEndLine = 74, spanEndCol = 19}, locComments = Comments {commentsLeading = [], commentsTrailing = [], commentsInner = []}, locValue = PVar "elements"}]) (CApp (CApp (CApp (CVar "Lune.Json.Decode.decodeList") (CVar "elemDecoder")) (CInt 0)) (CVar "elements"))]))),CoreDecl "" (CInt 0),CoreDecl "Lune.Json.Decode.decodeList" (CLam [PVar "decoder",PVar "idx",PVar "elements"] (CCase (CVar "elements") [CoreAlt (PCon "Lune.Prelude.Nil" []) (CApp (CVar "Lune.Prelude.Ok") (CVar "Lune.Prelude.Nil")),CoreAlt (PCon "Lune.Prelude.Cons" [Located {locSpan = Span {spanStartLine = 80, spanStartCol = 10, spanEndLine = 80, spanEndCol = 12}, locComments = Comments {commentsLeading = [], commentsTrailing = [], commentsInner = []}, locValue = PVar "x"},Located {locSpan = Span {spanStartLine = 80, spanStartCol = 12, spanEndLine = 80, spanEndCol = 15}, locComments = Comments {commentsLeading = [], commentsTrailing = [], commentsInner = []}, locValue = PVar "xs"}]) (CCase (CApp (CVar "decoder") (CVar "x")) [CoreAlt (PCon "Lune.Prelude.Err" [Located {locSpan = Span {spanStartLine = 82, spanStartCol = 13, spanEndLine = 82, spanEndCol = 17}, locComments = Comments {commentsLeading = [], commentsTrailing = [], commentsInner = []}, locValue = PVar "err"}]) (CApp (CVar "Lune.Prelude.Err") (CApp (CApp (CVar "Lune.Json.Decode.prependPath") (CApp (CVar "Lune.Json.Decode.Index") (CVar "idx"))) (CVar "err"))),CoreAlt (PCon "Lune.Prelude.Ok" [Located {locSpan = Span {spanStartLine = 83, spanStartCol = 12, spanEndLine = 83, spanEndCol = 14}, locComments = Comments {commentsLeading = [], commentsTrailing = [], commentsInner = []}, locValue = PVar "a"}]) (CCase (CApp (CApp (CApp (CVar "Lune.Json.Decode.decodeList") (CVar "decoder")) (CApp (CApp (CVar "Lune.Int.add") (CVar "idx")) (CInt 1))) (CVar "xs")) [CoreAlt (PCon "Lune.Prelude.Err" [Located {locSpan = Span {spanStartLine = 85, spanStartCol = 17, spanEndLine = 85, spanEndCol = 21}, locComments = Comments {commentsLeading = [], commentsTrailing = [], commentsInner = []}, locValue = PVar "err"}]) (CApp (CVar "Lune.Prelude.Err") (CVar "err")),CoreAlt (PCon "Lune.Prelude.Ok" [Located {locSpan = Span {spanStartLine = 86, spanStartCol = 16, spanEndLine = 86, spanEndCol = 21}, locComments = Comments {commentsLeading = [], commentsTrailing = [], commentsInner = []}, locValue = PVar "rest"}]) (CApp (CVar "Lune.Prelude.Ok") (CApp (CApp (CVar "Lune.Prelude.Cons") (CVar "a")) (CVar "rest")))])])])),CoreDecl "" (CInt 0),CoreDecl "Lune.Json.Decode.maybe" (CLam [PVar "decoder"] (CLam [PVar "json"] (CCase (CApp (CVar "prim_jsonIsNull") (CVar "json")) [CoreAlt (PCon "Lune.Prelude.True" []) (CApp (CVar "Lune.Prelude.Ok") (CVar "Lune.Prelude.Nothing")),CoreAlt (PCon "Lune.Prelude.False" []) (CCase (CApp (CVar "decoder") (CVar "json")) [CoreAlt (PCon "Lune.Prelude.Ok" [Located {locSpan = Span {spanStartLine = 95, spanStartCol = 14, spanEndLine = 95, spanEndCol = 16}, locComments = Comments {commentsLeading = [], commentsTrailing = [], commentsInner = []}, locValue = PVar "a"}]) (CApp (CVar "Lune.Prelude.Ok") (CApp (CVar "Lune.Prelude.Just") (CVar "a"))),CoreAlt (PCon "Lune.Prelude.Err" [Located {locSpan = Span {spanStartLine = 96, spanStartCol = 15, spanEndLine = 96, spanEndCol = 19}, locComments = Comments {commentsLeading = [], commentsTrailing = [], commentsInner = []}, locValue = PVar "err"}]) (CApp (CVar "Lune.Prelude.Err") (CVar "err"))])]))),CoreDecl "" (CInt 0),CoreDecl "Lune.Json.Decode.field" (CLam [PVar "name",PVar "decoder"] (CLam [PVar "json"] (CCase (CApp (CApp (CVar "prim_jsonGetField") (CVar "name")) (CVar "json")) [CoreAlt (PCon "Lune.Prelude.Err" [Located {locSpan = Span {spanStartLine = 102, spanStartCol = 11, spanEndLine = 102, spanEndCol = 15}, locComments = Comments {commentsLeading = [], commentsTrailing = [], commentsInner = []}, locValue = PVar "msg"}]) (CApp (CVar "Lune.Prelude.Err") (CRecord [("message",CVar "msg"),("path",CApp (CApp (CVar "Lune.Prelude.Cons") (CApp (CVar "Lune.Json.Decode.Field") (CVar "name"))) (CVar "Lune.Prelude.Nil"))])),CoreAlt (PCon "Lune.Prelude.Ok" [Located {locSpan = Span {spanStartLine = 103, spanStartCol = 10, spanEndLine = 103, spanEndCol = 20}, locComments = Comments {commentsLeading = [], commentsTrailing = [], commentsInner = []}, locValue = PVar "fieldJson"}]) (CCase (CApp (CVar "decoder") (CVar "fieldJson")) [CoreAlt (PCon "Lune.Prelude.Err" [Located {locSpan = Span {spanStartLine = 105, spanStartCol = 15, spanEndLine = 105, spanEndCol = 19}, locComments = Comments {commentsLeading = [], commentsTrailing = [], commentsInner = []}, locValue = PVar "err"}]) (CApp (CVar "Lune.Prelude.Err") (CApp (CApp (CVar "Lune.Json.Decode.prependPath") (CApp (CVar "Lune.Json.Decode.Field") (CVar "name"))) (CVar "err"))),CoreAlt (PCon "Lune.Prelude.Ok" [Located {locSpan = Span {spanStartLine = 106, spanStartCol = 14, spanEndLine = 106, spanEndCol = 16}, locComments = Comments {commentsLeading = [], commentsTrailing = [], commentsInner = []}, locValue = PVar "a"}]) (CApp (CVar "Lune.Prelude.Ok") (CVar "a"))])]))),CoreDecl "" (CInt 0),CoreDecl "Lune.Json.Decode.index" (CLam [PVar "idx",PVar "decoder"] (CLam [PVar "json"] (CCase (CApp (CApp (CVar "prim_jsonGetIndex") (CVar "idx")) (CVar "json")) [CoreAlt (PCon "Lune.Prelude.Err" [Located {locSpan = Span {spanStartLine = 112, spanStartCol = 11, spanEndLine = 112, spanEndCol = 15}, locComments = Comments {commentsLeading = [], commentsTrailing = [], commentsInner = []}, locValue = PVar "msg"}]) (CApp (CVar "Lune.Prelude.Err") (CRecord [("message",CVar "msg"),("path",CApp (CApp (CVar "Lune.Prelude.Cons") (CApp (CVar "Lune.Json.Decode.Index") (CVar "idx"))) (CVar "Lune.Prelude.Nil"))])),CoreAlt (PCon "Lune.Prelude.Ok" [Located {locSpan = Span {spanStartLine = 113, spanStartCol = 10, spanEndLine = 113, spanEndCol = 19}, locComments = Comments {commentsLeading = [], commentsTrailing = [], commentsInner = []}, locValue = PVar "elemJson"}]) (CCase (CApp (CVar "decoder") (CVar "elemJson")) [CoreAlt (PCon "Lune.Prelude.Err" [Located {locSpan = Span {spanStartLine = 115, spanStartCol = 15, spanEndLine = 115, spanEndCol = 19}, locComments = Comments {commentsLeading = [], commentsTrailing = [], commentsInner = []}, locValue = PVar "err"}]) (CApp (CVar "Lune.Prelude.Err") (CApp (CApp (CVar "Lune.Json.Decode.prependPath") (CApp (CVar "Lune.Json.Decode.Index") (CVar "idx"))) (CVar "err"))),CoreAlt (PCon "Lune.Prelude.Ok" [Located {locSpan = Span {spanStartLine = 116, spanStartCol = 14, spanEndLine = 116, spanEndCol = 16}, locComments = Comments {commentsLeading = [], commentsTrailing = [], commentsInner = []}, locValue = PVar "a"}]) (CApp (CVar "Lune.Prelude.Ok") (CVar "a"))])]))),CoreDecl "" (CInt 0),CoreDecl "Lune.Json.Decode.at" (CLam [PVar "path",PVar "decoder"] (CCase (CVar "path") [CoreAlt (PCon "Lune.Prelude.Nil" []) (CVar "decoder"),CoreAlt (PCon "Lune.Prelude.Cons" [Located {locSpan = Span {spanStartLine = 122, spanStartCol = 10, spanEndLine = 122, spanEndCol = 15}, locComments = Comments {commentsLeading = [], commentsTrailing = [], commentsInner = []}, locValue = PVar "name"},Located {locSpan = Span {spanStartLine = 122, spanStartCol = 15, spanEndLine = 122, spanEndCol = 20}, locComments = Comments {commentsLeading = [], commentsTrailing = [], commentsInner = []}, locValue = PVar "rest"}]) (CApp (CApp (CVar "Lune.Json.Decode.field") (CVar "name")) (CApp (CApp (CVar "Lune.Json.Decode.at") (CVar "rest")) (CVar "decoder")))])),CoreDecl "" (CInt 0),CoreDecl "Lune.Json.Decode.map" (CLam [PVar "f",PVar "decoder"] (CLam [PVar "json"] (CCase (CApp (CVar "decoder") (CVar "json")) [CoreAlt (PCon "Lune.Prelude.Err" [Located {locSpan = Span {spanStartLine = 128, spanStartCol = 11, spanEndLine = 128, spanEndCol = 15}, locComments = Comments {commentsLeading = [], commentsTrailing = [], commentsInner = []}, locValue = PVar "err"}]) (CApp (CVar "Lune.Prelude.Err") (CVar "err")),CoreAlt (PCon "Lune.Prelude.Ok" [Located {locSpan = Span {spanStartLine = 129, spanStartCol = 10, spanEndLine = 129, spanEndCol = 12}, locComments = Comments {commentsLeading = [], commentsTrailing = [], commentsInner = []}, locValue = PVar "a"}]) (CApp (CVar "Lune.Prelude.Ok") (CApp (CVar "f") (CVar "a")))]))),CoreDecl "" (CInt 0),CoreDecl "Lune.Json.Decode.map2" (CLam [PVar "f",PVar "decoderA",PVar "decoderB"] (CLam [PVar "json"] (CCase (CApp (CVar "decoderA") (CVar "json")) [CoreAlt (PCon "Lune.Prelude.Err" [Located {locSpan = Span {spanStartLine = 135, spanStartCol = 11, spanEndLine = 135, spanEndCol = 15}, locComments = Comments {commentsLeading = [], commentsTrailing = [], commentsInner = []}, locValue = PVar "err"}]) (CApp (CVar "Lune.Prelude.Err") (CVar "err")),CoreAlt (PCon "Lune.Prelude.Ok" [Located {locSpan = Span {spanStartLine = 136, spanStartCol = 10, spanEndLine = 136, spanEndCol = 12}, locComments = Comments {commentsLeading = [], commentsTrailing = [], commentsInner = []}, locValue = PVar "a"}]) (CCase (CApp (CVar "decoderB") (CVar "json")) [CoreAlt (PCon "Lune.Prelude.Err" [Located {locSpan = Span {spanStartLine = 138, spanStartCol = 15, spanEndLine = 138, spanEndCol = 19}, locComments = Comments {commentsLeading = [], commentsTrailing = [], commentsInner = []}, locValue = PVar "err"}]) (CApp (CVar "Lune.Prelude.Err") (CVar "err")),CoreAlt (PCon "Lune.Prelude.Ok" [Located {locSpan = Span {spanStartLine = 139, spanStartCol = 14, spanEndLine = 139, spanEndCol = 16}, locComments = Comments {commentsLeading = [], commentsTrailing = [], commentsInner = []}, locValue = PVar "b"}]) (CApp (CVar "Lune.Prelude.Ok") (CApp (CApp (CVar "f") (CVar "a")) (CVar "b")))])]))),CoreDecl "" (CInt 0),CoreDecl "Lune.Json.Decode.map3" (CLam [PVar "f",PVar "da",PVar "db",PVar "dc"] (CLam [PVar "json"] (CCase (CApp (CVar "da") (CVar "json")) [CoreAlt (PCon "Lune.Prelude.Err" [Located {locSpan = Span {spanStartLine = 145, spanStartCol = 11, spanEndLine = 145, spanEndCol = 15}, locComments = Comments {commentsLeading = [], commentsTrailing = [], commentsInner = []}, locValue = PVar "err"}]) (CApp (CVar "Lune.Prelude.Err") (CVar "err")),CoreAlt (PCon "Lune.Prelude.Ok" [Located {locSpan = Span {spanStartLine = 146, spanStartCol = 10, spanEndLine = 146, spanEndCol = 12}, locComments = Comments {commentsLeading = [], commentsTrailing = [], commentsInner = []}, locValue = PVar "a"}]) (CCase (CApp (CVar "db") (CVar "json")) [CoreAlt (PCon "Lune.Prelude.Err" [Located {locSpan = Span {spanStartLine = 148, spanStartCol = 15, spanEndLine = 148, spanEndCol = 19}, locComments = Comments {commentsLeading = [], commentsTrailing = [], commentsInner = []}, locValue = PVar "err"}]) (CApp (CVar "Lune.Prelude.Err") (CVar "err")),CoreAlt (PCon "Lune.Prelude.Ok" [Located {locSpan = Span {spanStartLine = 149, spanStartCol = 14, spanEndLine = 149, spanEndCol = 16}, locComments = Comments {commentsLeading = [], commentsTrailing = [], commentsInner = []}, locValue = PVar "b"}]) (CCase (CApp (CVar "dc") (CVar "json")) [CoreAlt (PCon "Lune.Prelude.Err" [Located {locSpan = Span {spanStartLine = 151, spanStartCol = 19, spanEndLine = 151, spanEndCol = 23}, locComments = Comments {commentsLeading = [], commentsTrailing = [], commentsInner = []}, locValue = PVar "err"}]) (CApp (CVar "Lune.Prelude.Err") (CVar "err")),CoreAlt (PCon "Lune.Prelude.Ok" [Located {locSpan = Span {spanStartLine = 152, spanStartCol = 18, spanEndLine = 152, spanEndCol = 20}, locComments = Comments {commentsLeading = [], commentsTrailing = [], commentsInner = []}, locValue = PVar "c"}]) (CApp (CVar "Lune.Prelude.Ok") (CApp (CApp (CApp (CVar "f") (CVar "a")) (CVar "b")) (CVar "c")))])])]))),CoreDecl "" (CInt 0),CoreDecl "Lune.Json.Decode.map4" (CLam [PVar "f",PVar "da",PVar "db",PVar "dc",PVar "dd"] (CLam [PVar "json"] (CCase (CApp (CVar "da") (CVar "json")) [CoreAlt (PCon "Lune.Prelude.Err" [Located {locSpan = Span {spanStartLine = 158, spanStartCol = 11, spanEndLine = 158, spanEndCol = 15}, locComments = Comments {commentsLeading = [], commentsTrailing = [], commentsInner = []}, locValue = PVar "err"}]) (CApp (CVar "Lune.Prelude.Err") (CVar "err")),CoreAlt (PCon "Lune.Prelude.Ok" [Located {locSpan = Span {spanStartLine = 159, spanStartCol = 10, spanEndLine = 159, spanEndCol = 12}, locComments = Comments {commentsLeading = [], commentsTrailing = [], commentsInner = []}, locValue = PVar "a"}]) (CCase (CApp (CVar "db") (CVar "json")) [CoreAlt (PCon "Lune.Prelude.Err" [Located {locSpan = Span {spanStartLine = 161, spanStartCol = 15, spanEndLine = 161, spanEndCol = 19}, locComments = Comments {commentsLeading = [], commentsTrailing = [], commentsInner = []}, locValue = PVar "err"}]) (CApp (CVar "Lune.Prelude.Err") (CVar "err")),CoreAlt (PCon "Lune.Prelude.Ok" [Located {locSpan = Span {spanStartLine = 162, spanStartCol = 14, spanEndLine = 162, spanEndCol = 16}, locComments = Comments {commentsLeading = [], commentsTrailing = [], commentsInner = []}, locValue = PVar "b"}]) (CCase (CApp (CVar "dc") (CVar "json")) [CoreAlt (PCon "Lune.Prelude.Err" [Located {locSpan = Span {spanStartLine = 164, spanStartCol = 19, spanEndLine = 164, spanEndCol = 23}, locComments = Comments {commentsLeading = [], commentsTrailing = [], commentsInner = []}, locValue = PVar "err"}]) (CApp (CVar "Lune.Prelude.Err") (CVar "err")),CoreAlt (PCon "Lune.Prelude.Ok" [Located {locSpan = Span {spanStartLine = 165, spanStartCol = 18, spanEndLine = 165, spanEndCol = 20}, locComments = Comments {commentsLeading = [], commentsTrailing = [], commentsInner = []}, locValue = PVar "c"}]) (CCase (CApp (CVar "dd") (CVar "json")) [CoreAlt (PCon "Lune.Prelude.Err" [Located {locSpan = Span {spanStartLine = 167, spanStartCol = 23, spanEndLine = 167, spanEndCol = 27}, locComments = Comments {commentsLeading = [], commentsTrailing = [], commentsInner = []}, locValue = PVar "err"}]) (CApp (CVar "Lune.Prelude.Err") (CVar "err")),CoreAlt (PCon "Lune.Prelude.Ok" [Located {locSpan = Span {spanStartLine = 168, spanStartCol = 22, spanEndLine = 168, spanEndCol = 24}, locComments = Comments {commentsLeading = [], commentsTrailing = [], commentsInner = []}, locValue = PVar "d"}]) (CApp (CVar "Lune.Prelude.Ok") (CApp (CApp (CApp (CApp (CVar "f") (CVar "a")) (CVar "b")) (CVar "c")) (CVar "d")))])])])]))),CoreDecl "" (CInt 0),CoreDecl "Lune.Json.Decode.map5" (CLam [PVar "fn",PVar "da",PVar "db",PVar "dc",PVar "dd",PVar "de"] (CLam [PVar "json"] (CCase (CApp (CVar "da") (CVar "json")) [CoreAlt (PCon "Lune.Prelude.Err" [Located {locSpan = Span {spanStartLine = 174, spanStartCol = 11, spanEndLine = 174, spanEndCol = 15}, locComments = Comments {commentsLeading = [], commentsTrailing = [], commentsInner = []}, locValue = PVar "err"}]) (CApp (CVar "Lune.Prelude.Err") (CVar "err")),CoreAlt (PCon "Lune.Prelude.Ok" [Located {locSpan = Span {spanStartLine = 175, spanStartCol = 10, spanEndLine = 175, spanEndCol = 12}, locComments = Comments {commentsLeading = [], commentsTrailing = [], commentsInner = []}, locValue = PVar "a"}]) (CCase (CApp (CVar "db") (CVar "json")) [CoreAlt (PCon "Lune.Prelude.Err" [Located {locSpan = Span {spanStartLine = 177, spanStartCol = 15, spanEndLine = 177, spanEndCol = 19}, locComments = Comments {commentsLeading = [], commentsTrailing = [], commentsInner = []}, locValue = PVar "err"}]) (CApp (CVar "Lune.Prelude.Err") (CVar "err")),CoreAlt (PCon "Lune.Prelude.Ok" [Located {locSpan = Span {spanStartLine = 178, spanStartCol = 14, spanEndLine = 178, spanEndCol = 16}, locComments = Comments {commentsLeading = [], commentsTrailing = [], commentsInner = []}, locValue = PVar "b"}]) (CCase (CApp (CVar "dc") (CVar "json")) [CoreAlt (PCon "Lune.Prelude.Err" [Located {locSpan = Span {spanStartLine = 180, spanStartCol = 19, spanEndLine = 180, spanEndCol = 23}, locComments = Comments {commentsLeading = [], commentsTrailing = [], commentsInner = []}, locValue = PVar "err"}]) (CApp (CVar "Lune.Prelude.Err") (CVar "err")),CoreAlt (PCon "Lune.Prelude.Ok" [Located {locSpan = Span {spanStartLine = 181, spanStartCol = 18, spanEndLine = 181, spanEndCol = 20}, locComments = Comments {commentsLeading = [], commentsTrailing = [], commentsInner = []}, locValue = PVar "c"}]) (CCase (CApp (CVar "dd") (CVar "json")) [CoreAlt (PCon "Lune.Prelude.Err" [Located {locSpan = Span {spanStartLine = 183, spanStartCol = 23, spanEndLine = 183, spanEndCol = 27}, locComments = Comments {commentsLeading = [], commentsTrailing = [], commentsInner = []}, locValue = PVar "err"}]) (CApp (CVar "Lune.Prelude.Err") (CVar "err")),CoreAlt (PCon "Lune.Prelude.Ok" [Located {locSpan = Span {spanStartLine = 184, spanStartCol = 22, spanEndLine = 184, spanEndCol = 24}, locComments = Comments {commentsLeading = [], commentsTrailing = [], commentsInner = []}, locValue = PVar "d"}]) (CCase (CApp (CVar "de") (CVar "json")) [CoreAlt (PCon "Lune.Prelude.Err" [Located {locSpan = Span {spanStartLine = 186, spanStartCol = 27, spanEndLine = 186, spanEndCol = 31}, locComments = Comments {commentsLeading = [], commentsTrailing = [], commentsInner = []}, locValue = PVar "err"}]) (CApp (CVar "Lune.Prelude.Err") (CVar "err")),CoreAlt (PCon "Lune.Prelude.Ok" [Located {locSpan = Span {spanStartLine = 187, spanStartCol = 26, spanEndLine = 187, spanEndCol = 28}, locComments = Comments {commentsLeading = [], commentsTrailing = [], commentsInner = []}, locValue = PVar "e"}]) (CApp (CVar "Lune.Prelude.Ok") (CApp (CApp (CApp (CApp (CApp (CVar "fn") (CVar "a")) (CVar "b")) (CVar "c")) (CVar "d")) (CVar "e")))])])])])]))),CoreDecl "" (CInt 0),CoreDecl "Lune.Json.Decode.andThen" (CLam [PVar "continuation",PVar "decoder"] (CLam [PVar "json"] (CCase (CApp (CVar "decoder") (CVar "json")) [CoreAlt (PCon "Lune.Prelude.Err" [Located {locSpan = Span {spanStartLine = 193, spanStartCol = 11, spanEndLine = 193, spanEndCol = 15}, locComments = Comments {commentsLeading = [], commentsTrailing = [], commentsInner = []}, locValue = PVar "err"}]) (CApp (CVar "Lune.Prelude.Err") (CVar "err")),CoreAlt (PCon "Lune.Prelude.Ok" [Located {locSpan = Span {spanStartLine = 194, spanStartCol = 10, spanEndLine = 194, spanEndCol = 12}, locComments = Comments {commentsLeading = [], commentsTrailing = [], commentsInner = []}, locValue = PVar "a"}]) (CApp (CApp (CVar "continuation") (CVar "a")) (CVar "json"))]))),CoreDecl "" (CInt 0),CoreDecl "Lune.Json.Decode.oneOf" (CLam [PVar "decoders"] (CLam [PVar "json"] (CApp (CApp (CApp (CVar "Lune.Json.Decode.tryDecoders") (CVar "decoders")) (CRecord [("message",CString "oneOf: no decoders provided"),("path",CVar "Lune.Prelude.Nil")])) (CVar "json")))),CoreDecl "" (CInt 0),CoreDecl "Lune.Json.Decode.tryDecoders" (CLam [PVar "decoders",PVar "lastErr",PVar "json"] (CCase (CVar "decoders") [CoreAlt (PCon "Lune.Prelude.Nil" []) (CApp (CVar "Lune.Prelude.Err") (CVar "lastErr")),CoreAlt (PCon "Lune.Prelude.Cons" [Located {locSpan = Span {spanStartLine = 205, spanStartCol = 10, spanEndLine = 205, spanEndCol = 18}, locComments = Comments {commentsLeading = [], commentsTrailing = [], commentsInner = []}, locValue = PVar "decoder"},Located {locSpan = Span {spanStartLine = 205, spanStartCol = 18, spanEndLine = 205, spanEndCol = 23}, locComments = Comments {commentsLeading = [], commentsTrailing = [], commentsInner = []}, locValue = PVar "rest"}]) (CCase (CApp (CVar "decoder") (CVar "json")) [CoreAlt (PCon "Lune.Prelude.Ok" [Located {locSpan = Span {spanStartLine = 207, spanStartCol = 12, spanEndLine = 207, spanEndCol = 14}, locComments = Comments {commentsLeading = [], commentsTrailing = [], commentsInner = []}, locValue = PVar "a"}]) (CApp (CVar "Lune.Prelude.Ok") (CVar "a")),CoreAlt (PCon "Lune.Prelude.Err" [Located {locSpan = Span {spanStartLine = 208, spanStartCol = 13, spanEndLine = 208, spanEndCol = 17}, locComments = Comments {commentsLeading = [], commentsTrailing = [], commentsInner = []}, locValue = PVar "err"}]) (CApp (CApp (CApp (CVar "Lune.Json.Decode.tryDecoders") (CVar "rest")) (CVar "err")) (CVar "json"))])])),CoreDecl "" (CInt 0),CoreDecl "Lune.Json.Decode.prependPath" (CLam [PVar "item",PVar "err"] (CRecord [("message",CSelect (CVar "err") "message"),("path",CApp (CApp (CVar "Lune.Prelude.Cons") (CVar "item")) (CSelect (CVar "err") "path"))])),CoreDecl "" (CInt 0),CoreDecl "" (CInt 0),CoreDecl "" (CInt 0),CoreDecl "" (CInt 0),CoreDecl "Lune.Http.Api.pure" (CVar "Lune.Task.succeed"),CoreDecl "" (CInt 0),CoreDecl "Lune.Http.Api.fail" (CVar "Lune.Task.fail"),CoreDecl "" (CInt 0),CoreDecl "Lune.Http.Api.orFail" (CLam [PVar "err",PVar "maybe"] (CCase (CVar "maybe") [CoreAlt (PCon "Lune.Prelude.Nothing" []) (CApp (CVar "Lune.Http.Api.fail") (CVar "err")),CoreAlt (PCon "Lune.Prelude.Just" [Located {locSpan = Span {spanStartLine = 44, spanStartCol = 10, spanEndLine = 44, spanEndCol = 12}, locComments = Comments {commentsLeading = [], commentsTrailing = [], commentsInner = []}, locValue = PVar "a"}]) (CApp (CVar "Lune.Http.Api.pure") (CVar "a"))])),CoreDecl "" (CInt 0),CoreDecl "Lune.Http.Api.jsonBody" (CLam [PVar "toErr",PVar "decoder",PVar "request"] (CCase (CApp (CVar "Lune.Json.parse") (CSelect (CVar "request") "body")) [CoreAlt (PCon "Lune.Prelude.Err" [Located {locSpan = Span {spanStartLine = 49, spanStartCol = 9, spanEndLine = 49, spanEndCol = 13}, locComments = Comments {commentsLeading = [], commentsTrailing = [], commentsInner = []}, locValue = PVar "msg"}]) (CApp (CVar "Lune.Prelude.Err") (CApp (CVar "toErr") (CVar "msg"))),CoreAlt (PCon "Lune.Prelude.Ok" [Located {locSpan = Span {spanStartLine = 50, spanStartCol = 8, spanEndLine = 50, spanEndCol = 13}, locComments = Comments {commentsLeading = [], commentsTrailing = [], commentsInner = []}, locValue = PVar "json"}]) (CCase (CApp (CApp (CVar "Lune.Json.Decode.decodeValue") (CVar "decoder")) (CVar "json")) [CoreAlt (PCon "Lune.Prelude.Err" [Located {locSpan = Span {spanStartLine = 52, spanStartCol = 13, spanEndLine = 52, spanEndCol = 23}, locComments = Comments {commentsLeading = [], commentsTrailing = [], commentsInner = []}, locValue = PVar "decodeErr"}]) (CApp (CVar "Lune.Prelude.Err") (CApp (CVar "toErr") (CSelect (CVar "decodeErr") "message"))),CoreAlt (PCon "Lune.Prelude.Ok" [Located {locSpan = Span {spanStartLine = 53, spanStartCol = 12, spanEndLine = 53, spanEndCol = 18}, locComments = Comments {commentsLeading = [], commentsTrailing = [], commentsInner = []}, locValue = PVar "value"}]) (CApp (CVar "Lune.Prelude.Ok") (CVar "value"))])])),CoreDecl "" (CInt 0),CoreDecl "Lune.Http.Api.serve" (CLam [PVar "config",PVar "routes"] (CApp (CApp (CVar "Lune.Http.Server.serve") (CSelect (CVar "config") "port")) (CApp (CApp (CVar "Lune.Http.Api.handleRequest") (CVar "config")) (CVar "routes")))),CoreDecl "" (CInt 0),CoreDecl "Lune.Http.Api.handleRequest" (CLam [PVar "config",PVar "routes",PVar "request"] (CCase (CApp (CApp (CVar "Lune.Http.Api.findMatchingRoute") (CVar "request")) (CVar "routes")) [CoreAlt (PCon "Lune.Prelude.Nothing" []) (CApp (CVar "Lune.Task.succeed") (CVar "Lune.Http.Api.notFoundResponse")),CoreAlt (PCon "Lune.Prelude.Just" [Located {locSpan = Span {spanStartLine = 64, spanStartCol = 10, spanEndLine = 64, spanEndCol = 16}, locComments = Comments {commentsLeading = [], commentsTrailing = [], commentsInner = []}, locValue = PVar "route"}]) (CApp (CApp (CVar "Lune.Task.onError") (CApp (CApp (CSelect (CVar "route") "handler") (CVar "request")) (CSelect (CVar "config") "context"))) (CLam [PVar "e"] (CApp (CVar "Lune.Task.succeed") (CApp (CSelect (CVar "config") "errorHandler") (CVar "e")))))])),CoreDecl "" (CInt 0),CoreDecl "Lune.Http.Api.findMatchingRoute" (CLam [PVar "request",PVar "routes"] (CCase (CVar "routes") [CoreAlt (PCon "Lune.Prelude.Nil" []) (CVar "Lune.Prelude.Nothing"),CoreAlt (PCon "Lune.Prelude.Cons" [Located {locSpan = Span {spanStartLine = 73, spanStartCol = 10, spanEndLine = 73, spanEndCol = 16}, locComments = Comments {commentsLeading = [], commentsTrailing = [], commentsInner = []}, locValue = PVar "route"},Located {locSpan = Span {spanStartLine = 73, spanStartCol = 16, spanEndLine = 73, spanEndCol = 21}, locComments = Comments {commentsLeading = [], commentsTrailing = [], commentsInner = []}, locValue = PVar "rest"}]) (CCase (CApp (CApp (CVar "Lune.Http.Api.methodMatches") (CSelect (CVar "request") "method")) (CSelect (CVar "route") "method")) [CoreAlt (PCon "Lune.Prelude.False" []) (CApp (CApp (CVar "Lune.Http.Api.findMatchingRoute") (CVar "request")) (CVar "rest")),CoreAlt (PCon "Lune.Prelude.True" []) (CCase (CApp (CApp (CVar "Lune.Http.Api.matchPath") (CSelect (CVar "route") "pattern")) (CSelect (CVar "request") "path")) [CoreAlt (PCon "Lune.Prelude.False" []) (CApp (CApp (CVar "Lune.Http.Api.findMatchingRoute") (CVar "request")) (CVar "rest")),CoreAlt (PCon "Lune.Prelude.True" []) (CApp (CVar "Lune.Prelude.Just") (CVar "route"))])])])),CoreDecl "" (CInt 0),CoreDecl "Lune.Http.Api.methodMatches" (CLam [PVar "m1",PVar "m2"] (CCase (CVar "m1") [CoreAlt (PCon "Lune.Http.GET" []) (CCase (CVar "m2") [CoreAlt (PCon "Lune.Http.GET" []) (CVar "Lune.Prelude.True"),CoreAlt PWildcard (CVar "Lune.Prelude.False")]),CoreAlt (PCon "Lune.Http.POST" []) (CCase (CVar "m2") [CoreAlt (PCon "Lune.Http.POST" []) (CVar "Lune.Prelude.True"),CoreAlt PWildcard (CVar "Lune.Prelude.False")]),CoreAlt (PCon "Lune.Http.PUT" []) (CCase (CVar "m2") [CoreAlt (PCon "Lune.Http.PUT" []) (CVar "Lune.Prelude.True"),CoreAlt PWildcard (CVar "Lune.Prelude.False")]),CoreAlt (PCon "Lune.Http.PATCH" []) (CCase (CVar "m2") [CoreAlt (PCon "Lune.Http.PATCH" []) (CVar "Lune.Prelude.True"),CoreAlt PWildcard (CVar "Lune.Prelude.False")]),CoreAlt (PCon "Lune.Http.DELETE" []) (CCase (CVar "m2") [CoreAlt (PCon "Lune.Http.DELETE" []) (CVar "Lune.Prelude.True"),CoreAlt PWildcard (CVar "Lune.Prelude.False")])])),CoreDecl "" (CInt 0),CoreDecl "Lune.Http.Api.matchPath" (CLam [PVar "pattern",PVar "rawPath"] (CApp (CApp (CVar "Lune.Http.Api.matchParts") (CApp (CVar "Lune.Http.Api.filterEmpty") (CApp (CApp (CVar "Lune.String.split") (CString "/")) (CVar "pattern")))) (CApp (CVar "Lune.Http.Api.filterEmpty") (CApp (CApp (CVar "Lune.String.split") (CString "/")) (CApp (CVar "Lune.Http.Api.stripQueryString") (CVar "rawPath")))))),CoreDecl "" (CInt 0),CoreDecl "Lune.Http.Api.stripQueryString" (CLam [PVar "path"] (CCase (CApp (CApp (CVar "Lune.String.indexOf") (CString "?")) (CVar "path")) [CoreAlt (PCon "Lune.Prelude.Nothing" []) (CVar "path"),CoreAlt (PCon "Lune.Prelude.Just" [Located {locSpan = Span {spanStartLine = 113, spanStartCol = 10, spanEndLine = 113, spanEndCol = 14}, locComments = Comments {commentsLeading = [], commentsTrailing = [], commentsInner = []}, locValue = PVar "idx"}]) (CApp (CApp (CVar "Lune.String.take") (CVar "idx")) (CVar "path"))])),CoreDecl "" (CInt 0),CoreDecl "Lune.Http.Api.matchParts" (CLam [PVar "ps",PVar "vs"] (CCase (CVar "ps") [CoreAlt (PCon "Lune.Prelude.Nil" []) (CCase (CVar "vs") [CoreAlt (PCon "Lune.Prelude.Nil" []) (CVar "Lune.Prelude.True"),CoreAlt PWildcard (CVar "Lune.Prelude.False")]),CoreAlt (PCon "Lune.Prelude.Cons" [Located {locSpan = Span {spanStartLine = 122, spanStartCol = 10, spanEndLine = 122, spanEndCol = 12}, locComments = Comments {commentsLeading = [], commentsTrailing = [], commentsInner = []}, locValue = PVar "p"},Located {locSpan = Span {spanStartLine = 122, spanStartCol = 12, spanEndLine = 122, spanEndCol = 18}, locComments = Comments {commentsLeading = [], commentsTrailing = [], commentsInner = []}, locValue = PVar "prest"}]) (CCase (CVar "vs") [CoreAlt (PCon "Lune.Prelude.Nil" []) (CVar "Lune.Prelude.False"),CoreAlt (PCon "Lune.Prelude.Cons" [Located {locSpan = Span {spanStartLine = 125, spanStartCol = 14, spanEndLine = 125, spanEndCol = 16}, locComments = Comments {commentsLeading = [], commentsTrailing = [], commentsInner = []}, locValue = PVar "v"},Located {locSpan = Span {spanStartLine = 125, spanStartCol = 16, spanEndLine = 125, spanEndCol = 22}, locComments = Comments {commentsLeading = [], commentsTrailing = [], commentsInner = []}, locValue = PVar "vrest"}]) (CCase (CApp (CApp (CVar "Lune.String.startsWith") (CString ":")) (CVar "p")) [CoreAlt (PCon "Lune.Prelude.True" []) (CApp (CApp (CVar "Lune.Http.Api.matchParts") (CVar "prest")) (CVar "vrest")),CoreAlt (PCon "Lune.Prelude.False" []) (CCase (CApp (CApp (CVar "Lune.String.eq") (CVar "p")) (CVar "v")) [CoreAlt (PCon "Lune.Prelude.True" []) (CApp (CApp (CVar "Lune.Http.Api.matchParts") (CVar "prest")) (CVar "vrest")),CoreAlt (PCon "Lune.Prelude.False" []) (CVar "Lune.Prelude.False")])])])])),CoreDecl "" (CInt 0),CoreDecl "Lune.Http.Api.filterEmpty" (CLam [PVar "xs"] (CCase (CVar "xs") [CoreAlt (PCon "Lune.Prelude.Nil" []) (CVar "Lune.Prelude.Nil"),CoreAlt (PCon "Lune.Prelude.Cons" [Located {locSpan = Span {spanStartLine = 137, spanStartCol = 10, spanEndLine = 137, spanEndCol = 12}, locComments = Comments {commentsLeading = [], commentsTrailing = [], commentsInner = []}, locValue = PVar "x"},Located {locSpan = Span {spanStartLine = 137, spanStartCol = 12, spanEndLine = 137, spanEndCol = 17}, locComments = Comments {commentsLeading = [], commentsTrailing = [], commentsInner = []}, locValue = PVar "rest"}]) (CCase (CApp (CVar "Lune.String.isEmpty") (CVar "x")) [CoreAlt (PCon "Lune.Prelude.True" []) (CApp (CVar "Lune.Http.Api.filterEmpty") (CVar "rest")),CoreAlt (PCon "Lune.Prelude.False" []) (CApp (CApp (CVar "Lune.Prelude.Cons") (CVar "x")) (CApp (CVar "Lune.Http.Api.filterEmpty") (CVar "rest")))])])),CoreDecl "" (CInt 0),CoreDecl "Lune.Http.Api.notFoundResponse" (CRecord [("status",CInt 404),("headers",CApp (CApp (CVar "Lune.Prelude.Cons") (CRecord [("key",CString "Content-Type"),("value",CString "application/json")])) (CVar "Lune.Prelude.Nil")),("body",CString "{\"error\":\"Not Found\"}")]),CoreDecl "" (CInt 0),CoreDecl "Lune.Http.Route.get" (CLam [PVar "pattern",PVar "handler"] (CRecord [("method",CVar "Lune.Http.GET"),("pattern",CVar "pattern"),("handler",CVar "handler")])),CoreDecl "" (CInt 0),CoreDecl "Lune.Http.Route.post" (CLam [PVar "pattern",PVar "handler"] (CRecord [("method",CVar "Lune.Http.POST"),("pattern",CVar "pattern"),("handler",CVar "handler")])),CoreDecl "" (CInt 0),CoreDecl "Lune.Http.Route.put" (CLam [PVar "pattern",PVar "handler"] (CRecord [("method",CVar "Lune.Http.PUT"),("pattern",CVar "pattern"),("handler",CVar "handler")])),CoreDecl "" (CInt 0),CoreDecl "Lune.Http.Route.patch" (CLam [PVar "pattern",PVar "handler"] (CRecord [("method",CVar "Lune.Http.PATCH"),("pattern",CVar "pattern"),("handler",CVar "handler")])),CoreDecl "" (CInt 0),CoreDecl "Lune.Http.Route.delete" (CLam [PVar "pattern",PVar "handler"] (CRecord [("method",CVar "Lune.Http.DELETE"),("pattern",CVar "pattern"),("handler",CVar "handler")])),CoreDecl "" (CInt 0),CoreDecl "Lune.Http.Route.define" (CLam [PVar "routes"] (CVar "routes")),CoreDecl "" (CInt 0),CoreDecl "Lune.List.map" (CLam [PVar "f",PVar "xs"] (CCase (CVar "xs") [CoreAlt (PCon "Lune.Prelude.Nil" []) (CVar "Lune.Prelude.Nil"),CoreAlt (PCon "Lune.Prelude.Cons" [Located {locSpan = Span {spanStartLine = 12, spanStartCol = 10, spanEndLine = 12, spanEndCol = 12}, locComments = Comments {commentsLeading = [], commentsTrailing = [], commentsInner = []}, locValue = PVar "x"},Located {locSpan = Span {spanStartLine = 12, spanStartCol = 12, spanEndLine = 12, spanEndCol = 15}, locComments = Comments {commentsLeading = [], commentsTrailing = [], commentsInner = []}, locValue = PVar "xt"}]) (CApp (CApp (CVar "Lune.Prelude.Cons") (CApp (CVar "f") (CVar "x"))) (CApp (CApp (CVar "Lune.List.map") (CVar "f")) (CVar "xt")))])),CoreDecl "" (CInt 0),CoreDecl "Lune.List.foldl" (CLam [PVar "f",PVar "acc",PVar "xs"] (CCase (CVar "xs") [CoreAlt (PCon "Lune.Prelude.Nil" []) (CVar "acc"),CoreAlt (PCon "Lune.Prelude.Cons" [Located {locSpan = Span {spanStartLine = 18, spanStartCol = 10, spanEndLine = 18, spanEndCol = 12}, locComments = Comments {commentsLeading = [], commentsTrailing = [], commentsInner = []}, locValue = PVar "x"},Located {locSpan = Span {spanStartLine = 18, spanStartCol = 12, spanEndLine = 18, spanEndCol = 15}, locComments = Comments {commentsLeading = [], commentsTrailing = [], commentsInner = []}, locValue = PVar "xt"}]) (CApp (CApp (CApp (CVar "Lune.List.foldl") (CVar "f")) (CApp (CApp (CVar "f") (CVar "acc")) (CVar "x"))) (CVar "xt"))])),CoreDecl "" (CInt 0),CoreDecl "Lune.List.length" (CLam [PVar "xs"] (CCase (CVar "xs") [CoreAlt (PCon "Lune.Prelude.Nil" []) (CInt 0),CoreAlt (PCon "Lune.Prelude.Cons" [Located {locSpan = Span {spanStartLine = 24, spanStartCol = 10, spanEndLine = 24, spanEndCol = 12}, locComments = Comments {commentsLeading = [], commentsTrailing = [], commentsInner = []}, locValue = PWildcard},Located {locSpan = Span {spanStartLine = 24, spanStartCol = 12, spanEndLine = 24, spanEndCol = 15}, locComments = Comments {commentsLeading = [], commentsTrailing = [], commentsInner = []}, locValue = PVar "xt"}]) (CApp (CApp (CVar "Lune.Int.add") (CInt 1)) (CApp (CVar "Lune.List.length") (CVar "xt")))])),CoreDecl "" (CInt 0),CoreDecl "Lune.List.reverse" (CLam [PVar "xs"] (CApp (CApp (CVar "Lune.List.reverseHelper") (CVar "xs")) (CVar "Lune.Prelude.Nil"))),CoreDecl "" (CInt 0),CoreDecl "Lune.List.reverseHelper" (CLam [PVar "xs",PVar "acc"] (CCase (CVar "xs") [CoreAlt (PCon "Lune.Prelude.Nil" []) (CVar "acc"),CoreAlt (PCon "Lune.Prelude.Cons" [Located {locSpan = Span {spanStartLine = 34, spanStartCol = 10, spanEndLine = 34, spanEndCol = 12}, locComments = Comments {commentsLeading = [], commentsTrailing = [], commentsInner = []}, locValue = PVar "x"},Located {locSpan = Span {spanStartLine = 34, spanStartCol = 12, spanEndLine = 34, spanEndCol = 15}, locComments = Comments {commentsLeading = [], commentsTrailing = [], commentsInner = []}, locValue = PVar "xt"}]) (CApp (CApp (CVar "Lune.List.reverseHelper") (CVar "xt")) (CApp (CApp (CVar "Lune.Prelude.Cons") (CVar "x")) (CVar "acc")))])),CoreDecl "" (CInt 0),CoreDecl "Lune.List.findFirst" (CLam [PVar "pred",PVar "xs"] (CCase (CVar "xs") [CoreAlt (PCon "Lune.Prelude.Nil" []) (CVar "Lune.Prelude.Nothing"),CoreAlt (PCon "Lune.Prelude.Cons" [Located {locSpan = Span {spanStartLine = 40, spanStartCol = 10, spanEndLine = 40, spanEndCol = 12}, locComments = Comments {commentsLeading = [], commentsTrailing = [], commentsInner = []}, locValue = PVar "x"},Located {locSpan = Span {spanStartLine = 40, spanStartCol = 12, spanEndLine = 40, spanEndCol = 17}, locComments = Comments {commentsLeading = [], commentsTrailing = [], commentsInner = []}, locValue = PVar "rest"}]) (CCase (CApp (CVar "pred") (CVar "x")) [CoreAlt (PCon "Lune.Prelude.True" []) (CApp (CVar "Lune.Prelude.Just") (CVar "x")),CoreAlt (PCon "Lune.Prelude.False" []) (CApp (CApp (CVar "Lune.List.findFirst") (CVar "pred")) (CVar "rest"))])])),CoreDecl "" (CInt 0),CoreDecl "Lune.List.get" (CLam [PVar "n",PVar "xs"] (CCase (CApp (CApp (CVar "Lune.Int.lte") (CVar "n")) (CInt 0)) [CoreAlt (PCon "Lune.Prelude.True" []) (CCase (CVar "xs") [CoreAlt (PCon "Lune.Prelude.Nil" []) (CVar "Lune.Prelude.Nothing"),CoreAlt (PCon "Lune.Prelude.Cons" [Located {locSpan = Span {spanStartLine = 51, spanStartCol = 14, spanEndLine = 51, spanEndCol = 16}, locComments = Comments {commentsLeading = [], commentsTrailing = [], commentsInner = []}, locValue = PVar "x"},Located {locSpan = Span {spanStartLine = 51, spanStartCol = 16, spanEndLine = 51, spanEndCol = 18}, locComments = Comments {commentsLeading = [], commentsTrailing = [], commentsInner = []}, locValue = PWildcard}]) (CApp (CVar "Lune.Prelude.Just") (CVar "x"))]),CoreAlt (PCon "Lune.Prelude.False" []) (CCase (CVar "xs") [CoreAlt (PCon "Lune.Prelude.Nil" []) (CVar "Lune.Prelude.Nothing"),CoreAlt (PCon "Lune.Prelude.Cons" [Located {locSpan = Span {spanStartLine = 55, spanStartCol = 14, spanEndLine = 55, spanEndCol = 16}, locComments = Comments {commentsLeading = [], commentsTrailing = [], commentsInner = []}, locValue = PWildcard},Located {locSpan = Span {spanStartLine = 55, spanStartCol = 16, spanEndLine = 55, spanEndCol = 21}, locComments = Comments {commentsLeading = [], commentsTrailing = [], commentsInner = []}, locValue = PVar "rest"}]) (CApp (CApp (CVar "Lune.List.get") (CApp (CApp (CVar "Lune.Int.sub") (CVar "n")) (CInt 1))) (CVar "rest"))])])),CoreDecl "" (CInt 0),CoreDecl "Lune.List.takeWhile" (CLam [PVar "pred",PVar "xs"] (CCase (CVar "xs") [CoreAlt (PCon "Lune.Prelude.Nil" []) (CVar "Lune.Prelude.Nil"),CoreAlt (PCon "Lune.Prelude.Cons" [Located {locSpan = Span {spanStartLine = 61, spanStartCol = 10, spanEndLine = 61, spanEndCol = 12}, locComments = Comments {commentsLeading = [], commentsTrailing = [], commentsInner = []}, locValue = PVar "x"},Located {locSpan = Span {spanStartLine = 61, spanStartCol = 12, spanEndLine = 61, spanEndCol = 17}, locComments = Comments {commentsLeading = [], commentsTrailing = [], commentsInner = []}, locValue = PVar "rest"}]) (CCase (CApp (CVar "pred") (CVar "x")) [CoreAlt (PCon "Lune.Prelude.True" []) (CApp (CApp (CVar "Lune.Prelude.Cons") (CVar "x")) (CApp (CApp (CVar "Lune.List.takeWhile") (CVar "pred")) (CVar "rest"))),CoreAlt (PCon "Lune.Prelude.False" []) (CVar "Lune.Prelude.Nil")])])),CoreDecl "" (CInt 0),CoreDecl "Lune.List.dropWhile" (CLam [PVar "pred",PVar "xs"] (CCase (CVar "xs") [CoreAlt (PCon "Lune.Prelude.Nil" []) (CVar "Lune.Prelude.Nil"),CoreAlt (PCon "Lune.Prelude.Cons" [Located {locSpan = Span {spanStartLine = 70, spanStartCol = 10, spanEndLine = 70, spanEndCol = 12}, locComments = Comments {commentsLeading = [], commentsTrailing = [], commentsInner = []}, locValue = PVar "x"},Located {locSpan = Span {spanStartLine = 70, spanStartCol = 12, spanEndLine = 70, spanEndCol = 17}, locComments = Comments {commentsLeading = [], commentsTrailing = [], commentsInner = []}, locValue = PVar "rest"}]) (CCase (CApp (CVar "pred") (CVar "x")) [CoreAlt (PCon "Lune.Prelude.True" []) (CApp (CApp (CVar "Lune.List.dropWhile") (CVar "pred")) (CVar "rest")),CoreAlt (PCon "Lune.Prelude.False" []) (CVar "xs")])])),CoreDecl "" (CInt 0),CoreDecl "" (CInt 0),CoreDecl "Lune.Json.Encode.null" (CVar "prim_jsonNull"),CoreDecl "" (CInt 0),CoreDecl "Lune.Json.Encode.bool" (CVar "prim_jsonBool"),CoreDecl "" (CInt 0),CoreDecl "Lune.Json.Encode.int" (CVar "prim_jsonInt"),CoreDecl "" (CInt 0),CoreDecl "Lune.Json.Encode.float" (CVar "prim_jsonFloat"),CoreDecl "" (CInt 0),CoreDecl "Lune.Json.Encode.string" (CVar "prim_jsonString"),CoreDecl "" (CInt 0),CoreDecl "Lune.Json.Encode.list" (CLam [PVar "encoder",PVar "items"] (CApp (CVar "prim_jsonArray") (CApp (CApp (CVar "Lune.List.map") (CVar "encoder")) (CVar "items")))),CoreDecl "" (CInt 0),CoreDecl "Lune.Json.Encode.object" (CLam [PVar "pairs"] (CApp (CVar "prim_jsonObject") (CVar "pairs"))),CoreDecl "" (CInt 0),CoreDecl "" (CInt 0),CoreDecl "" (CInt 0),CoreDecl "" (CInt 0),CoreDecl "ApiServer.encodeUser" (CLam [PVar "user"] (CApp (CVar "Lune.Json.Encode.object") (CApp (CApp (CVar "Lune.Prelude.Cons") (CRecord [("key",CString "id"),("value",CApp (CVar "Lune.Json.Encode.int") (CSelect (CVar "user") "id"))])) (CApp (CApp (CVar "Lune.Prelude.Cons") (CRecord [("key",CString "name"),("value",CApp (CVar "Lune.Json.Encode.string") (CSelect (CVar "user") "name"))])) (CVar "Lune.Prelude.Nil"))))),CoreDecl "" (CInt 0),CoreDecl "" (CInt 0),CoreDecl "ApiServer.encodeHealth" (CLam [PVar "h"] (CApp (CVar "Lune.Json.Encode.object") (CApp (CApp (CVar "Lune.Prelude.Cons") (CRecord [("key",CString "status"),("value",CApp (CVar "Lune.Json.Encode.string") (CSelect (CVar "h") "status"))])) (CVar "Lune.Prelude.Nil")))),CoreDecl "" (CInt 0),CoreDecl "" (CInt 0),CoreDecl "ApiServer.encodeError" (CLam [PVar "e"] (CApp (CVar "Lune.Json.Encode.object") (CApp (CApp (CVar "Lune.Prelude.Cons") (CRecord [("key",CString "error"),("value",CApp (CVar "Lune.Json.Encode.string") (CSelect (CVar "e") "error"))])) (CVar "Lune.Prelude.Nil")))),CoreDecl "" (CInt 0),CoreDecl "ApiServer.jsonResponse" (CLam [PVar "status",PVar "body"] (CRecord [("status",CVar "status"),("headers",CApp (CApp (CVar "Lune.Prelude.Cons") (CRecord [("key",CString "Content-Type"),("value",CString "application/json")])) (CVar "Lune.Prelude.Nil")),("body",CApp (CVar "Lune.Json.stringify") (CVar "body"))])),CoreDecl "" (CInt 0),CoreDecl "ApiServer.errorToResponse" (CLam [PVar "err"] (CCase (CVar "err") [CoreAlt (PCon "ApiServer.NotFound" [Located {locSpan = Span {spanStartLine = 66, spanStartCol = 14, spanEndLine = 66, spanEndCol = 18}, locComments = Comments {commentsLeading = [], commentsTrailing = [], commentsInner = []}, locValue = PVar "msg"}]) (CApp (CApp (CVar "ApiServer.jsonResponse") (CInt 404)) (CApp (CVar "ApiServer.encodeError") (CRecord [("error",CVar "msg")]))),CoreAlt (PCon "ApiServer.BadRequest" [Located {locSpan = Span {spanStartLine = 68, spanStartCol = 16, spanEndLine = 68, spanEndCol = 20}, locComments = Comments {commentsLeading = [], commentsTrailing = [], commentsInner = []}, locValue = PVar "msg"}]) (CApp (CApp (CVar "ApiServer.jsonResponse") (CInt 400)) (CApp (CVar "ApiServer.encodeError") (CRecord [("error",CVar "msg")])))])),CoreDecl "" (CInt 0),CoreDecl "ApiServer.routes" (CApp (CVar "Lune.Http.Route.define") (CApp (CApp (CVar "Lune.Prelude.Cons") (CApp (CApp (CVar "Lune.Http.Route.get") (CString "/health")) (CVar "ApiServer.healthHandler"))) (CApp (CApp (CVar "Lune.Prelude.Cons") (CApp (CApp (CVar "Lune.Http.Route.get") (CString "/users/:id")) (CVar "ApiServer.getUserHandler"))) (CApp (CApp (CVar "Lune.Prelude.Cons") (CApp (CApp (CVar "Lune.Http.Route.post") (CString "/users")) (CVar "ApiServer.createUserHandler"))) (CVar "Lune.Prelude.Nil"))))),CoreDecl "" (CInt 0),CoreDecl "ApiServer.healthHandler" (CLam [PVar "request",PVar "ctx"] (CApp (CVar "Lune.Http.Api.pure") (CApp (CApp (CVar "ApiServer.jsonResponse") (CInt 200)) (CApp (CVar "ApiServer.encodeHealth") (CRecord [("status",CString "ok")]))))),CoreDecl "" (CInt 0),CoreDecl "ApiServer.getUserHandler" (CLam [PVar "request",PVar "ctx"] (CApp (CVar "Lune.Http.Api.pure") (CApp (CApp (CVar "ApiServer.jsonResponse") (CInt 200)) (CApp (CVar "ApiServer.encodeUser") (CRecord [("id",CInt 123),("name",CString "Alice")]))))),CoreDecl "" (CInt 0),CoreDecl "ApiServer.createUserHandler" (CLam [PVar "request",PVar "ctx"] (CApp (CVar "Lune.Http.Api.pure") (CApp (CApp (CVar "ApiServer.jsonResponse") (CInt 201)) (CApp (CVar "ApiServer.encodeUser") (CRecord [("id",CInt 456),("name",CString "Created")]))))),CoreDecl "" (CInt 0),CoreDecl "ApiServer.config" (CRecord [("port",CInt 8080),("errorHandler",CVar "ApiServer.errorToResponse"),("context",CRecord [("appName",CString "MyApp")])]),CoreDecl "" (CInt 0),CoreDecl "ApiServer.main" (CApp (CApp (CVar "Lune.Task.onError") (CApp (CApp (CVar "Lune.Http.Api.serve") (CVar "ApiServer.config")) (CVar "ApiServer.routes"))) (CLam [PWildcard] (CApp (CVar "Lune.Task.succeed") (CVar "Lune.Prelude.unit"))))]}
